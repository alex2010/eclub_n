webpackJsonp([5],[function(t,e,n){n(82),t.exports=n(64)},,,function(t,e,n){"use strict";function i(t){return null!=t&&""!==t}function r(t){return(Array.isArray(t)?t.map(r):t&&"object"==typeof t?Object.keys(t).filter(function(e){return t[e]}):[t]).filter(i).join(" ")}e.merge=function o(t,e){if(1===arguments.length){for(var n=t[0],r=1;r<t.length;r++)n=o(n,t[r]);return n}var a=t["class"],s=e["class"];(a||s)&&(a=a||[],s=s||[],Array.isArray(a)||(a=[a]),Array.isArray(s)||(s=[s]),t["class"]=a.concat(s).filter(i));for(var l in e)"class"!=l&&(t[l]=e[l]);return t},e.joinClasses=r,e.cls=function(t,n){for(var i=[],o=0;o<t.length;o++)i.push(n&&n[o]?e.escape(r([t[o]])):r(t[o]));var a=r(i);return a.length?' class="'+a+'"':""},e.style=function(t){return t&&"object"==typeof t?Object.keys(t).map(function(e){return e+":"+t[e]}).join(";"):t},e.attr=function(t,n,i,r){return"style"===t&&(n=e.style(n)),"boolean"==typeof n||null==n?n?" "+(r?t:t+'="'+t+'"'):"":0==t.indexOf("data")&&"string"!=typeof n?(-1!==JSON.stringify(n).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),n&&"function"==typeof n.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+t+"='"+JSON.stringify(n).replace(/'/g,"&apos;")+"'"):i?(n&&"function"==typeof n.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+t+'="'+e.escape(n)+'"'):(n&&"function"==typeof n.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+t+'="'+n+'"')},e.attrs=function(t,n){var i=[],o=Object.keys(t);if(o.length)for(var a=0;a<o.length;++a){var s=o[a],l=t[s];"class"==s?(l=r(l))&&i.push(" "+s+'="'+l+'"'):i.push(e.attr(s,l,!1,n))}return i.join("")},e.escape=function(t){var e=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return e===""+t?t:e},e.rethrow=function a(t,e,i,r){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&e||r))throw t.message+=" on line "+i,t;try{r=r||n(91).readFileSync(e,"utf8")}catch(o){a(t,null,i)}var s=3,l=r.split("\n"),u=Math.max(i-s,0),c=Math.min(l.length,i+s),s=l.slice(u,c).map(function(t,e){var n=e+u+1;return(n==i?"  > ":"    ")+n+"| "+t}).join("\n");throw t.path=e,t.message=(e||"Jade")+":"+i+"\n"+s+"\n\n"+t.message,t}},,function(t,e,n){(function(e,n,i){t.exports=e.View.extend({parent:"#main",close:function(){return this.$el.remove(),this.stopListening(),this.unbind(),"function"==typeof this.dPlugin&&this.dPlugin(this),"function"==typeof this.onClose?this.onClose():void 0},initialize:function(t){return this.eventList=[],n.extend(!0,this,t),"function"==typeof this.init&&this.init(),this.auto?this.render():void 0},hide:function(){return this.$el.hide()},show:function(){return this.$el.show()},modeContext:function(){return{}},context:function(){return this.data||this},setTmpl:function(){var t,e;return this.tmpl&&(e=cf.tp[this.tmpl](n.extend({},i.result(this,"context"),cf.tp.opt))),this.mode&&(t=i.result(this,"modeContext"),e&&(t._content=e),e=cf.tp[this.mode](n.extend(t,cf.tp.opt))),this.$el.append(e)},layout:function(){return this.css&&this.$el.css(this.css),(this.tmpl||this.mode)&&this.setTmpl(),"function"==typeof this.setContent&&this.setContent(),this.setRegions(),"function"==typeof this.enhanceContent&&this.enhanceContent(),this.addBtns()},mount:function(){return this.beforeTag?n(this.beforeTag).after(this.$el):this.afterTag?n(this.afterTag).before(this.$el):this.parent?(this.cleanAll&&n(this.parent).empty(),null!=this.pos?n(this.parent).children().eq(this.pos).before(this.$el):n(this.parent).append(this.$el)):void 0},setRegions:function(){switch(this.mode){case"modal":return this.head=this.$(".modal-header"),this.ctn=this.$(".modal-body"),this.foot=this.$(".modal-footer");case"panel":return this.head=this.$(".panel-heading"),this.ctn=this.$(".panel-body,.list-group"),this.foot=this.$(".panel-footer");case"box":return this.head=this.$(".head"),this.ctn=this.$(".refresh"),this.foot=this.$(".foot");case"blank":return this.head=this.$(".head"),this.ctn=this.$(".refresh"),this.foot=this.$(".foot");default:return this.ctn=this.$el}},addEvents:function(){var t,e,r,o,a,s,l,u,c;if(this.exEvents){a=this.exEvents;for(o in a)c=a[o],s=o.split(" "),t=s[0],u=s[1],this.$el.on(t,u,i.bind(c,this))}if("function"==typeof this.setEventList&&this.setEventList(),this.meta&&this.eventList&&this.eventList.length){this.eventList=i.unique(this.eventList),e=n.extend({},cf.meta._.event,this.metaOpt.event),r=i.pick(e,i.uniq(this.eventList)),l=[];for(o in r)c=r[o],l.push(this.$el.on(c.type,c.tag||"."+o,i.bind(c.fun,this)));return l}},addBtns:function(t){var e,n,i,r,o;if(null==t&&(t=this.data),this.setBtns&&(n=this.setBtns())){for(o=[],i=0,r=n.length;r>i;i++)e=n[i],o.push(this.$(".btnCtn").append(util.genBtn(e,t)));return o}},isDlg:function(){return"modal"===this.mode},reRender:function(){var t;return t=n("[data-cid='"+this.cid+"']"),t?(this.$el.empty(),this.layout(),"function"==typeof this.preRender?this.preRender():void 0):void 0},render:function(){var t;return this.isDlg()?(this.parent=null,t="modal fade",cf.mob&&!this.mobStyle&&(t+=" mobModal"),this.$el.addClass(t),this.layout(),"function"==typeof this.preRender&&this.preRender(),this.$el.on("shown.bs.modal",function(t){return function(e){return log("shown"),cf.mob||n(e.target).find("input:eq(0)").select(),t.addEvents(),"function"==typeof t.renderXEditor&&t.renderXEditor(),"function"==typeof t.callback?t.callback():void 0}}(this)).on("hidden.bs.modal",function(t){return function(e){return n(e.target).remove(),"function"==typeof t.afterDlgClose?t.afterDlgClose():void 0}}(this)),this.$el.modal(n.extend({show:!0},this.dlgOpt||{}))):this.rendered?(this.mount(),this.addBtns(),this.delegateEvents(),this.addEvents()):(this.layout(),this.mount(),this.addEvents(),"function"==typeof this.preRender&&this.preRender(),"function"==typeof this.callback&&this.callback(),this.rendered=!0,this.$el.data("_item",this),this.$el.attr("data-cid",this.cid)),this},getModel:function(){return this.$el.data("_item")},closeDlg:function(){return"modal"===this.mode?this.$el.modal("hide"):void 0},atHash:function(t,e){return null==t&&(t=1),null==e&&(e="/"),location.hash.split(e)[t]}})}).call(e,n(4),n(1),n(2))},function(t,e,n){(function(e,i){var r,o;o=n(23),r=n(12),cf.meta._fmBtn={prev:function(){return{cls:cf.style.btn(null,"lg",null)}},next:function(){return{cls:cf.style.btn("primary","lg",null)}},back:function(){return{cls:cf.style.btn(null,"lg",null)}},save:function(){return{cls:cf.style.btn("primary","lg",null)}},finish:function(){return{cls:cf.style.btn("primary","lg",null)}},closeDlg:function(){return{cls:cf.style.btn("info","lg",null)}}},t.exports=o.extend({mode:"panel",tagName:"form",style:"panel-info",cleanAll:!0,className:"form-horizontal",cols:"col-md-2:col-md-10",noLabel:!1,btnType:cf.meta._fmBtn,itemTmpl:cf.tp.formItem,colon:!0,btns:function(){return["save"]},es:[],num:0,asterisk:!0,simpleHead:!1,colon:!0,init:function(){var t;return this._snote={},this.className.indexOf("break")>-1&&(this.cols=null),this.listenTo(this.model,"invalid",this.renderError),this.listenTo(this.model,"valid",this.removeError),this.btnMeta=e.extend({},this.btnType,null!=(t=this.metaOpt)?t.fmBtn:void 0),this.items?this.items=i.result(this,"items"):this.items=this.metaOpt.item},modeContext:function(){return{title:i.result(this,"title"),style:this.style,head:!0,foot:!0,bodyStyle:"panel-body"}},title:function(){var t;return t=this.model.isNew()?"add":"edit",iim(t,this.entity)},setBtns:function(){var t,e,n,r,o,a;for(o=i.result(this,"btns"),a=[],e=0,r=o.length;r>e;e++)n=o[e],i.isString(n)?(t=this.btnMeta[n]?this.btnMeta[n]():{},t.label||(t.label=iic(n)),t.cls+=" "+n):t=n,a.push(t);return a},onTab:function(t){var e;return e=util.ct(t),this.num=e.parent().index(),util.setActive(e.parent()),this.ctn.empty(),this.genForm(this.items[this.num].items),this.isDlg()||this.renderXEditor(),"function"==typeof this.afterOnTab?this.afterOnTab():void 0},single:function(){return i.isString(this.items[0])},curItems:function(){return this.single()?this.items:this.items[this.num].items},addItems:function(t){return this.single()?this.items.push(t):this.items[this.num].items.push(t)},renderTab:function(){var t,n,i,r,o,a;for(o=e('<ul class="nav nav-tabs formTab"/>'),r=this.items,t=n=0,i=r.length;i>n;t=++n)a=r[t],a.label.indexOf(".")>-1&&(a.label=ii(a.label)),o.append("<li><a>"+a.label+"</a></li>"),o.children().eq(this.num).addClass("active");this.ctn.addClass("tab-content"),this.head.after(o),this.formTab=o},preRender:function(){return this.custom||(this.data||(this.data={}),this.id||this.$el.attr("id",this.entity+"Form"),this.tip&&this.ctn.prepend(e('<div class="alert alert-info"/>').html(this.tip)),this.single()?this.genForm(this.items):(this.model.id&&!this.single()&&this.renderTab(),this.genForm(this.items[+(this.num||0)].items)),this.isDlg()||this.renderXEditor()),this.focus&&!cf.mob&&this.$("input:eq(0)").focus(),cf.mob&&this.$(".btn-lg").addClass("btn-block"),this},renderXEditor:function(){var t,e,n,i,r,o,a,s,l,u,c,d,h;for(l=this.xeditor,e=0,r=l.length;r>e;e++)h=l[e],h.xtype.fun?h.xtype.fun(h.opt):h.xtype&&new h.xtype(h.opt);for(this.xeditor=[],u=this.es,i=0,o=u.length;o>i;i++)(t=u[i])();for(this.es=[],c=this.items,d=[],s=0,a=c.length;a>s;s++)n=c[s],t=this.model.meta[n]||cf.meta.common[n],d.push(t&&t.trigger&&!t.view?this.$("[name='"+n+"']").trigger(t.trigger):void 0);return d},getVal:function(t,e){var n,r;return this.data&&(n=t.key?t.key:e,n=n.replace("::","."),r=n.indexOf(".")>0?util.seqProp(this.data,n):this.data[n]),null==r&&null!=t.value&&(r=i.isFunction(t.value)?t.value.call(this,this.data):t.value),t.convert&&(r=t.convert(r)),r},addSubTitle:function(t){return this.ctn.append("<div class='form-group subTitle'><label>"+t.label+"</label></div>")},addAsterisk:function(t,e){return t.valid&&t.valid.required?e.append('<em class="required asterisk">*</em>'):void 0},itemContext:function(t,e){var n,i,r;return t.noLabel||this.noLabel?n="":null!=t.label?n=t.label:e&&(n=iie(this.entity,e)),null!=n&&n.trim()&&this.colon&&(n+="zh"===cf.lang?"：":":"),i={label:n,form:this},this.cols&&(r=this.cols.split(":"),i.labelWidth=r[0],i.inputWidth=r[1]),n||(i.inputWidth=""),i},genFormItem:function(t,n,o){var a,s,l,u,c,d,h,f,p,m;if(t.name=n,t.val=o,t.form=this,d=e(this.itemTmpl(this.itemContext(t,t.name))),t.view)return d.children("div").append(r(t)),this.ctn.append(d),d;if(t.sRow&&cf.mob&&(d.children("label").attr("class","control-label"),d.children("div").removeAttr("class")),c=r(t),l=d.children("div"),t.icon&&(s=e('<div class="input-group"/>'),s.append("<span class='input-group-addon'>"+util.icon(t.icon)+"</span>"),s.append(c),c=s),l.append(c),"text"===t.type&&(t.data||t.entity)){if(u=util.randomChar(4),a=e("<datalist id='"+u+"'/>"),d.children("div").append(a),d.find("input").attr("list",u),t.data)for(p=t.data,h=0,f=p.length;f>h;h++)t=p[h],a.append("<option value='"+t+"'/>");else t.entity&&e.get(util.restUrl(t.entity),{_attrs:t._attrs,max:100},function(e){var n,r,o;for(d.find("input").data("sdata",e.entities),t.data=i.uniq(i.compact(i.pluck(e.entities,t.listName))),t.entity=null,o=t.data,n=0,r=o.length;r>n;n++)t=o[n],a.append("<option value='"+t+"'/>")});if(t.events){m=t.events;for(n in m)o=m[n],d.on(n,i.bind(o,t.form))}}return t.help&&l.append("<p class='help-block'>"+t.help+"</p>"),t.hidden&&d.hide(),this.ctn.append(d),d},enhanceContent:function(){var t,n;return cf.mob?this.foot.append('<div class="btnCtn"></div>'):"form-inline"===this.className?(this.foot=e('<div class="btnCtn"></div>'),this.ctn.append(this.foot)):(t={label:" "},this.cols&&(n=this.cols.split(":"),t.labelWidth=n[0],t.inputWidth=n[1]),this.foot.append(this.itemTmpl(t)),this.foot.find("div div").addClass("btnCtn"))},genForm:function(t){var n,r,o,a,s,l,u,c,d,h,f,p;if(null==t&&(t=this.items),this.xeditor=[],this.viewMode){for(h=[],a=0,u=t.length;u>a;a++)o=t[a],h.push("^"+o);t=h}for(l=0,c=t.length;c>l;l++)if(s=t[l],"_"!==s.charAt(0)){if("^"===s.charAt(0)){if(s=s.substring(1),o=this.model.meta[s]||cf.meta.common[s],!o){log("no form item: "+s);continue}o=i.clone(o),o.name=s,o.view=!0,o.xtype&&(o.attrs||(o.attrs={}),o.attrs.dMode=!0)}else{if("-"===s.charAt(0))continue;if(s=s.split("#")[0],o=this.model.meta[s]||cf.meta.common[s],o&&o.xtype&&(o.attrs||(o.attrs={}),o.attrs.dMode=!1),!o)continue}o&&o._name&&(s=o._name),!o||o.isShow&&!o.isShow.call(this,this.data)||(o.isShow&&!o.isShow.call(this,this.data)&&o.otherwise?this.$el.append(o.otherwise()):o.stype?this.addSubTitle(o):(this.model&&i.isEmpty(this.data)&&(this.data=this.model.attributes),p=this.getVal(o,s),"hidden"===o.type?this.model.set(s,p):"placeholder"===o.type?this.ctn.append("<div class='"+o.cls+"'></div>"):(f=this.genFormItem(o,s,p),o.xtype&&(o.attrs&&e.isFunction(o.attrs.data)&&(o.attrs.data=o.attrs.data(this.data)),r=o.id||util.randomChar(4),f.children("div").length?f.children("div").attr("id",r):f.attr("id",r),d={form:this,name:s,val:p},o.bind?(d.el="#"+r,d.parent=null):d.parent="#"+r,this.xeditor.push({xtype:o.xtype,opt:e.extend(o.attrs,d)})))))}else n=s.split("_"),"hr"===n[1]?this.ctn.append("<hr/>"):"t"===n[1]?this.ctn.append("<p>"+n[2]+"</p>"):"_tmp"===s?this.ctn.append('<div class="tmp"></div>'):this.model.set(n[1],n[2]);return this.el}})}).call(e,n(1),n(2))},function(t,e,n){(function(e,i){var r,o,a;a=n(5),o=n(7),r=n(9),t.exports=a.extend({toFetch:!0,listenTime:"listenTo",modelType:r,initialize:function(t){var n;return t&&e.extend(!0,this,t),this.data&&(this.data=i.result(this,"data")),this.model?(this.entity=this.model.entity,this.data||(this.data=this.model.toJSON())):this.setModel(),this.metaOpt=null!=(n=this.model.meta)?n._:void 0,this.reRendered&&this.listenTo(this.model,"change",this.reRender),this.listenTo(this.model,"destroy",this.remove),"function"==typeof this.init&&this.init(),this.model.view=this,this.$el.data("_item",this.model),this.model.entity?(this.meta||(this.meta=this.model.meta),this.toFetch?(this.afterAjax&&this[this.listenTime](this.model,"sync",this.afterAjax),this[this.listenTime](this.model,"sync",this.render),this.model.fetch(i.result(this,"fetchOpt"))):this.render()):this.render()},context:function(){return this.model?this.model.attributes:this.data||this},fetchOpt:function(){return{data:{_attrs:this._attrs?this._attrs():null},reset:!0}},setModel:function(){var t;return t=e.extend({entity:this.entity,urlRoot:this.urlRoot},this.modelOpt),this.model=new this.modelType(this.data,t),log("zzzz"),log(this.model)},setBtns:function(){var t,e,n,r,o;return this.meta?(n=cf.meta._.btn,r=this.metaOpt.btn||{},this.btns?this.btns=i.result(this,"btns"):this.metaOpt&&(this.btns=this.metaOpt.action),this.btns?i.compact(function(){var i,a,s,l;for(s=this.btns,l=[],i=0,a=s.length;a>i;i++)t=s[i],e=r[t]||n[t],e&&(o=e(this.data,this.entity)),l.push(o&&(o.key=t)&&o);return l}.call(this)):void 0):[]}})}).call(e,n(1),n(2))},function(t,e,n){(function(e,i){var r,o;r=n(10),o=n(12),t.exports=r.extend({events:{"change .toolbar input":"search","change .toolbar select":"filter","click .sort":"sort","click .status a":"status"},getNewInput:function(t,e){var n;return n=t.split("__")[0],e.name=n,e.title=iie(this.entity,n),"text"===e.type&&(e.ph=e.title),o(e)},getInput:function(t,e){var n,i;switch(n=e.split("__")[0],t){case"text":return cf.tp.searchBox({name:e,f:cf.tp.opt.f});case"select":return i={},i.name=n,i.type="select",i.title=iie(this.collection.entity,e),cf.st&&e.endsWith("tatus")?(i.data=cf.st[this.entity+"_"+e+"_hash"],i.label&&(i.title=i.label)):"status__ex"===e&&(i.title="异常",i.data=cf.st[this.entity+"_status_exp_hash"]),o(i);case"checkbox":return"";case"radio":return"";default:return""}},setTools:function(t){var n,r,o,a,s,l,u;if(this.metaOpt&&this.metaOpt.filter&&!this.noFilter){this.toolbar=this.$(".toolbar"),o=this.metaOpt.filter;for(n in o){switch(u=o[n],e.isString(u)?(a=u.split(":"),l=a[0],r=a[1],s=i(this.getInput(l,n))):(r=u.stype,s=i(this.getNewInput(n,u))),s.attr("data-type",r||"s"),u.type){case"text":s.width(100)}this.toolbar.append(s)}!t&&cf.mob&&this.toolbar.children().length>1&&(this.toolbar.addClass("navbar-collapse collapse"),this.toolbar.before(cf.tmpl.mobBtn({icon:"th-large",target:".toolbar",cls:"pull-right icon"})))}},getValue:function(t){var e;return e=i(t.currentTarget),[e.attr("name"),e.val()||e.attr("value"),e.data("type")||"s",this.collection]},filter:function(t){var e,n,i,r,o,a,s,l;if(a=this.getValue(t),o=a[0],l=a[1],s=a[2],n=a[3],"d"===s){switch(i=new Date,r="yyyy-MM-dd HH:mm:ss",l){case"today":i.setHours(18),t=i.pattern(r),i.addDays(-1),e=i.pattern(r);break;case"week":i.sunday(),t=i.pattern(r),i.monday(),i.addDays(-1),i.setHours(18),e=i.pattern(r);break;case"month":i.lastDayOfMonth(),t=i.pattern(r),i.firstDayOfMonth(),i.addDays(-1),i.setHours(18),e=i.pattern(r)}n.setCriteria(o,l,"bt_"+s+"_"+e+"_"+t)}else n.setCriteria(o,l,"lk_"+s+"_"+l);return n.resetFetch(),this._pagination=!1},search:function(t){var e,n,i,r,o;return i=this.getValue(t),n=i[0],o=i[1],r=i[2],e=i[3],e.setCriteria(n,o,"lk_"+r+"_-"+o+"-"),e.resetFetch(),this._pagination?void 0:this._pagination=!1},sort:function(t){var e,n,i,r,o;return r=util.ct(t),util.setActive(r.parent()),i=this.getValue(t),n=i[0],o=i[1],r=i[2],e=i[3],e.setCriteria(n,o,"order_"+o),e.resetFetch(),r.closest(".btn-group").removeClass("open"),this._pagination?void 0:this._pagination=!1},status:function(t){var e,n,i,r,o;return r=util.ct(t),util.setActive(r.parent()),i=this.getValue(t),n=i[0],o=i[1],r=i[2],e=i[3],e.setCriteria(n,o,"eq_"+r+"_"+o),e.resetFetch(),this._pagination?void 0:this._pagination=!1}})}).call(e,n(2),n(1))},function(t,e,n){(function(e,i){t.exports=e.Model.extend({validator:n(20),initialize:function(t,e){return this._col||e&&i.extend(this,e),this.entity&&(this.meta=cf.meta[this.entity],this.meta&&(this.metaOpt=this.meta._||{})),this.afterAjax&&this.listenTo(this,"sync",this.afterAjax),this._errors=[],"function"==typeof this.init&&this.init(),this},urlRoot:function(){return util.restUrl(this.entity)},parse:function(t){var e,n;return n=t.entity||t.entities||t,this.meta&&this.meta._&&"function"==typeof(e=this.meta._).handleData&&e.handleData(n),this.view&&(this.view.data=n),n},reset:function(t){return this._errors.clear(),t&&(this.clear({silent:!0}),t.id&&(this.id=t.id),t.version)?this.version=t.version:void 0},_msg:function(t,e,n){var i;return i=this.view.findItem(t),i.length&&this.view&&(t=this.view.$("[name='"+t+"']").closest(".form-group").children("label").text()),""+t+ii("valid."+e,n)},validate:function(t,e){var n,i,r;for(n in t)if(r=t[n],(i=this.validateItem(n,r))&&i)return this.unset(n),e.key=n,i},validateItem:function(t,e){var n,i,r,o,a;if(i=cf.meta.elem(this.meta,t),i&&(a=i.valid)&&a){for(n in a)if(o=a[n],this.validator[n](e,o))return r=this._msg(t,n,o),this.trigger("invalid",r,{key:t}),this._errors.addUniq(t),r;this.trigger("valid",t),this._errors.remove(t)}return null}})}).call(e,n(4),n(1))},function(t,e,n){(function(e,i){var r,o,a;a=n(5),o=n(7),r=n(48),t.exports=a.extend({pRange:7,max:15,cleanAll:!0,toFetch:!0,itemView:o,entitiesType:r,initialize:function(t){return this.eventList=[],t&&e.extend(!0,this,t),this.collection?(this.collection=i.result(this,"collection"),this.entity=this.collection.entity):this.setCollection(),this.collection.view=this,this.collection.entity&&this.collection.meta?(this.meta=this.collection.meta,this.metaOpt=this.collection.meta._||{},"function"==typeof this.init&&this.init(),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"add",this.addOne),this.afterAjaxOnce&&this.listenToOnce(this.collection,"sync",this.afterAjaxOnce),this.deferObj&&this.listenTo(this.collection,"reset",this.setDefer),this.render(),this.toFetch?this.collection.resetFetch():this.addAll()):("function"==typeof this.init&&this.init(),this.render(),this.addAll())},addByData:function(t){var e;return e=this.collection,this.collection.add(e)},entitiesOpt:function(){var t;return t={},this.entityType&&(t.entityType=this.entityType),this.setCriteria&&(t.criteria=this.setCriteria()),this.comparator&&(t.comparator=this.comparator),t},setCollection:function(){var t;return this.data=i.result(this,"data")||[],t=this.entitiesOpt(),t.entity=this.entity,this.collection=new this.entitiesType(this.data,t)},setEventList:function(){return this.btns&&(this.eventList=this.eventList.concat(this.btns)),this.itemBtns?this.eventList=this.eventList.concat(this.itemBtns):void 0},enhanceContent:function(){return this.$(".toolbar").addClass("btnCtn"),"function"==typeof this.setTools?this.setTools():void 0},addOne:function(t,n,i){return null==i&&(i={}),this.$(".noData").remove(),i={entity:this.entity,model:t,parent:this.ctn,pos:i.pos,toFetch:!1,collection:this,reRendered:!0,eventList:null},this.itemBtns&&(i.btns=this.itemBtns),new this.itemView(e.extend(!0,i,this.modelOpt))},setDefer:function(){return this.deferObj._defer&&this.deferObj._defer===this.deferEvent&&this.deferObj.trigger(this.deferEvent),this.deferObj=null},reRender:function(){},addAll:function(){return this.ctn&&this.ctn.empty(),"function"==typeof this.dataFilter&&this.dataFilter(),this.collection.length>0||this.data&&this.data.length?(log("zccccc:::"),this.collection.each(this.addOne,this),"function"==typeof this.afterAjax&&this.afterAjax(),"function"==typeof this.pagination&&this.pagination()):this.noData&&(this.ctn.append(this.noData()),this.ctn.children().addClass("noData")),"function"==typeof this.afterAddAll?this.afterAddAll():void 0},setCriteria:function(t){var n,r,o,a,s,l,u,c,d;if(u=cf.meta[this.entity],t={offset:0,max:this.max},u&&u._.item){if(a=u._.item,o=i.isString(a[0])?a:a[0].items,o.has("lang")&&(t.lang="eq_s_"+cf.lang),this.items)t._attrs=this.items;else{l=this.hasOwnProperty("cols")?this.cols():u._.tbItem||cf.meta._.tbItem,c=[];for(s in l)d=l[s],d.p?c.push(s+"#"+d.p):"_"!==s.indexOf(0)&&c.push(s);t._attrs=c.join(",")}e.extend(t,"function"==typeof(n=u._).criteria?n.criteria():void 0)}return r=i.result(this,"criteriaOpt"),e.extend(t,r)},genPagination:function(t,e,n,i){var r,o,a,s,l,u,c,d,h,f,p,m;for(a=t/e+1,u=Math.ceil(n/e),c=Math.floor(i/2),1>=a-c?r=1:(r=a-c,o=!0),u>r+i-1?(s=r+i-1,l=!0):(s=u,r>s-i+1&&s-i+1>0&&(r=s-i+1)),o?(m=[{num:"1"}],o&&m.push({num:"<"})):m=[],h=d=f=r,p=s;p>=f?p>=d:d>=p;h=p>=f?++d:--d)m.push({num:h});return l&&(m.push({num:">"}),m.push({num:u})),m},pagination:function(){var t,n,i;if(!this._pagination&&this.foot)return i=this.collection.criteria.offset,n=this.collection.criteria.max,t=this.collection.count,this.foot.html(cf.tp.pagination({res:this.genPagination(i,n,t,this.pRange),max:n,cls:"pagination-sm",ctx:this})),this.foot.find("li:contains('"+(i/n+1)+"')").first().addClass("active"),this.foot.find("select").val(n),this._pageEvent||(this.foot.on("click","li",function(i){return function(r){var o,a;switch(o=e(r.currentTarget),o.addClass("active").siblings().removeClass("active"),a=o.text()){case">":return i.collection.resetFetch("next"),i._pagination=!1;case"<":return i.collection.resetFetch("prev"),i._pagination=!1;default:if(i.collection.resetFetch("one",+a-1),(+a===Math.ceil(t/n)||1===+a)&&o.siblings().length>i.pRange)return i._pagination=!1}}}(this)),this.foot.on("change","select",function(t){return function(n){var i;return i=e(n.currentTarget).val(),t.collection.criteria.max=+i,t._pagination=!1,t.collection.resetFetch()}}(this)),this._pageEvent=!0),this._pagination=!0},findData:util.getModel,setBtns:function(){var t,e,n,r,o,a,s,l,u;if(!this.meta)return[];if(r=cf.meta._.btn,o=this.metaOpt.btn||{},log(this.entity),log(this.itemBtns),this.itemBtns||(this.itemBtns="function"==typeof(e=this.metaOpt).action?e.action():void 0),this.itemBtns&&this.itemBtns.length>0)for(u=this.itemBtns,a=0,l=u.length;l>a;a++)t=u[a],n=o[t]||r[t],n&&(s=n(this.data||{},this.entity),s&&!s.href&&this.eventList.push(t));return this.btns=i.result(this,"btns")||[],i.compact(function(){var e,i,a,l;for(a=this.btns||[],l=[],e=0,i=a.length;i>e;e++)t=a[e],n=o[t]||r[t],n&&this.data&&(s=n(this.data,this.entity)),s&&!s.href&&this.eventList.push(t),l.push(s&&(s.key=t)&&s);return l}.call(this))}})}).call(e,n(1),n(2))},function(t,e,n){(function(e){var i,r;r=n(8),i=n(57),t.exports=r.extend({tmpl:"table",mode:"panel",parent:"#main",cleanAll:!0,max:15,foot:!0,itemView:i,tbStyle:cf.style.tbStyle||"table table-striped table-bordered table-responsive",thead:!0,cols:function(){var t,e,n,i;e={},n=cf.meta._.tbItem,this.metaOpt&&this.metaOpt.tbItem&&(n=this.metaOpt.tbItem);for(t in n)i=n[t],+i.w&&(i.w+="px"),"hide"!==i.type&&(e[t]=i);return e},title:function(){return iin(this.entity)},modeContext:function(){return{title:e.result(this,"title"),foot:!0,style:this.style,toolbar:!0}},context:function(){var t;return t=this.cols(),this.colSize=e.keys(t).length,{cols:t,colSize:this.colSize,tbStyle:this.tbStyle,entity:this.entity,thead:this.thead}},enhanceContent:function(){var t;return document.body.clientWidth<400&&this.ctn.attr("class","mobTb"),"panel"===this.mode&&this.ctn.replaceWith(this.ctn.children()),this.ctn=this.$(".refresh"),this.$(".toolbar").addClass("btnCtn"),"function"==typeof this.setTools&&this.setTools(),t=this.cols(),t.ckb?(this.$("th").first().empty().append('<label><input class="ckb" type="checkbox"> '+(t.ckb.label||"")+"</label>"),this.$el.on("click","input[type=checkbox]",function(t){return function(e){var n,i;return n=t.$(".ckb"),i=util.ct(e),i.parent().is("th")?i.is(":checked")?(n.prop("checked",!0),t.$("tbody tr").addClass("active")):(n.prop("checked",!1),t.$("tbody tr").removeClass("active")):i.parent().is("td")?i.parent().parent().toggleClass("active"):void 0}}(this))):void 0}})}).call(e,n(2))},function(t,e,n){(function(e,n){e.extend(util,{genOptionItem:function(t,e){var i,r,o,a,s,l,u,c;if(e?(s=e.split(","),o=s[0],c=s[1]):(o="val",c="label"),n.isArray(t)){for(l=[],r=0,a=t.length;a>r;r++)i=t[r],l.push(n.isString(i)?"<option value='"+i+"'>"+i+"</option>":"<option value='"+i[o]+"'>"+i[c]+"</option>");return l}u=[];for(o in t)c=t[o],u.push("<option value='"+o+"'>"+c+"</option>");return u},genCheckItem:function(t,i,r,o,a,s){var l,u,c,d,h,f,p,m,v,g,y;for(null==r&&(r="checkbox"),null==s&&(s=""),s=s.toString().split(","),v=e("<div/>"),n.isArray(t)||(t=function(){var e;e=[];for(f in t)y=t[f],g={},g[o]=f,g[a]=y,e.push(g);return e}()),h=0,p=t.length;p>h;h++)c=t[h],n.isString(c)?(l=c,u=c):(l=c[a],u=c[o]),m=e("<label class='checkbox-inline'></label>"),d=e("<input type='"+r+"' name='"+i+"' value='"+u+"'/>"),(s.has(u)||c.selected)&&d.attr("checked",!0),m.append(d),m.append(l),v.append(m);return v}}),t.exports=function(t){var i,r,o,a,s,l,u,c,d,h;if(t.view)d=t.val,"status"===t.name?d=cf.st.text(t.form.entity+"_status",t.val):"select"===(l=t.type)||"radio"===l?t.showText?d=t.showText(t.val):+t.val&&t.data&&(d=n.result(t,"data")[+t.val]):"custom"===t.type&&(d=t.content(t)),o=e("<div class='form-control-static'>"+d+"</div>"),t.cls=t.type;else switch(t.type){case"text":case"file":case"url":case"password":case"email":case"number":case"range":case"tel":case"texteara":case"search":case"datetime":case"date":o=e("<input/>"),o.attr("type",t.type),null!=t.val&&o.val(t.val);break;case"textarea":o=e("<textarea></textarea>"),t.rows&&o.attr("rows",t.rows),t.val&&o.text(n.isObject(t.val)?JSON.stringify(t.val):t.val);break;case"select":o=e("<select value='"+t.val+"'></select>"),r=util.randomChar(5),o.attr("id",r),t.data?(i=n.result(t,"data"),o.append(util.genOptionItem(i,t.keyVal)),o.data("sdata",i)):t.entity&&(t.url||(t.url=util.restUrl(t.entity)),s=e.extend(n.result(t,"criteria"),{_attrs:t._attrs||t.keyVal}),e.get(t.url,s,function(n){return 0!==n.count?(o=e("#"+r,t.form?t.form.$el:"body"),i=n.entities,t.parse&&(i=t.parse(i)),o.append(util.genOptionItem(i,t.keyVal)),t.val&&o.children("option[value='"+t.val+"']").attr("selected",!0),t.addBtn&&o.append("<label><a class='new'>"+iim("add")+"</a></label>"),o.data("sdata",i)):void 0})),t.title&&o.prepend("<option value='0'>"+t.title+"</option>"),t.val&&o.children("option[value='"+t.val+"']").attr("selected",!0);break;case"checkbox":case"radio":o=e('<div class="radioBox"></div>'),r=util.randomChar(5),o.attr("id",r),t.keyVal?(u=t.keyVal.split(","),a=u[0],h=u[1]):(a="val",h="label"),t.data?o.append(util.genCheckItem(n.result(t,"data"),t.name,t.type,a,h,t.val)):t.entity&&(t.url||(t.url=util.restUrl(t.entity)),s=e.extend(t.criteria,{_attrs:t.keyVal}),e.get(t.url,s,function(n){var i;return o=e("#"+r),o.append(util.genCheckItem(n.entities,t.name,t.type,a,h,t.val)),t.addBtn?(i=e("<label class='checkbox-inline'><a class='new'>"+iim("add")+"</a></label>").click(function(n){return new cf.view.sForm({entity:t.entity,mode:"modal",items:["code","label","description"],data:{type:"commodity"},_saveSuccess:function(n){return function(n,i){return e("#"+r).children().append(util.genCheckItem([i.entity],t.name,t.type,a,h,t.val)),n.view.$el.modal("hide")}}(this)})}),o.children("div").append(i)):void 0}));break;case"view":case"label":o=e("<label class='form-control-static'>"+t.val+"</label>");break;case"holder":o=e('<div class="holder"></div>');break;case"custom":o=t.content(t)}if(t.events){c=t.events;for(a in c)h=c[a],o.on(a,n.bind(h,t.form))}return["text","url","password","email","number","range","tel","select","textarea","datetime","date"].has(t.type)&&(t.ph&&o.attr("placeholder",ii(t.ph)||t.ph),o.attr("name",t.name),t.readonly&&o.attr("readOnly",!0),o.addClass(t.cls||cf.style.inputClass)),t.id&&o.attr("id",t.id),t.cls&&o.addClass(t.cls),o}}).call(e,n(1),n(2))},function(t,e,n){(function(e,i){var r;r=n(8),cf.widget.selectItem=n(10).extend({max:10,mode:"panel",toFetch:!1,cleanAll:!0,noStr:"Search Entity by title",criteriaOpt:function(){return{_attrs:"title,username,subTitle"}},init:function(){return this.listenTo(this.collection,"reset",this.addAll)},events:{"change select":function(t){var n,i;return i=e(t.target).val(),i.trim()?(n=util.restUrl("file"===i?"file/pages?code="+cf.code:i),this.collection.entity=i,this._pagination=!1,this.collection.url=n,this.collection.resetFetch()):void 0}},modeContext:function(){return{title:iin(this.entity),tagClass:"list-group",foot:!0}},noData:function(){return"<p class='info-text'>"+this.noStr+"</p>"},modelOpt:{tagName:"a",className:"list-group-item",setContent:function(){var t,e;return t=this.data,e=t.title||t.username,this.$el.append(e),this.$el.attr("id","ss-"+t._id),this.$el.attr("title","ss-"+e)}}}),t.exports=n(5).extend({key:cf._idn,label:"title",disabled:!1,noHidden:!1,boxClass:"selectBox",cleanAll:!1,paging:!0,addNew:!1,setInitVal:!0,events:function(){var t,e;return t=this.clickShow?"click":"change",e={"click a[data-cid]":"pick"},e[t+" input[type=text]"]="showBox",e},init:function(){return this.target=this.$("input[type=text]"),"function"==typeof this.setData&&this.setData(this.form.data),this.render()},setSearch:function(){},setPanel:function(){var t;return t=e.extend({parent:this.panel,p:this},i.result(this,"panelOpt")),this.collection=new cf.widget.selectItem(t)},setContent:function(){return this.panel=e("<div/>"),this.panel.addClass(this.boxClass),this.panel.css({width:this.target.outerWidth()}),"function"==typeof this.setPanel&&this.setPanel(),this.$el.append(this.panel),this.initData&&(this.data=this.initData(),this.setVal()),this.hiddenValue&&this.target.removeAttr("name"),e(document).mouseup(function(t){return function(){return t.panel.hide()}}(this)),this.$el.mouseup(function(){return!1}),this.$el.data("sb",this)},filterItem:function(t){var n;return n=e(t.currentTarget).val(),n?this.ctn.children().hide().filter(":contains('"+n+"')").show():this.ctn.children().show()},pick:function(t){var e,n,i,r;if(this.data=this.collection.findData(t).attributes,this.setVal(),this.setAttrs)for(r=this.setAttrs.split(","),e=0,i=r.length;i>e;e++)n=r[e],this.form.setVal("[name='"+n+"']",this.data[n],n);return"function"==typeof this.afterPick&&this.afterPick(this.data),this.panel.hide()},findSelect:function(t){var e,n;return n=i.isString(t)?parseInt(t):util.getTargetId(t),
e=this.collection.get(n),e?this.data=e.toJSON():void 0},setVal:function(){return this.data&&(this.val=this.data[this.key],this.target.val(this.data[this.label]),this.hiddenValue)?this.form.model.set(this.name,this.val):void 0},setCriteria:function(t){var e;return e=this.collection.collection,this.searchItem&&e.setCriteria(this.searchItem,t,this.searchStr.replace("#v",t)),e._pagination=!1,e.resetFetch()},showBox:function(t){return this.setCriteria(util.ct(t).val()),this.panel.show()},reset:function(t){return this.entity=t,this.setPanel()}})}).call(e,n(1),n(2))},,function(t,e,n){t.exports={_prop:"refFile",_func:"head",_dv:{},_resetProp:function(t){return this.form.model.attributes[this._prop]=t},_getProp:function(t){return null==t&&(t=this._prop),this.form.model.attributes[t]||(this.form.model.attributes[t]=this._dv)},_getObj:function(t,e){var n;return null==t&&(t=this._func),null==e&&(e={}),n=this._getProp(),t?n[t]||(n[t]=e):n},_setObj:function(t,e){return e?this._getProp()[e]=t:this._resetProp(t)},_swap:function(t,e){var n,i;return n=this._getObj(),i=n[t],n[t]=n[e],n[e]=i},_delItem:function(t){return util.del(t,this._getObj())},_addArrayItem:function(t,e){var n;return null==e&&(e=!0),n=this._getObj(null,[]),e?n.push(t):n=[t],this._setObj(n,this._func)},_delArrayItem:function(t){return this._getObj().remove(t),util.del(t.split(".")[0],this._getProp())},setWtRes:function(t){var e,n;return e=this.form.model,n=e.get("_wtRes")||"",n+="::"+t,e.set("_wtRes",n)},delWtRes:function(t){var e,n;return e=this.form.model,n=e.get("_wtRes"),n&&t?(n.replace("::"+t,""),e.set("_wtRes",n)):void 0}}},function(t,e,n){(function(e){t.exports=function(t){var n,i,r;return i=util.ct(t),n=i.closest("tr"),i.hasClass("active")?n.removeClass("hasSubTable").next().remove():(n.hasClass("hasSubTable")?(r=n.next(),r.children("td").empty(),i.siblings().removeClass("active")):(r=e("<tr class='subTable'><td colspan=\""+n.children("td").length+'"></td></tr>'),n.addClass("hasSubTable").after(r)),"function"==typeof this.afterShow&&this.afterShow(t,r.children())),i.toggleClass("active"),t.stopPropagation()}}).call(e,n(1))},,function(t,e,n){(function(t){var e;e=n(13),t.extend(cf.meta.common,{refClass:{id:"_refClass",type:"select",trigger:"change",events:{change:function(e){return t("#_ref").data("sb").reset(util.ct(e).val())}},data:function(){var t,e,n,i,r;for(i=cf.opt.entity.headRefEntity,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push({val:e,label:ii("nav."+e)});return r}},ref:{id:"_ref",type:"text",bind:!0,xtype:e,attrs:{trigger:!0,label:"title",hiddenValue:!0,setPanel:function(){return this.entity?this.collection=new cf.widget.selectItem({entity:this.entity,parent:this.panel,criteriaOpt:function(){return{_attrs:"title,username,subTitle,refFile"}},p:this}):void 0}}}})}).call(e,n(1))},function(t,e,n){(function(t){var e,i,r;i=n(26),e=n(6),r=n(16),t.extend(cf.meta,{friend:{msg:{type:"textarea",cols:-1,attr:{rows:3}},status:{type:"radio",name:"Agree Follow",attrs:{data:[{label:"Agree Be Followed",val:1,selected:!0},{label:"Agree to Add Friend",val:2},{label:"Deined Request",val:-1}]}}},userMsg:{sendTo:{type:"label",label:"收信人"},email:{type:"hidden"},from:{type:"hidden"},content:{type:"textarea",rows:8},username:{type:"hidden"},_:{item:["sendTo","title","content","email","from","username"]}},user:{opsd:{type:"password",id:"old",isShow:function(){return cf.console},valid:{required:!0,minlength:3,maxlength:15}},rpsd:{type:"password",ph:"重复密码",valid:{required:!0,equalTo:"#rpsd"}},wid:{type:"text"},console:{type:"hidden",isShow:function(){return"admin"===cf.app},value:function(){return cf.code}},lang:{type:"hidden",isShow:function(){return cf.console},value:function(){return cf.lang}},snsType:{type:"select",attrs:{cat:"snsType"}},captcha:{type:"text",valid:{required:!0}},captchaImg:{type:"custom",noLabel:!0,content:function(){return'<div><img id="imageCaptcha"><a id="changeImg">'+ii("c.nextPic")+"</a></div>"}},gender:{type:"radio",showText:function(t){return t||(t=!1),iCat("gender")[t]},data:[{label:"男",val:"true",selected:!0},{label:"女",val:"false"}]},woid:{type:"text"},_:{filter:{username:"text:s",status:"select:l"},fmBtn:{login:function(){return{cls:cf.style.btn("primary","lg",!0,"save")}},forgetPsd:function(){return{cls:"lost fl"}},reg:function(){return{cls:"reg fr"}},register:function(){return{cls:cf.style.btn("primary","lg",!0,"save")}}},fmOpt:{handleData:function(t){return t&&(util.pStr(t,"info"),util.pStr(t,"sid"),t.info)?util.pStr(t.info,"sns"):void 0}},item:["username","phone","email","gender","title","industry","password","rpsd","company","country","status","introduction","portrait","photo","woid"],event:{roles:{type:"click",fun:r},lost:{type:"click",fun:function(){return"modal"===this.mode&&this.$el.modal("hide"),new i.forgetPsdForm({mode:"modal"})}},reg:{type:"click",fun:function(){return"modal"===this.mode&&this.$el.modal("hide"),new i.regForm({mode:"modal"})}},verify:{type:"click",fun:function(e){var n,i;return n=this.$('input[name="phone"]'),i=n.val().trim(),n.parent().hasClass("has-error")||!i.length?void alert("请输入正确的电话号码"):t.get(util.actUrl("profile","smsVerify"),{phone:n.val(),code:cf.code},function(){return util.ct(e).text("短息已发送...").addClass("disabled")})}},msg:{type:"click",fun:function(t){var n;return n=this.findData(t).attributes,new e({entity:"userMsg",mode:"modal",toFetch:!1,btns:["save"],data:{sendTo:n.username+"("+n.email+")",email:n.email,from:cf.community.email,username:user.username}})}}},btn:{msg:function(){return util.iBtn("envelope")},roles:function(){return util.iBtn("education")}},tbItem:{username:{type:"view"},email:{w:200},title:{w:150},lastLogin:{w:150,type:"date"},_opt:{type:"btns",w:200}},action:function(){return["roles","msg","popEdit","lock","pub","del"]}}}})}).call(e,n(1))},function(t,e,n){(function(e,n){t.exports={required:function(t,n){return n&&(e.isUndefined(t)||null===t||0===t.length)},min:function(t,e){return+e>+t},max:function(t,e){return+t>=+e},minlength:function(t,e){return t&&t.length<parseInt(e)},maxlength:function(t,e){return t&&t.length>parseInt(e)},number:function(t){return t&&!/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(t)},date:function(t,e){},dateTime:function(t,e){},telephone:function(t,e){return!/^(13[0-9]|15[0|1|2|3|6|7|8|9]|18[5|6|8|9])\d{8}$/.test(t)},time:function(t,e){},digits:function(t,e){},alphabet:function(t,e){return!/^[A-Za-z]+$/.test(t)},"char":function(t,e){return!/^[A-Za-z0-9_-]+$/.test(t)},equalTo:function(t,e){return t!==n(e).val()},inEqualTo:function(t,e){return t===n(e).val()},email:function(t,e){return!/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},pattern:function(t,e){return e.test(t)},url:function(t,e){return t&&!/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},range:function(t,e){},laterThan:function(t,e){}}}).call(e,n(2),n(1))},function(t,e,n){(function(e){var i;i=n(6),t.exports=i.extend({complex:function(t,n){var i,r,o,a,s;a={},o=[];for(i in t)s=t[i],i.indexOf("::")>1?(r=i.split("::"),a[r[0]]=!0,t[r[0]]?e.isString(t[r[0]])&&(t[r[0]]=JSON.parse(t[r[0]])):t[r[0]]={},t[r[0]][r[1]]=s,o.push(util.del(i,t))):o.push(void 0);return o},before:function(t){var n,i;return this._super("before",t),n=this.curItems(),n.has("brief")&&!t.brief&&t.content&&t.content.length>12&&(t.brief=util.adjustText(t.content,cf.meta.elem(this.meta,"brief").size)),cf.opt&&(this["static"]||(this["static"]=cf.opt.entity.entityRef||{}),(i=this["static"][this.entity])&&i&&(e.isFunction(i)&&(i=i(this.model.attributes)),t._static=i)),t._attrs||(t._attrs=this._attrs()),n.has("_pass")&&(t._pass=!0),this.rsMsg&&(t._rsMsg=this.rsMsg),this.complex(t),t},saveSuccess:function(t,e,n){var i,r,o,a;a=t.view,r=this.model.meta._.item,i=a.single()||+a.num+1===r.length,"modal"===a.mode?i?a.$el.modal("hide"):a.num=(+a.num+1)%r.length:i?(o=util.navUrl("data","list",t.entity),app.navigate(o,{trigger:!0})):(a.num=(+a.num+1)%r.length,a.formTab&&a.formTab.find("li").eq(a.num).children().trigger("click"))}})}).call(e,n(2))},function(t,e,n){(function(e){var i;i=n(56).extend({toFetch:!1,_pagination:!0,init:function(){return this.dMode?(this.btns=null,this.collection.meta._.action=null):(this.btns=["popAdd"],this.itemBtns=["popEdit","formDel"]),this.listenTo(this.collection,"all",this.callback)},modelOpt:{local:!0,afterRemove:function(){return this.collection._setObj(this.collection.collection.toJSON())}},formEditOpt:{toFetch:!1,_save:function(){var t;return this.closeDlg(),t=this.rCollection,t.add(this.model),t.view._setObj(t.toJSON())}},modeContext:function(){return{toolbar:!0,title:iin(this.entity)}},formAddOpt:{_save:function(){var t;return this.closeDlg(),this.model.set("id",util.randomChar(4)),t=this.rCollection,t.add(this.model),t.view._setObj(t.toJSON())}},data:function(){return this._getProp()}}),e.extend(i.prototype,n(15)),t.exports=i}).call(e,n(1))},function(t,e,n){(function(e,i){var r;r=n(7),t.exports=r.extend({listenTime:"listenToOnce",num:0,events:{"click .nav-tabs a":"onTab","click .back":"back","click .save":"save","click .show-help":"showHelp","click .close-help":"closeHelp","click .closeDlg":"close","change input[name],textarea[name],select[name]":"valChange"},init:function(){return this.listenTo(this.model,"invalid",this.renderError),this.listenTo(this.model,"valid",this.removeError)},close:function(){return"modal"===this.mode?this.$el.modal("hide"):void 0},cleanAttr:function(t){var n,i,r,o,a;for(o=[],a={},n=0,r=t.length;r>n;n++)i=t[n],"^"===i.charAt(0)&&(i=i.substring(1)),i.indexOf("::")>1?a[i.split("::")[0]]=!0:o.push(i);return o=o.concat(e.keys(a)),o.join(",")},_attrs:function(){var t,e,n,i,r,o;if(r=[],this.single())r=this.items;else for(i=this.items,t=0,n=i.length;n>t;t++)e=i[t],r=r.concat(e.items);return r=function(){var t,n,i,o;for(o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push("^"===(i=e.charAt(0))||"-"===i?e.substring(1):e);return o}(),o=this.cleanAttr(r),"user"===this.entity&&(o=o.replace("password,","").replace("rpsd,","")),o},cAttr:function(t){var e,n,i;n=[];for(e in t)i=t[e],n.push(this.$("[name='"+e+"']").val(i).trigger("change"));return n},findItem:function(t){return this.$("*[name='"+t+"']")},findItemValue:function(t){var e,n,r;return r=this.findItem(t),r.is("input:checkbox")?r.length>1?(n=function(){var t,n,o;for(o=[],t=0,n=r.length;n>t;t++)e=r[t],i(e).is(":checked")&&o.push(i(e).val());return o}(),n.join(",").toLowerCase()):r.is(":checked")?r.val():"false":r.is("input:radio")&&r.length>1?r.filter(":checked").val():r.val()},onTab:function(){return log("on tab")},removeError:function(t){return this.findItem(t).tooltip("destroy").parent().removeClass("has-error")},renderError:function(t,e){var n,i;return n=this.findItem(e.key),i=n.next(),i.length&&i.is("div")?void(i.text()!==t&&i.children(".tooltip-inner").text(t)):(n.attr("title",t),n.parent().addClass("has-error"),n.tooltip({delay:{show:500,hide:300},trigger:"manual"}).tooltip("show"))},setVal:function(t,e,n){var i;return i=this.$(t),i.length?(i.val(e),i.trigger("change")):n?this.model.set(n,e):void 0},valChange:function(t){var e,n,r;return n=i(t.currentTarget),e=n.attr("name"),r=this.findItemValue(e),this.model&&!this.model.validateItem(e,r)?this.model.set(e,r):void 0},showHelp:function(t){return util.ct(t).parent().fadeIn()},closeHelp:function(t){return util.ct(t).parent().fadeOut()},prev:function(){return-1===--this.num?W.history.back():this.cForm()},next:function(){return this.save()},reset:function(){return this.$el.resetForm()},before:function(t){return t},curItems:function(){var t,e,n,r,o;for(r=this.$("*[name]"),o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(i(e).attr("name"));return o},single:function(){return!0},save:function(){var t,n,i,r,o,a,s,l,u;this.ctn.find(".alert-danger").remove(),a=this._snote;for(r in a)u=a[r],this.model.set(r,u.code());if(this._snote={},this.model.isNew())for(s=e.difference(this.curItems(),e.keys(this.model.attributes)),n=0,o=s.length;o>n;n++)if(i=s[n],l=this.model.set(i,this.findItemValue(i),{validate:!0}),!l&&(t=this.findItem(i),t.length))return void this.findItem(i).focus();return this.model._errors.length&&(t=this.findItem(this.model._errors[0]),t.length)?void t.focus():(app.blockLine=this.$("a.btn-primary"),this._save())},msg:function(t,e){return null==e&&(e="danger"),log(t),this.ctn.prepend(cf.tp.alert({type:e,closed:!0,msg:t}))},checkAttrs:function(t){return!0},_save:function(){var t;return t=this.before(this.model.attributes),this.checkAttrs(t)?this.model.save(t,{success:this._saveSuccess,error:this._saveError,wait:!0}):void 0},back:function(){return history.back()},_saveSuccess:function(t,n,i){var r,o,a;return a=t.view,a.rCollection?(r=e.result(a,"rCollection"),o=r.get(n.entity.id),o?(log("modeify"),o.set(n.entity)):(log("add to collection"),r.add(n.entity,{pos:0}))):a.rModel&&(r=e.result(a,"rModel"),r.set(n.entity)),a.resetForm&&a.el.reset(),a.cleanForm&&t.unset(),a.saveSuccess(t,n,i)},saveSuccess:function(t){return"modal"===t.view.mode?t.view.$el.modal("hide"):t.view.$el[0].reset()},_saveError:function(t,e,n){var r,o,a,s,l,u,c;if(l=i.parseJSON(e.responseText),c=t.view,s="",l.errors)for(u=l.errors,o=0,a=u.length;a>o;o++)r=u[o],s+="<p>"+r.message+"</p>";else l.msg&&(s="<p>"+ii(l.msg)+"</p>");return c.ctn.find(".alert").remove(),c.msg(s),"function"==typeof c.saveError?c.saveError(t,e,n):void 0},preRender:function(){return this.focus&&!cf.mob&&this.$("input:eq(0)").focus(),cf.mob&&this.$(".btn-lg").addClass("btn-block"),this}})}).call(e,n(2),n(1))},function(t,e,n){(function(e){n(86),n(87),n(67),t.exports={fun:function(t){var n,i,r;if(!t.dMode)return r=e(t.parent),r.parent().addClass("has-feedback"),n=r.find("input"),i={showMeridian:!0,autoclose:!0,todayBtn:!0},t.val&&n.val(t.val.replace(/[TZ]/g," ")),cf.mob&&n.attr("readonly","true"),n.datetimepicker(e.extend(i,t)),n.trigger("change"),n.parent().addClass("rel").append('<span class="form-control-feedback '+util.iClass("th")+'"></span>')}}}).call(e,n(1))},function(t,e,n){(function(e){var i,r;i=n(7).extend({className:"media",genResItem:function(t){return"img"===t.type?'<img class="img-responsive img-thumbnail" src="'+t.path+"?"+util.randomChar(2)+'">':"doc"===t.type?util.icon("file")+'<a target="_blank" href="'+t.path+'">'+t.fName+'<span class="float-right timestamp">'+(t.username||"")+" "+(t.dateCreated||"")+"</span>":"audio"===t.type?util.html5Check()?'<audio controls=""><source src="'+t.path+'"/></audio>':"<div>"+t.path+"</div>":"video"===t.type?util.html5Check()?'<video controls="controls"><source src="'+t.path+'"/></video>':"<li><div>"+t.path+"</div></li>":void 0},setContent:function(){var t,n,i;return this.data=t=this.model.toJSON(),t.uid&&(n=t.uid.split("__"),t.uid=n[0],t.username=n[1]),this.$el.append(this.genResItem(t)),this.$el.append(e('<div class="f-btn btnCtn"/>')),this.collection.ordered&&this.collection.multi?(i=e('<div class="s-btn"/>').appendTo(this.$el),i.append(util.icon("chevron-left",cf.style.btn(null,"sm",!1,"mLeft"))),i.append(util.icon("chevron-right",cf.style.btn(null,"sm",!1,"mRight")))):void 0}}),r=n(8),t.exports=r.extend({max:20,mode:"panel",className:"xFile",toFetch:!1,pickBtn:!1,syncBtn:!1,cleanAll:!0,entity:"xFile",type:"img",items:"title,type",itemBtns:["zoom","del"],itemView:i,url:"/upload",multi:!0,auto:!0,refClass:"post",fixed:!1,func:"head",context:function(){return{foot:!0}},init:function(){return"headItem"===this.form.entity&&(this.func=e("input[name='type']").val()),this.btnTitle||(this.btnTitle=iim("upload",this.type)),this.upOpt||(this.upOpt=e.extend({},cf.opt.image[this.func])),this.fName?this.upOpt.fName=this.fName():void 0},criteriaOpt:function(){return{type:"eq_s_"+this.type}},enhanceContent:function(){return this.$el.addClass(this.type),this.ctn.addClass("media-list")},preRender:function(){var t,n;return this.head.addClass("clearfix"),this.syncBtn&&this.head.append('<div class="pickPics uploadBtn">'+iim("sync",this.type)+"</div>"),this.pickBtn&&(t=this,n=e("<div class='syncImg uploadBtn'>"+iim("select",this.type)+"</div>").click(function(){return new r({mode:"modal",toFetch:!0,entity:"xFile",events:{"click img":function(e){var n;return n={id:util.ct(e).attr("src").split("/").pop(),type:t.type,func:t.func},t.uploader.multi||t.collection.reset(),t.collection.add(n),t.newRefFile(n),this.closeDlg()}},enhanceContent:function(){return this.ctn=e('<ul class="media-list refresh"></ul>'),this.$(".modal-body").addClass("xFile img").append(this.ctn)},addOne:function(t){var e,n,i;return e=t.attributes,i=util.resPath("_thumb/"+e.id),n="<div class='media'><img class='pt img-thumbnail' src='"+i+"'></div>",this.ctn.append(n)},context:function(){return{head:!0,title:"插入图片"}}})}),this.head.append(n)),this.initUploader()},uploadCallback:function(t){return this.collection.add(t.entity)},initUploader:function(){var t,n,i,r,o;if(!this.dMode)return t=cf.uSize[this.type],r=this.upOpt,r.thumb||(r.thumb="_thumb:100"),window.user&&(r.uid=user.id+"__"+user.username),r.code||(r.code=cf.code),r.type=this.type,o=this,i=e("<div class='uploadBtn'>"+this.btnTitle+"<input type='file' value='浏览'/></div>"),n=i.children("input"),this.multi&&n.attr("multiple",!0),t.ext&&n.attr("accept","image/*"),this.head.append(i),this.upOpt.text&&this.head.append("<div>"+this.upOpt.text+"</div>"),o=this,n.change(function(t){var n,i,a,s,l,u,c;for(a=util.ct(t)[0].files,c=[],s=l=0,u=a.length-1;u>=0?u>=l:l>=u;s=u>=0?++l:--l)i=a[s],i.size>cf.uSize.img.max?c.push(popMsg("文件太大","warning")):(n=new FormData,n.append(util.randomChar(8),i),n.append("code",cf.code),o=o,r.code=cf.code,c.push(e.ajax({type:"POST",url:util.getUrlParams(util.actUrl("upload"),r),data:n,contentType:!1,processData:!1,success:function(t){return o.uploadCallback.call(o,t)}})));return c})}})}).call(e,n(1))},function(t,e,n){(function(e){var i;i=n(6),e.extend(t.exports,{settingForm:i.extend({title:iic("cfg"),mode:"modal",entity:"user",items:["username"],btns:["save"],callback:this._cCallback}),changePsdForm:i.extend({title:iic("account"),urlRoot:util.actUrl("profile","modifyPsd"),toFetch:!1,style:" ",entity:"user",data:function(){return{username:user.username,email:user.email,id:user.id}},info:"为了保护您账户和资料的安全，请定期修改您的密码",items:["^username","email","opsd","password","rpsd"],parent:"#main",callback:this._cCallback}),forgetPsdForm:i.extend({id:"fpForm",title:"忘记密码",toFetch:!1,entity:"user",urlRoot:util.actUrl("profile","forgetPsd"),asterisk:!1,items:["email","phone","cid"],btns:["save"],eventList:["sKey"],callback:this._cCallback}),regForm:i.extend({entity:"user",toFetch:!1,title:"用户注册",className:"break",setBtns:function(){return[{label:"同意协议并注册",cls:cf.markBtn}]},urlRoot:util.actUrl("profile","register"),items:function(){return["username","email","password","rpsd","_lang_zh"]},callback:this._cCallback}),loginForm:i.extend({id:"loginForm",title:iic("login"),entity:"user",urlRoot:util.actUrl("auth","login"),className:"break",style:"panel-primary",toFetch:!1,asterisk:!1,items:["username","password","console","lang","cid","cCode","_auth_true","pStr"],btns:["login","forgetPsd"],eventList:["sKey","lost","reg"],callback:this._cCallback,before:function(t){var e,n;return e=t.username,n=this.model.validator,n.email(e)?n.telephone(e)||(t.phone=e):t.email=e,t},saveSuccess:function(t,e,n){return"modal"===t.view.mode&&t.view.$el.modal("hide"),user.login(e.user)}})})}).call(e,n(1))},function(t,e,n){(function(e){var i;i=n(25).extend({syncBtn:!0,pickBtn:!0,type:"img",showThumb:"_thumb",itemBtns:["popEdit","zoom","del"],context:function(){return{style:this.style}},events:{"click .mLeft":function(t){var e,n;return n=util.ct(t).closest(".media"),e=n.index(),n.after(n.prev()),this._swap(e-1,e)},"click .mRight":function(t){var e,n;return n=util.ct(t).closest(".media"),e=n.index(),n.before(n.next()),this._swap(e,e+1)}},data:function(){var t,e,n,i,r;for(this._func=this.func,i=this._getObj(null,[]),r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push({path:util.resPath(e),type:this.type,id:e});return r},uploadCallback:function(t){var e;return e=t.entity,e.id=e.fieldname+"."+e.extension,e.func=this.func,e.path=e.path.replace("public",""),"image/jpeg"===e.mimetype&&(e.type="img"),this.multi?this.collection.add(e):this.collection.reset(e),this._addArrayItem(e.id,this.multi)}}),e.extend(i.prototype,n(15)),t.exports=i}).call(e,n(1))},function(t,e,n){(function(e,n){var i;i=function(t){return this.style="panel-info",this.parent="#main",e.extend(!0,this,t),app["_"+this.name]=this},e.extend(i.prototype,{init:function(t,e,n,i){return null==t&&(t=app),null==e&&(e="!"),null==n&&(n=this.name),null==i&&(i=this.mgm),t["__"+n]!==!0?(t["__"+n]=!0,t.route(e+"/"+n+"(/:act)(/:entity)(/:p)",n,i)):void 0},ready:function(t){return this.init(t,"!",this.name,this.fun)}}),i.extend=n.Model.extend,t.exports=i}).call(e,n(1),n(4))},function(t,e,n){(function(t,e,n){e.View.prototype._super=function(e){return this.constructor.__super__[e].apply(this,t.rest(arguments))},e.View.prototype._over=function(e){return this.constructor.prototype[e].apply(this,t.rest(arguments))},e.View.prototype.reRender=function(){return this.$el.empty(),this.render()},e.View.prototype.close=function(){return this.remove(),"function"==typeof this.dPlugin&&this.dPlugin(),this.unbind(),this.undelegateEvents(),this.stopListening(),"function"==typeof this.onClose?this.onClose():void 0},e.Model.setPost=function(){var t;return e.emulateJSON=!0,t=e.Model.prototype.save,e.Model.prototype.save=function(e,n){return null==e&&(e={}),null==n&&(n={}),this.set(e),n.data=this.toJSON(),t.call(this,e,n)}},n.extend(window.util,{getView:function(t){return t instanceof n||(t=util.ct(t)),t.closest("[data-cid]").data("_item")},getModel:function(t){return util.getView(t).model}})}).call(e,n(2),n(4),n(1))},function(t,e,n){(function(t){t.fn.serializeObject=function(){var e;return e={},t.each(this.serializeArray(),function(){null!=e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},t.postJSON=function(e,n,i,r){return t.ajax({type:"POST",url:e,data:util.tStr(n),contentType:"application/json; charset=utf-8",dataType:"JSON",success:i,error:r})},t.extend({moveTo:function(e){return e=t.extend({pos:"body",time:500,offset:0},e||{})}})}).call(e,n(1))},function(t,e,n){(function(t,e){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.capitalize=function(){return this.trim().substring(0,1).toUpperCase()+this.trim().substring(1)},String.prototype.capAll=function(){var t,e,n;return n=function(){var n,i,r;for(r=[],e=n=1,i=this.length;i>=1?i>=n:n>=i;e=i>=1?++n:--n)t=this.charAt(e),r.push(t>"A"&&"Z">t?" "+t:t);return r}.call(this),this.charAt(0).toUpperCase()+n.join("")},String.prototype.startsWith=function(t){return 0===this.lastIndexOf(t,0)},String.prototype.endsWith=function(t){var e;return e=this.length-t.length,e>=0&&this.indexOf(t,e)===e},String.prototype.isEmpty=function(){return 0===this.length||" "===this||/^\s*$/.test(this)},String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"gm"),e)},String.prototype.truncate=function(t,e){return null==t&&(t=30),e=Object.isUndefined(e)?"...":e,this.length>t?this.slice(0,t-e.length)+e:String(this)},String.prototype.fileName=function(){return this.substr(this.lastIndexOf("/")+1)},Function.prototype.getName=function(){var t;return t=Function.prototype.getName.caller.toString(),/function\s+([^\s\(]+)/i.test(t)?RegExp.$1:"anonymous "},Date.prototype.isSameDay=function(t){return this.getFullYear()===t.getFullYear()&&this.getMonth===t.getMonth&&this.getDate()===t.getDate()},Date.prototype.addDays=function(t){var e;return t&&(e=this.getTime(),e+=864e5*t,this.setTime(e)),this},Date.prototype.nextWeekDay=function(t){return this.addDays((t+7-this.getDay())%7)},Date.prototype.firstDayOfMonth=function(){return new Date(this.getFullYear(),this.getMonth(),1)},Date.prototype.lastDayOfMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,1).addDays(-1)},Date.prototype.monday=function(){return this.addDays(this.getDay()>0?1-this.getDay():-6)},Date.prototype.sunday=function(){return this.getDay()>0?this.addDays(7-this.getDay()):this},Date.prototype.nextMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,1)},Date.prototype.lastMonth=function(){return new Date(this.getFullYear(),this.getMonth()-1,1)},Number.prototype.toOrdinal=function(){var t,e,n;return t=this%100,n=["th","st","nd","rd","th"],e=21>t?4>t?n[t]:n[0]:t%10>4?n[0]:n[t%10],this+e},Number.prototype.toPaddedString=function(t,e){var n;return n=this.toString(e||10),"0".times(t-n.length)+n},Number.prototype.formatMoney=function(t,e,n,i){var r,o,a,s;return null==e&&(e=2),null==n&&(n="."),null==i&&(i=","),t=cf._curCode||"$",a=this,s=0>a?" -":"",r=parseInt(a=Math.abs(+a||0).toFixed(e))+"",o=(o=r.length)>3?o%3:0,t+s+(o?r.substr(0,o)+i:"")+r.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+i)+(e?n+Math.abs(a-r).toFixed(e).slice(2):"")},Array.prototype.findOrCreate=function(t,e){var n,i,r;for(i=0,r=this.length;r>i;i++)if(n=this[i],n[t]===e)return n;return n={},n[t]=e,this.push(n),n},Date.prototype.pattern=function(t){var e={"Y+":this.getFullYear(),"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},n={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+n[this.getDay()+""]));for(var i in e)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t},t.extend(Array.prototype,{clear:function(){return this.length=0,this},first:function(){return this[0]},last:function(){return this[this.length-1]},each:function(t,e){for(var n=this.length;n--;)t.call(e,n,this[n]);return this},has:function(t){for(var e=this.length;e--;)if(t==this[e])return!0;return!1},cross:function(t){for(var e=this.length;e--;)if(t.has(this[e]))return!0;return!1},collect:function(t,e){for(var n=[],i=0;i<this.length;i++)n.push(t.call(e,i,this[i]));return n},include:function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return!0;return!1},includeBy:function(t,e){for(var n=this.length;n--;)if(e==this[n][t])return!0;return!1},detect:function(t,e){for(var n=0;n<this.length;n++)if(this[n]==t)return e&&(this[n]=e),this[n];return null},del:function(t){for(var e=0;e<this.length;e++)if(this[e].id==t)return this.splice(e,1),this[e];return null},remove:function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return this.splice(e,1),t;return null},delBy:function(t,e){for(var n=0;n<this.length;n++)if((t.indexOf(".")>0?seqProp(this[n],t):this[n][t])==e)return this.splice(n,1),this[n];return null},detectBy:function(t,e){for(var n=0;n<this.length;n++)if((t.indexOf(".")>0?seqProp(this[n],t):this[n][t])==e)return this[n];return null},find:function(t){for(var e=0;e<this.length;e++)if(this[e].id&&this[e].id.toString()==t)return this[e];return null},findBy:function(t,e){for(var n=0;n<this.length;n++)if((t.indexOf(".")>0?seqProp(this[n],t):this[n][t])==e)return this[n];return null},findAllBy:function(t,e){for(var n=[],i=0;i<this.length;i++)(t.indexOf(".")>0?seqProp(this[i],t):this[i][t])==e&&n.push(this[i]);return n},replaceById:function(t){for(var e=0;e<this.length;e++)this[e].id==t.id&&(this[e]=t)},sortBy:function(t,e){return this.sort(function(n,i){return e?n[t]<i[t]?-1:1:n[t]>i[t]?-1:1}),this},pushById:function(t){this.detectBy("id",t.id)||this.push(t)},addUniq:function(t){this.has(t)||this.push(t)}}),Array.prototype.addOrUpdate=function(t,e){var n,i,r,o;for(null==e&&(e="id"),n=!1,r=0,o=this.length;o>r;r++)if(i=this[r],i[e]===t[e]){this[_i]=t,n=!0;break}return n?void 0:this.push(t)},Array.prototype.concatBy=function(t,e,n){var i,r,o,a;for(o=0,a=t.length;a>o;o++)r=t[o],i=this.findBy(e,r[e]),i?n&&n(i,r):this.push(r);return this},Array.prototype.recSet=function(t,n){var i,r,o,a;for(null==t&&(t="children"),a=[],r=0,o=this.length;o>r;r++)i=this[r],n(i),a.push(e.isArray(i[t])?i[t].recSet(t,n):void 0);return a},Array.prototype.recFind=function(t,n,i){var r,o,a,s;for(null==i&&(i="id"),o=0,a=this.length;a>o;o++){if(r=this[o],r[i]===n)return r;if(e.isArray(r[t])&&(s=r[t].recFind(t,n,i)))return s}return null}}).call(e,n(1),n(2))},function(t,e,n){(function(e,i){var r;r=n(10),t.exports=function(t,n,o){var a,s,l,u;return!this.ctn.hasClass(t)&&(this.ctn.attr("class","row "+util.atHash(1)).show(),s=n.split("-"),this.ctn.html(util.layout({side:"col-md-"+s[0],main:"col-md-"+s[1]})),o&&(l=o(),e.isObject(l)&&new r({toFetch:!1,className:"navbar-collapse collapse row",mode:"panel",data:l.data,parent:"#side",modelOpt:{tmpl:l.tmpl,tagName:"a",className:"list-group-item",callback:function(){return this.$el.attr("href",this.data.path)}},modeContext:function(){return{tagClass:"list-group",title:l.title,style:"panel panel-default"}},callback:function(){return i("[href*='"+util.atHash(3)+"']",this.ctn).addClass(app.active),this.ctn.on("click","a",util.setActive)}}),cf.mob?i(".navbar-header").prepend(cf.tp.mobBtn({icon:"th-list",target:"#side>div",cls:"pull-right icon"})):(u=i("#side"),a=i("#main"),u.find(".panel-title").prepend(util.icon("chevron-left pull-right btn btn-primary btn-xs closeSide")),u.on("click",".closeSide",function(t){return function(){var t;return u.hide(),n=a.attr("class"),a.attr("class","col-md-12"),t=i(util.icon("chevron-right btn btn-primary btn-xs openSide")),t.click(function(){return a.attr("class",n),u.show(),t.remove()}),i("#content").append(t)}}(this)))),cf.mob&&location.hash.split("/").length<3)?i("#header button.pull-right").trigger("click"):void 0}}).call(e,n(2),n(1))},function(t,e,n){(function(e,n){e.extend(t.exports,{topBar:"#topbar",buildMenu:function(){var t,e,i,r,o,a,s;for(o=function(){var t,e;t=this.mgm.menu,e=[];for(i in t)s=t[i],e.push({k:i,r:s});return e}.call(this).sortBy("r",!0),a=[],t=0,r=o.length;r>t;t++)e=o[t],a.push({l:iin(e.k),k:n.isString(e.r)&&e.r.indexOf(":")>-1?e.r.split(":")[1]:e.k
});return a},renderMenu:function(){var t;return this.mgm&&this.mgm.menu&&(t=this.buildMenu()),e("#topbar").remove(),e("#header").append(this.menuTmpl(e.extend({menus:t,navStyle:"navbar-right",ulStyle:"nav navbar-nav"},cf.tp.opt)))}})}).call(e,n(1),n(2))},function(t,e,n){(function(t){var e,i,r,o,a;n(31),n(30),n(29),e=n(17),i=null!=(o=e.community)?o.id:void 0,r=null!=(a=e.community)?a.code:void 0,t.extend(e,{style:{inputClass:"form-control",labelClass:"control-label",inputBox:"form-group",iconStr:"glyphicon",active:"active",btn:function(t,e,n,i){var r,o;return null==t&&(t="default"),r="btn",o="",t&&(o+=" "+r+"-"+t),e&&(o+=" "+r+"-"+e),n&&(o+=" "+r+"-block"),i&&(o+=" "+i),r+o},sign:{success:"ok",warning:"warning-sign",info:"info-sign",danger:"exclamation-sign"}},meta:{},model:{},view:{},collection:{},page:{_:{}},widget:{},i18n:{},popTime:2500,ss:"show",rsPre:"/r/",actPre:"/a/",root:e.mode?"/module/"+r+"/":"/",resPrefix:e.mode?"/module/"+r+"/":"/",resFolder:"upload/",rPath:e.mode?"/res/":"http://s."+e.dm+"/",_es:[],uSize:{img:{max:6291456,ext:["jpg","jpeg","png","gif"]},doc:{max:4096e3,ext:["doc","docx","ppt","pptx","txt","pdf","rtf"]},audio:{max:512e4,ext:["wmv","mp3","mid"]},video:{max:12288e3,ext:["swf","fla","mp4"]}}})}).call(e,n(1))},,,function(t,e,n){(function(t){var e;e=cf.meta,e.cat={code:{type:"text",id:"_code",ph:"请输入英文单词",valid:{"char":!0,required:!0}},pid:{label:"父分类",type:"select",entity:"category",keyVal:"code,label",title:" ",events:{change:function(e){return t("#_code").val(util.ct(e).val()+"_"+t("#_code").val())}}},type:{type:"text",valid:{required:!0}},_:{action:function(){return["edit","del"]},filter:{type:"text"},item:["code","title","row","type","content","pid","refFile"],tbItem:{code:{w:100,type:"text"},title:{type:"text"},type:{w:80,type:"text"},_opt:{type:"btns",w:180}}}}}).call(e,n(1))},function(t,e,n){(function(e,i){var r,o;o=n(59),r=n(24),e.extend(t.exports,{elem:function(t,e){var n;return n=t&&t[e]?t[e]:this.common[e],i.isFunction(n)?n():i.clone(n)},exCom:function(t,n){return e.extend({},this.common[t],n)},exItem:function(t,n){return e.extend({},t,n)},common:{pStr:{type:"hidden",value:function(){return user.pStr()}},userId:{type:"hidden",_name:"uid",isShow:function(){return!user.isAdmin()},value:function(t){return t.uid?void 0:user.id}},code:{type:"text",isShow:function(){return user.isRoot()},valid:{minlength:2,"char":!0,required:!0}},lang:{type:"hidden",value:function(){return cf.lang||"zh"}},label:{type:"text"},type:{type:"hidden"},cCode:{type:"hidden",_name:"code",value:function(){return cf.code}},token:{type:"hidden",value:function(){return app.wt.token}},isAccept:{type:"checkbox",data:[{label:"Enable",select:!0,val:!0}]},pubTime:{type:"text",xtype:r,isShow:function(){return user.isAdmin()}},cid:{type:"hidden",value:function(){return cf.cid}},pid:{type:"hidden",value:function(){return 0}},password:{type:"password",ph:"c.password",id:"rpsd",valid:{required:!0,minlength:3}},status:{type:"radio",isShow:function(){return user.isAdmin()},value:0,data:[{label:"初始化",val:0},{label:"未激活",val:1},{label:"可用",val:2},{label:"禁用",val:3}]},name:{type:"text",valid:{required:!0,minlength:2,maxlength:100}},startedDate:{id:"sTime",type:"text",xtype:r,attrs:{format:"yyyy-mm-dd hh:ii:ss",minuteStep:60,minView:1},value:function(){return(new Date).pattern("yyyy-MM-dd HH:mm:ss")}},endDate:{type:"text",id:"eTime",xtype:r,valid:{laterThan:"#sTime"},attrs:{format:"yyyy-mm-dd hh:ii:ss",minuteStep:60,minView:1}},phone:{type:"tel",ph:"c.phone",valid:{number:!0,maxlength:15,minlength:7}},wid:{type:"text"},address:{type:"text",valid:{required:!0,minlength:5,maxlength:100}},route:{type:"text",label:"线路"},fee:{type:"number",value:function(){return 30},valid:{number:!0,min:0,max:3e3}},username:{type:"text",ph:"c.username",valid:{required:!0,minlength:2,maxlength:20}},email:{type:"email",ph:"c.email",valid:{required:!0,email:!0}},row:{type:"number",value:1,isShow:function(){return user.isAdmin()},valid:{number:!0,min:0,max:1e7}},link:{type:"text",isShow:function(){return user.isAdmin()},valid:{url:!0}},url:{type:"text",valid:{url:!0}},introduction:{type:"textarea",rows:4,valid:{required:!0}},memo:{type:"textarea",rows:4},description:{type:"textarea",rows:4,valid:{required:!0}},title:{ph:"c.title",type:"text",valid:{required:!0,minlength:2,maxlength:100}},subTitle:{ph:"c.subTitle",type:"text"},dateCreated:{type:"date",valid:{required:!0}},brief:{type:"textarea",ph:"自动截取正文的前200个字",rows:3,size:200},tags:{type:"text"},content:{type:"textarea",xtype:o,attrs:{rows:16,type:"normal"}},channel:{type:"select",data:function(){return cf.opt.entity.headRefChannel}},remind:{type:"checkbox",noLabel:!0,attrs:{data:["邮件提醒"]}},sWeibo:{type:"checkbox",noLabel:!0,val:!1,callback:function(){return snc.sina.login()},attrs:{data:{label:"同步到新浪微博",val:!0}}},sQQ:{type:"checkbox",noLabel:!0,attrs:{data:["同步到腾讯微博"]}},auth:{type:"hidden",value:function(){return"true"}},_:{}},_:{action:function(){return["genPage","edit","del","lock","pub"]},fmBtn:{prev:function(){return{cls:cf.style.btn(null,"lg",null)}},next:function(){return{cls:cf.style.btn("primary","lg",null)}},back:function(){return{cls:cf.style.btn(null,"lg",null)}},save:function(){return{cls:cf.style.btn("primary","lg",null)}},finish:function(){return{cls:cf.style.btn("primary","lg",null)}},closeDlg:function(){return{cls:cf.style.btn("info","lg",null)}}},event:{sKey:{type:"keyup",tag:":input",fun:function(t){return 13===t.keyCode?this.save():void 0}},lock:{type:"click",fun:function(t){return e.ajax({type:"get",url:util.actUrl(this.entity,"lock",util.getTargetId(t)),data:{entity:this.entity,page:"forb.html",lang:cf.lang,msg:"内容正在审核中，请耐心等待"},dataType:"json",success:function(n){return function(){return e(t.target).attr("class","pub icon-ok")}}(this)}),t.stopPropagation()}},pub:{type:"click",fun:function(t){return e.ajax({type:"get",url:util.actUrl(this.entity,"pub",util.getTargetId(t)),data:{entity:this.entity,lang:cf.lang},dataType:"json",success:function(n){return function(n){return e(t.target).attr("class","lock icon-lock")}}(this)}),t.stopPropagation()}},shareIt:{type:"click",fun:function(t){var n,i,r;return i=e(t.currentTarget),r=i.parent().siblings().eq(0),n=function(){return snc.sina.sendWidget({default_text:r.text()+":"+r.children().attr("href"),default_image:util.resPath(i.attr("head")),button_text:"发布到微博"})},WB2.checkLogin()?n():WB2.login(function(){return n()})}},genPage:{type:"click",fun:function(t){var n;return n=util.getTargetId(t),e.ajax({type:"post",data:{pages:this.entity+"-"+n},url:util.actUrl("home","genTmplPage",n),dataType:"json"}),t.stopPropagation()}},del:{type:"click",fun:function(t){var e;return t.stopPropagation(),log("zxcvxvzxcvzzz"),confirm(ii("m.sure"))?(log("zcvxcvcvxcv"),e=this.findData(t),e?e.destroy({wait:!0}):log("no model find")):void 0}}},btn:{lock:function(t,e){return user.isAdmin()&&t.status>1&&3!==t.status?util.iBtn("lock","lock"):void 0},pub:function(t,e){return user.isAdmin()&&t.status>1&&2!==t.status?util.iBtn("check","pub"):void 0},genPage:function(t,e){return t&&2===t.status?util.iBtn("refresh","genPage"):void 0},shareIt:function(t,e){return util.iBtn("share","share")},del:function(t,e){return util.iBtn("trash","del")},formDel:function(t,e){return util.iBtn("trash","formDel")},listDel:function(t,e){return util.iBtn("trash","listDel")},popEdit:function(t,e){return util.iBtn("edit","popEdit")},inlineEdit:function(t,e){return util.iBtn("edit","inlineEdit")},inlineAdd:function(){return util.tBtn("add",null,"plus","popAdd btn btn-primary btn-sm")},popAdd:function(){return util.tBtn("add",null,"plus","popAdd btn btn-primary btn-sm")},topAdd:function(t,e){var n;return n=util.tBtn("add",null,"plus","btn btn-primary btn-sm"),n.href=util.navUrl("data/add",e),n},exExcel:function(t,e){var i;return n.e(4,function(){[!function(){var t=new Error('Cannot find module "."');throw t.code="MODULE_NOT_FOUND",t}()]}),i=util.tBtn("export",null,"floppy-save","btn btn-primary btn-sm"),i.attr={onclick:"return ExcellentExport.excel(this, '"+e+"Tb', '"+e+" excel file')",download:e+"_"+(new Date).getTime()+".xls"},i},exCsv:function(t,e){var i;return n.e(3,function(){[!function(){var t=new Error('Cannot find module "."');throw t.code="MODULE_NOT_FOUND",t}()]}),i=util.tBtn("export",null,"floppy-save","btn btn-primary btn-sm"),i.attr={onclick:"return ExcellentExport.csv(this, '"+e+"Tb')",download:e+"_"+(new Date).getTime()+".csv"},i},edit:function(t,e){return util.iBtn("edit",null,util.navUrl("data/edit",e,t[cf._idn]))},view:function(t,e){return util.iBtn("list-alt",null,util.navUrl("data/view",e,t[cf._idn]))}},tbItem:{title:{w:200,type:"view"},dateCreated:{type:"date"},_opt:{w:180,type:"btns"}}}})}).call(e,n(1),n(2))},function(t,e,n){var i;i=cf.meta,i.content={code:{type:"text",valid:{required:!0}},_:{item:["title","content","row","category","uid","cid","refFile"],action:i._.action}}},function(t,e,n){(function(t,e){var i;i=n(21),t.extend(cf.meta._.event,{inlineEdit:{type:"click",fun:function(t){var n;return e(this.parent).children("form").remove(),n=e.extend({entity:this.entity,parent:this.parent,cleanAll:!1,rCollection:this.collection,data:this.collection.get(util.getTargetId(t)).attributes,toFetch:!1},this.fmOpt),new i(n),t.stopPropagation()}},inlineAdd:{type:"click",fun:function(t){var n;return e(this.parent).children("form").remove(),n=e.extend({entity:this.entity,parent:this.parent,cleanAll:!1,rCollection:this.collection,toFetch:!1},this.fmOpt),new i(n),t.stopPropagation()}},popEdit:{type:"click",fun:function(n){var r,o,a;return o=this.findData(n),r=t.result(this,"formEditOpt"),a={entity:this.entity,mode:"modal",toFetch:!1,rCollection:this.collection},r&&r.toFetch?(a.toFetch=!0,a.listenTime="listenToOnce",a.data={id:id}):a.model=o,new i(e.extend(a,r)),n.stopPropagation()}},popAdd:{type:"click",fun:function(n){var r,o;return this.metaOpt&&this.metaOpt.initData&&(r=this.metaOpt.initData.call(this)),o=e.extend({entity:this.entity,toFetch:!1,mode:"modal",rCollection:this.collection,listenTime:"listenToOnce",data:r},t.result(this,"formAddOpt")),new i(o),n.stopPropagation()}},formDel:{type:"click",fun:function(t){var e,n;if(user.entityAuth(this.entity,"del")&&(t.stopPropagation(),confirm(ii("m.sure"))))return n=this.findData(t),n?(this.collection.remove(n),n.view.remove(),"function"==typeof(e=n.view).afterRemove?e.afterRemove():void 0):void 0}},listDel:{type:"click",fun:function(t){var e;return t.stopPropagation(),confirm(ii("m.sure"))?(e=this.collection.at(util.ct(t).closest("tr").index()),e.view.remove(),this.collection.remove(e),this.fData.set(this.entity,JSON.stringify(this.collection.toJSON())),this.fData.save()):void 0}}})}).call(e,n(2),n(1))},function(t,e,n){(function(e){var i,r,o,a;r=n(13),i=n(8),a=n(20),o=r.extend({key:"id",label:"username",hiddenValue:!0,setData:function(t){return this.data=t&&t.user?t.user:{}},showBox:function(t){var e,n,i;i=util.ct(t).val(),i&&(this.panel.show(),e=this.collection.collection,n=a.email(i)?a.telephone(i)?{username:{$regex:"^"+i}}:{phone:i}:{email:i},e.setCriteria(n),e.resetFetch(),e._pagination=!1)},panelOpt:{entity:"user",criteriaOpt:{_attrs:"id,username,status,email"},noStr:"Search User by username or Email"}}),e.extend(cf.meta.common,{uid:{isShow:function(){return user.isAdmin()},type:"text",label:iic("author"),xtype:o,bind:!0}}),t.exports=o}).call(e,n(1))},function(t,e,n){(function(t){var e,i,r;e=n(22),r=n(27),n(18),i=cf.meta,i.headItem={showPic:{type:"holder",xtype:r,attrs:{refClass:"head",multi:!1,func:"top"}},cls:{type:"text"},href:{id:"r-href",type:"text"},ref:t.extend(!0,{},i.common.ref,{attrs:{clickShow:!0,setAttrs:"title,subTitle",afterPick:function(t){return this.form.setVal("#r-href",util.pageUrl(t))}}}),_:{item:["refClass","ref","title","subTitle","href","cls","showPic"],tbItem:{title:{},subTitle:{},href:{},_opt:{type:"btns",w:120}},action:function(){return["edit","del"]}}},i.head={type:{type:"text"},list:{xtype:e,attrs:{entity:"headItem",toFetch:!1,_func:null,_prop:"list",_dv:[],callback:function(){}}},_:{tbItem:{type:{},lastUpdated:{type:"date"},_opt:{type:"btns",w:120}},item:["type","list"],action:function(){return["edit","del"]}}}}).call(e,n(1))},function(t,e,n){(function(t){var e;e=cf.meta,e.link={url:t.extend({label:"图片地址"},e.common.url),link:t.extend({valid:{required:!0,url:!0}},e.common.url),_:{item:["url","title","link","category","description","cid"],action:function(){return["edit","del"]}}}}).call(e,n(1))},function(t,e,n){var i,r,o;i=n(6),o=n(41),o.prototype.afterPick=function(t){return this.form.model.set("uid",t._id),this.form.model.set("username",t.username)},o.prototype.panelOpt.modelOpt={setContent:function(){var t;return t=this.data,this.$el.append("<span style='width: 100px;display: inline-block'>"+t.username+"</span> "+t.email)}},r=cf.meta,r.membership={rid:{type:"hidden"},description:{type:"textarea",rows:6},_:{tbItem:{username:{w:120,type:"text"},role:{w:120,type:"text"},row:{w:100,type:"text"},isAccept:{w:100},description:{type:"text"},_opt:{type:"btns",w:100}},item:["uid","row","description","rid","isAccept"],event:{popAdd:{type:"click",fun:function(t){return new i({mode:"modal",entity:this.entity,rCollection:this.collection,btns:["save"],toFetch:!1,data:{rid:this.roleId,role:this.roleTitle}}),t.stopPropagation()}},popEdit:{type:"click",fun:function(t){var e;return e=this.findData(t),new i({mode:"modal",entity:"membership",rCollection:this.collection,toFetch:!1,model:e,btns:["save"]}),t.stopPropagation()}}},action:function(){return["popEdit","del"]},btn:{user:function(t,e){return util.tBtn("edit",util.navUrl(e,"edit",t.rid,t.id),"edit")}}}}},function(t,e,n){var i;i=cf.meta,i.post={source:{type:"text",isShow:function(){return user.isAdmin()}},_:{action:i._.action,filter:{category:"select"},item:["title","subTitle","uid","userId","source","link","pubTime","category","tags","row","brief","content","status","refFile"],tbItem:{title:{type:"view"},dateCreated:{w:155,type:"date"},row:{w:60,type:"text"},category:{w:100,type:"text"},_opt:{type:"btns",w:250}}}}},function(t,e,n){var i,r,o;r=n(13),o=n(16),i=cf.meta,i.role={label:i.exCom("label",{valid:{required:!0}}),description:{type:"textarea"},_:{event:{showInTd:{type:"click",fun:o}},tbItem:{title:{w:100},label:{w:100},type:{w:100,val:function(t){return t.type?"自定义":"系统"}},description:{},_opt:{w:175,type:"btns"}},item:["title","label","description","cid","lang"],btn:{res:function(t,e){return util.iBtn("leaf",null,util.navUrl("userRole","res",t.id))},popEdit:function(t,e){return["admin","user","guest"].has(t.title)?void 0:util.iBtn("pencil","edit")},del:function(t,e){return["admin","user","guest"].has(t.title)?void 0:util.iBtn("trash","del")},showInTd:function(t){return"guest"!==t.title?util.iBtn("user","showInTd"):void 0}},action:function(){return["popEdit","res","del","showInTd"]}}},i.res={label:{type:"text",valid:{required:!0}},type:{type:"select",data:{file:"File","folder-close":"Folder"}},title:{type:"text",label:"提示信息"},target:{type:"select",label:"打开方式",data:{_self:"本地窗口",_blank:"新建窗口"}},className:{type:"text"},href:{type:"text",xtype:r,bind:!0,attrs:{setPanel:function(){return this.collection=new cf.widget.selectItem({toFetch:!1,parent:this.panel,enhanceContent:function(){var t,e,n,i,r;for(t={},r=[" ","file"].concat(cf.opt.entity.categories),e=0,i=r.length;i>e;e++)n=r[e],t[n]=iin(n);return this.head.append(util.genInput({type:"select",data:t}))}})},setVal:function(){var t;return this.data&&(t=this.data["class"]?util.uri(this.data["class"].toLowerCase(),this.data):"/"+this.data.title),this.target.val(t)}}},_:{item:["type","label","title","target","href"]}}},function(t,e,n){(function(t){var e,i,r;e=n(6),r=n(5),i=cf.meta,t.extend(i,{thumb:{width:{type:"text",title:"Max Width",valid:{number:!0,min:10,max:1500}},height:{type:"text",title:"Max Height",valid:{number:!0,min:10,max:1500}},items:["width","height","code","_path_"]},xFile:{func:{type:"select",attrs:{data:["head","img"]}},pubTime:{type:"text",xtype:n(24),isShow:function(){return user.isAdmin()},attrs:{format:"yyyy-mm-dd HH:ii:ss",minuteStep:60},valid:{required:!0,dateTime:!0}},description:{type:"textarea",attrs:{rows:6}},_:{item:["title","pubTime","description","row"],filter:["func"],event:{popEdit:{type:"click",fun:function(t){var n,i;return i=this,n=util.getTargetId(t).split(".")[0],new e({title:ii("c.edit",ii("nav.file")),data:i._getObj(n,{}),entity:"xFile",btns:["save"],toFetch:!1,mode:"modal",className:"form-break",_save:function(){return this.closeDlg(),i._setObj(this.model.attributes,n)}}),t.stopPropagation()}},pickIt:{type:"click",fun:function(t){var e;return log("pickIt"),e={id:util.getTargetId(t),type:this.type,func:this.func},this.p.ctn.append(this.p.addItem.call(this.p,e)),this.p._addArrayItem(e)}},crop:{type:"click",fun:function(e){var n,i;return n=_models["_"+this.func+"Crop"],n?(i=t(e.currentTarget).parent().prev().attr("src"),i.indexOf("_thumb")>0&&(i=i.replace("/_thumb","")),i.indexOf("?")>0&&(i=i.substring(0,i.indexOf("?"))),n.path=i,n.pid=mlu.getTargetId(e),n.renderTo=t(e.currentTarget).parent().prev(),new mllv.crop(n).dlg()):void 0}},thumb:{type:"click",fun:function(n){return new e({mode:"modal",title:"Thumb Picture",entity:"thumb",action:util.actUrl("upload","thumb")}),t("#thumbForm").find("input[name=path]").val(util.getTargetId(n))}},zoom:{type:"click",fun:function(e){var n,i;return n=t(e.currentTarget).parent().prev(),i=n.attr("src").replace("/_thumb",""),new r({mode:"modal",className:"text-center",setContent:function(){return this.$(".modal-footer,.modal-header").remove(),this.$(".modal-dialog").html("<img src='"+i+"' title='"+n.attr("title")+"'>")}}).render()}},del:{type:"click",fun:function(e){var n,i,r,o;return o=this,n=util.getTargetId(e),r=util.ct(e),confirm(ii("m.sure",[iic("del")]))?(i={id:n,thumb:this.upOpt.thumb},confirm(ii("m.delRealFile"))?t.post(util.actUrl("upload","remove"),i,function(t){return r.closest(".media").remove(),o._delArrayItem(n),t.folder?o.data.del(t.id):void 0}).fail(function(){return o._delArrayItem(n)}):(r.closest(".media").remove(),o._delArrayItem(n))):void 0}}},btn:{crop:function(){return util.iBtn("screenshot","crop")},thumb:function(){return util.iBtn("fullscreen","thumb")},zoom:function(){return util.iBtn("search","zoom")},insertToPage:function(){return util.iBtn("import","insertToPage")},insertToHead:function(){return util.iBtn("edit","insert")}}}}})}).call(e,n(1))},function(t,e,n){(function(e,i){var r;r=n(9),t.exports=e.Collection.extend({criteria:{offset:0,max:10},count:0,initialize:function(t,e){return e&&i.extend(this,e),t&&(this.count=t.length),this.entity||(this.entity="common"),this.meta=cf.meta[this.entity],this.model=this.getEntityType(this.entityOpt),this.afterAjax&&this.listenTo(this,"sync",this.afterAjax),"function"==typeof this.init&&this.init(),this},getEntityType:function(t){var e;return null==t&&(t={}),e=i.extend({entity:this.entity,_col:!0},t),this.entityType?this.entityType.extend(e):r.extend(e)},addByData:function(t){var e;return e=this.getEntityType(this.entityOpt),this.add(new e(t))},url:function(){return this.entityOpt?this.entityOpt.urlRoot:util.restUrl(this.entity)},setCC:function(){return this.criteria._attrs=""},parse:function(t){var e,n,i,r,o;if(this._res=t,this.data=t.entities||t,this.meta&&this.meta._)for(o=this.data,n=i=0,r=o.length;r>i;n=++i)e=o[n],this.meta._.handleData&&(this.data[n]=this.meta._.handleData(e));return this.view&&(this.view.data=this.data),null!==t.count&&(this.count=t.count),this.data},setCriteria:function(t){return i.extend(this.criteria.q||(this.criteria.q={}),t)},resetCriteria:function(){return log("reset criteria")},resetFetch:function(t,e){switch(null==t&&(t="one"),null==e&&(e=0),t){case"next":this.criteria.offset+=this.criteria.max;break;case"prev":this.criteria.offset-=this.criteria.max;break;case"one":this.criteria.offset=e*this.criteria.max;break;case"max":this.criteria.max=e}return this.fetch({data:this.criteria,reset:!0})}})}).call(e,n(4),n(1))},function(t,e,n){(function(e,i){var r;r=n(9),n(19),t.exports=r.extend({entity:"user",username:null,email:null,profile:null,pStr:function(){return"username,email,roles#"+cf.cid+"__"+cf.lang},updateAuthTime:function(){return localStorage?localStorage.setItem("lc",(new Date).getTime()):void 0},storeAuth:function(t){return localStorage?(localStorage.setItem("lc",(new Date).getTime()),localStorage.setItem("lur",t)):void 0},removeData:function(){return localStorage?(localStorage.removeItem("lc"),localStorage.removeItem("lur"),localStorage.removeItem("woid")):void 0},wtUserInfo:function(t){var e;return e=location.hash.substring(3).replace("/","azbzc"),location.href=app.wt.userInfoUrl(t,cf.index+"::"+e)},aTokenCheck:function(){return app.aToken?void 0:this.wtUserInfo(!0)},offlineCheck:function(){var t,n;if(localStorage&&(n=localStorage.getItem("lc"),t=localStorage.getItem("lur"),n&&t&&(new Date).getTime()-n<12e5))return this.auth(e.parseJSON(t)),void(app.afterAuth&&app.start());if(util.isWechat())if(app.woid){if(app.wtAutoLogin)return void this.loginByWoid(app.woid)}else this.wtUserInfo(!app.wtAutoLogin);return this.logout()},entityAuth:function(t,e){var n;return this.mgm&&this.mgm.entity&&this.mgm.entity[t]?(n=this.mgm.entity[t],i.isNumber(n)||n&&n.indexOf(e)>-1||"x"===n?!0:!1):!0},pageAuth:function(t){var e;return null==t&&(t=cf.index),this.permission&&this.permission[t]?(e=!this.permission[t],e.indexOf(t)>-1?!0:!1):!0},check:function(){return this.isLogin()},auth:function(t){this.storeAuth(JSON.stringify(t)),this.set(t),this.id=t._id,this.username=t.username,this.email=t.email,this.roles=t.roles,this.orgs=t.orgs,this.roleMap=t.roleMap,this.orgMap=t.orgMap,this.mgm=t.mgm,this.menu=t.menu,this.check()?("function"==typeof this.afterLogin&&this.afterLogin(),"function"==typeof this._afterLogin&&this._afterLogin()):"function"==typeof this.failLogin&&this.failLogin(),app.woid&&e(".dropdown-menu").append('<li><a onclick="user.logoutByWoid()">解除绑定</a></li>')},isWechatConnect:function(){return!1},logoutByWoid:function(){return e.post(util.actUrl(cf.auth||"auth","logoutByWoid"),{uid:user.id},function(){return user.removeData(),"function"==typeof user.afterLogout&&user.afterLogout(),user.clear()})},loginByWoid:function(t){return e.ajax({type:"post",url:util.actUrl("auth","loginByWoid"),data:{woid:t,console:!1,code:cf.code,lang:cf.lang,pStr:this.pStr(),_auth:!0},success:function(t){return user.login(t.user)},error:function(){return"function"==typeof user.afterLogout?user.afterLogout():void 0}})},login:function(t){return this.storeAuth(JSON.stringify(t)),user.reAuth?(e("#main form .alert-error").remove(),e("#main form .form-actions a").show()):this.auth(t),app.afterAuth&&app.start(),this},isLogin:function(){return this.id},is3rdLogin:function(){return this.agent},failLogin:function(){return popMsg("m.login_d","warning"),this.logout()},logout:function(){return app.afterAuth&&app.start(),this._logoutMark=!0,user.sina&&snc.sina.logout(),this.isLogin()?e.post(util.actUrl(cf.auth||"auth","logout"),null,function(){return"function"==typeof user.afterLogout&&user.afterLogout(),user.removeData(),user.clear()}):"function"==typeof user.afterLogout&&user.afterLogout(),user.removeData()},isPermit:function(t){return this.isAdmin()||this.permission&&this.permission.include(t)},isNav:function(t,e){var n,i,r,o,a,s,l,u,c,d,h,f;if(this.isAdmin())return!0;for(d=this.channel,r=0,s=d.length;s>r;r++)if(n=d[r],n.href==="#!"+location.href.split("#!")[1])return!0;for(h=this.menu,o=0,l=h.length;l>o;o++)if(c=h[o],c.entity===t&&c.action===e)return!0;for(f=this.footer,a=0,u=f.length;u>a;a++)if(i=f[a],i.href==="#!"+location.href.split("#!")[1])return!0;return!1},hasRole:function(t){var e,n,i,r;if(this.roles)for(r=this.roles,e=0,i=r.length;i>e;e++)if(n=r[e],t.indexOf(n.title)>-1)return!0;return!1},isRoot:function(){return 1===this.id},isAdmin:function(){return this.isRoot()||this.hasRole("admin")},qrId:function(){return 3e4+this.id},isEnroll:function(){return!1}})}).call(e,n(1),n(2))},function(module,exports,__webpack_require__){(function(Backbone,$){module.exports=Backbone.Router.extend({parent:"body",curView:null,active:"active",regions:{},blockBox:null,blockLine:null,blockMsg:"Please wait...",constructor:function(t){return $.extend(this,t),$.extend(this,util.parseUrl()),this._bindRoutes(),window.app=this,"function"==typeof this.initialize?this.initialize(arguments):void 0},initialize:function(t){return"function"==typeof this.init&&this.init(),this.start()},init:function(){return this.ctn=$("#content"),this.sta=$("#static")},before:function(){return this.sta.length&&(0===location.hash.length?(this.ctn.hide(),this.sta.show()):(this.ctn.toggleClass(util.atHash(1)).show(),this.sta.hide())),!0},after:function(){return util.sTop(null,0,500),cf._dImg.length?util.loadPic():void 0},context:function(){return cf.community||{}},layout:function(){return $(this.parent).append(this.tmpl(this.context()))},addRegion:function(t,e){return this.regions[t]=e},render:function(){var t,e,n;this.layout(),e=this.regions;for(t in e)n=e[t],(!n.isShow||n.isShow())&&n.render();return this.rendered=!0},execute:function(t,e){return t?("function"==typeof this.before&&this.before(),t.apply(this,e),"function"==typeof this.after?this.after():void 0):void 0},def:function(){return this.navigate("",{trigger:!0})},started:function(){return Backbone.History.started},clean:function(){return $(app.parent).empty(),app.rendered=!1},start:function(t){return log("app start"),Backbone.History.started?void 0:(this.render(),"function"==typeof this.callback&&this.callback(),this.initAjax(),Backbone.history.start(),this.dfPath&&app.navigate(this.dfPath,{trigger:!0}),this)},sTop:function(){return u.sTop(location.hash,0,1e3)},noView:function(){},waiting:function(){return $("#waiting").fadeIn(100)},ajaxOk:function(e,xhr,settings){var m,result;return log(arguments),"{"===xhr.responseText.charAt(0)?(result=JSON.parse(xhr.responseText),log(result),result.action&&eval(result.action),result.msg&&!cf.noReply&&(log(result.msg),m=result.msg.startsWith("m.")?ii(result.msg,result.p):result.msg,log(m),popMsg(m,"success")),cf.noReply=!1):void 0},ajaxErr:function(e,xhr,settings){var result,sign;return this.ajaxStop&&this.ajaxStop(),result=$.parseJSON(xhr.responseText),sign=xhr.status<300?"success":xhr.status>=300&&xhr.status<500?"warning":"danger",result.action&&eval(result.action),result.msg&&!cf.noReply&&popMsg(result.msg,sign),cf.noReply=!1},ajaxStart:function(){return this.blockBox&&this.blockDiv(),this.blockLine?this.blockBtn():void 0},ajaxStop:function(){return this.ajaxStop?this.ajaxStop():void 0},initAjax:function(){return $(document).ajaxStart(this.ajaxStart).ajaxStop(this.ajaxStop).ajaxSuccess(this.ajaxOk).ajaxError(this.ajaxErr)},blockBtn:function(){return this.blockLine.hasClass("glyphicon")&&(this.blockClass=this.blockLine.attr("class"),this.blockLine.removeAttr("class")),this.blockText=this.blockLine.text(),this.blockLine.addClass("disabled"),this.blockLine.html("<span class='ajax-loader'>"+iic("loading")+"...</span>"),this.ajaxStop=this.blockBtnStop},blockBtnStop:function(){return this.blockLine.removeClass("disabled"),this.blockLine.html(this.blockText),this.blockClass&&this.blockLine.attr("class",this.blockClass),this.blockClass=this.lockText=this.blockLine=this.ajaxStop=null}})}).call(exports,__webpack_require__(4),__webpack_require__(1))},function(t,e,n){t.exports={table:n(78),modal:n(73),formItem:n(71),pagination:n(74),panel:n(75),alert:n(69),searchBox:n(76),tab:n(77),btnGroup:n(70),mobBtn:n(72),opt:{f:n(52),i18:util.i18n}}},function(t,e,n){(function(e){var n;n={},e.extend(n,{userLink:function(){},navUrl:util.navUrl,tmpl:function(t,e){return log("zzxcvxcv"),log(cf),window.cf.tp[t](e)},icon:function(t,e,n,i){return null==e&&(e="i"),null==n&&(n=""),null==i&&(i=""),"<"+e+" class='glyphicon glyphicon-"+t+" "+i+"'>"+n+"</"+e+">"},imgItem:function(t,e,i){var r;return null==i&&(i="head"),r=t.refFile&&t.refFile[i]?t.refFile[i][0]:"",n.img(n.resPath(e,r))},img:function(t,e,n){var i;return null==e&&(e="markImg"),null==n&&(n=!1),i=String.randomChar(4),'<div id="'+i+'" class="'+e+'" src="'+t+'" pop="'+n+'"\nstyle="background:url('+_resPath+'img/loading-bk.gif) no-repeat 50% 50%">loading...</div>'},link:function(t,e,n,i){var r;return null==n&&(n="title"),r="_str"===n?e:e[n],"<a href='/"+t+"/"+e._id+"' title='"+r+"' class='"+(i||"")+"'>"+r+"</a>"},href:function(t,e){return"/"+t+"/"+e},resPath:function(t,e){return _resPath+"upload/"+t+"/"+e},navPage:function(t,e){return"/sight/"+e._id},crumbItem:function(t){return[{label:"首页",href:"/"}].concat(t)},copyRight:function(t,e,n){var i;return i="http://"+t.url+"/"+e+"/"+n,'<div class="copyright"><strong>C</strong><div>\n    <p>除非特别声明，本站文章均为'+t.title+'原创文章，转载请注明原文链接</p>\n    <p>原文地址：<a href="'+i+'">'+i+"</a></p>\n</div></div>"}}),t.exports=n}).call(e,n(2))},function(t,e,n){(function(e){var i,r;r=n(50),i=n(26),t.exports=r.extend({checkAuth:!0,wtAutoLogin:!1,initialize:function(t){return localStorage&&(this.woid?localStorage.setItem("woid",this.woid):this.woid=localStorage.getItem("woid")),"function"==typeof this.init&&this.init(),window.user&&this.checkAuth?window.user.offlineCheck():this.start()},login:function(t){return null==t&&(t=this.ctn),new i.loginForm({noLabel:!1,parent:t,cleanAll:!1,asterisk:!1})},account:function(){return new i.changePsdForm({mode:"modal"})},setting:function(){return new i.settingForm({title:iic("cfg"),mode:"modal",entity:"user",items:["username"],btns:["save"]})},reLogin:function(){return user.reAuth=!0,new i.loginForm({id:"rLogin",noLabel:!1,mode:"modal",data:function(){return{username:user.username}},shown:function(t,n){return this.$el.find(".save").addClass("btn btn-primary fl"),e(n).find("form input[name=username]").val(user.username).attr("readonly","readonly"),e(n).find("form input[name=psd]").select()}})}})}).call(e,n(1))},,,function(t,e,n){(function(e){var i;i=n(11),t.exports=i.extend({style:"panel-success",toFetch:!1,dMode:!1,_pagination:!0,btns:["popAdd"],init:function(){return this.dMode?(this.btns=null,this.collection.meta._.action=null):(this.btns=["popAdd"],this.itemBtns=["popEdit","listDel"]),this.callback?this.listenTo(this.collection,"all",this.callback):void 0},_save:function(){var t;return t=this.rCollection,t.add(this.model),t.view._beforeSave&&t.view._beforeSave.call(this),this.fData.set("_attrs","id,version"),this.fData.save(),this.$el.modal("hide")},formEditOpt:function(){return{pView:this,toFetch:!1,fData:this.fData,_save:this._save}},formAddOpt:function(){return{pView:this,fData:this.fData,_save:this._save}},data:function(){var t;return this.form&&!this.fData&&(this.fData=this.form.model),t=this.fData.get(this.entity),e.isArray(t)?t:[]}})}).call(e,n(2))},function(t,e,n){(function(e,i){var r,o,a;a=n(7),o=n(12),r=function(t,n,i,r,a){var s,l;switch(l=i.val?i.val(t):util.seqProp(t,n),i.type){case"ckb":return'<input class=\'ckb\' type="checkbox" id="ckb-'+t.id+'">';case"radio":return'<input class=\'rad\' type="radio" name="'+i.name+'">';case"img":return'<img src="'+l+"\" width='"+i.width+"'>";case"email":return'<a href="mailto:'+t[i.type]+'">'+l+"</a>";case"edit":return n="data/"+i.type,'<a href="'+util.navUrl(n,r,t.id)+'">'+l+"</a>";case"view":return'<a href="'+r+"/"+t._id+"?_c=1\" target='_blank'>"+l+"</a>";case"link":return'<a href="'+i.href+'" class="'+i.cls+'">'+l+"</a>";case"status":return s=cf.st[r+"_"+n+"_hash"],s?s[l]:l;case"input":return i.opt.val=l,o(i.opt);case"money":if(l)return(+l||0).formatMoney(2);break;case"map":return i.__map||(i.__map=e.result(cf.meta.elem(cf.meta[r],n),"data")),i.__map[l];case"date":return util.prettyDate(l,i.pt,i.tr);case"show":case"modify":return cf._link(null,l,null,"show",this.entity+"-"+t.id);default:return a[n]&&a[n].showText?a[n].showText(l,a[n]):i.converter?i.converter(l,t):l}},t.exports=a.extend({cleanAll:!1,tagName:"tr",itemTag:"td",setContent:function(){var t,e,n,o,a;if(this.data=t=this.model.attributes,this.$el.attr("data-id",this.model.id),!t)return this;n=this.collection.cols();for(e in n)a=n[e],
"hide"!==a.type&&(o=i("<"+this.itemTag+"/>"),"ckb"===a.type&&o.addClass("text-center"),o.append(r(t,e,a,this.entity,this.meta)),a.xtype&&(a.opt.parent=o,a.xtype.fun?a.xtype.fun(a.opt):new a.xtype(a.opt)),a.cls&&o.addClass(a.cls),"btns"===a.type&&o.addClass("btnCtn"),a.handle&&a.handle(t,o),this.$el.append(o));return"function"==typeof this.decorate?this.decorate():void 0}})}).call(e,n(2),n(1))},function(t,e,n){(function(e,i){var r;r=n(5),cf.meta.editor={xtype:{type:"select",attrs:{data:["type","value","cols","attrs","noLabel"]}},type:{type:"select",attrs:{data:function(){return[]}}}},t.exports=r.extend({init:function(){return this.obj?this.form.model.get(this.name)||this.setObj():this.obj=this.val&&e.isString(this.val)?JSON.parse(this.val):this.val||{},this.render()},addable:!0,deleteable:!0,tagName:"form",className:"form-horizontal",initVal:"new value",hasDelBtn:!0,tab:!1,editor:{_key:{type:"label",cls:"_k"},_val:{type:"text",cls:"_v",valid:{min:1,max:1e4}}},events:{"change ._k":"keyChange","change ._v":"valChange","change select":"sChange","click .add":"add","click .del":"del","click .addArrayItem":"addArrayItemEvent","click .delArrayItem":"delArrayItem"},setObj:function(){var t;return t=JSON.stringify(this.obj),i(this.iid).text(t),this.form.model.set(this.name,t)},del:function(t){var e;return confirm(ii("m.sure"))?(e=i(t.currentTarget),util.delSeqProp(this.obj,e.attr("key")),this.setObj(),e.parent().remove()):void 0},getCtnTag:function(t){var e;return e=i('<div class="pEditorElem form-group"/>'),t&&e.data(t),e},add:function(t){var e,n,i,r;if(r=util.ct(t),n=r.attr("key"),this.prompt||!n){if(e=this.getKeyVal(),!e)return}else e="";return i=this.getCtnTag({op:"new"}),n?(r.parents(".object").children(".subObj").append(i),n=n+"."+e):(r.before(i),n=e),i.append(this.keyEditor(e)),i.append(this.valEditor(this.initVal,n)),this.deleteable&&i.append(this.delBtn(n)),this.prompt?(util.setSeqProp(this.obj,n,this.initVal),this.setObj()):void 0},delBtn:function(t){return this.hasDelBtn?'<i key="'+(t||"")+'" class="'+util.iClass("trash")+' btn del"/>':void 0},addBtn:function(t){var e,n,i;return e='<a key="'+(t||"")+"\" class='btn btn-default add'><i class=\""+util.iClass("plus")+'"/></a>',this.addOpt&&(n=function(){var t,e,n,r;for(n=this.addOpt,r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push("<a type='"+i.type+"' class='addItem'>"+i.label+"</a>");return r}.call(this),e=cf.tp.btnGroup({label:util.icon("plus"),btns:n,style:"btn btn-default"})),e},getKeyVal:function(){return prompt("Input the key value","The Key")},sChange:function(t){var e,n;return e=i(t.currentTarget),n=e.val(),e.parent().next().attr("key",n),e.attr("disabled","true")},valChange:function(t){var e,n;return e=i(t.currentTarget).attr("key"),n=i(t.currentTarget),util.setSeqProp(this.obj,e,n.val()),this.setObj()},keyChange:function(t){var e,n,i;return n=t.currentTarget.value,i=t.currentTarget.oldvalue,e=this.obj[i],this.obj[n]=e,delete this.obj[i],this.setObj()},keyEditor:function(t){var e,n;return e=this.editor[t]||this.editor._key,e.val=t,n=_inputEditor(e),"label"!==e.type&&n.attr("onfocus","this.oldvalue = this.value;"),n.addClass("control-label"),n},valEditor:function(t,e){var n,i;return n=this.editor[e]||this.editor._val,n.val=t,i=_inputEditor(n),e&&i.attr("key",e),i.addClass("form-control"),i},_addArrayItem:function(t,e,n){var r,o,a,s,l;for(a=0,l=t.length;l>a;a++)r=t[a],o=i('<div class="arrayItem"></div>').appendTo(e),s=n+"["+_i+"]",o.append("<label class='control-label'>"+_i+":</label>"),this.addItem(r,o,s);return this.addable?e.append(this.addBtn(n)):void 0},addElem:function(t,e,n){var i,r,o;for(i in t)i.startsWith("__")?this.addLabel(t[i],e):t.hasOwnProperty(i)&&(o="",o=n.length>0?n+"."+i:i,r=this.getCtnTag(),r.append(this.keyEditor(i)),this.addItem(t[i],r,o),e.append(r));return this.addable?e.parent().append(this.addBtn(n)):void 0},addLabel:function(t,e){return e.append('<div class="form-group subTitle"><label>'+t+"</label></div>")},addItem:function(t,n,r){var o,a;return n||(n=this.getCtnTag()),e.isString(t)||e.isNumber(t)||e.isBoolean(t)?(n.append(this.valEditor(t,r)),this.deleteable?n.append(this.delBtn(r)):void 0):(o=i("<div/>").appendTo(n),e.isArray(t)?(o.addClass("subArray"),n.addClass("array"),this._addArrayItem(t,o,r)):e.isObject(t)&&(o.addClass("subObj"),n.addClass("object"),this.addElem(t,o,r)),r&&(a=i('<div class="fbtn"/>'),this.deleteable&&a.append(this.delBtn(r)),n.prepend(a)),n.children("label").prepend('<i class="glyphicon glyphicon-chevron-down"></i>'))},enhanceContent:function(){var t;return this.tab?(this.ctn.append(cf.tp.tab([{title:"Editor",code:"_pEditor",selected:!0},{title:"Text",code:"_text"}])),this.$("#_text").append(this.iid),t=this.$("#_pEditor")):(this.iid&&this.ctn.append(this.iid.hide()),t=i('<div id="_pEditor"></div>'),this.ctn.append(t)),t.addClass("pEditorElem"),this.addItem(this.obj,t,""),this.fixed?void 0:t.append(this.addBtn())}})}).call(e,n(2),n(1))},function(t,e,n){(function(e){var i,r;r=n(23),i=n(25),n(68),n(88),n(90),n(89),t.exports={fun:function(t){var n,o,a,s;return o=e(t.parent),cf.mob?void 0:(a=o.find("textarea").hide(),cf.view.form=r,cf.view.fileCollection=i,s=e.summernote.renderer.getTemplate(),e.summernote.addPlugin({name:"custom",buttons:{tmpl:function(){return s.iconButton(util.iClass("file"),{event:"tmpl",title:"模板重置",hide:!0})},pic:function(){return s.iconButton(util.iClass("picture"),{event:"pic",title:"插入与上传图片",hide:!0})},item:function(){return s.iconButton(util.iClass("th-large"),{event:"item",title:"插入文章链接",hide:!0})}},events:{pic:function(n,i,r){var o;return o=r.editable(),new cf.view.fileCollection({mode:"modal",type:"img",toFetch:!0,itemBtns:["insertToPage"],events:{"click .insertToPage":function(n){var r,a;return a=util.ct(n).parent().prev(),t={path:util.resPath(null,util.getTargetId(n)),type:this.type,title:a.attr("title")||a.text()},r=e("<div>Loading...</div>"),r.attr("id",util.randomChar(4)),r.addClass("markImg"),r.attr("src",t.path),i.insertNode(o,r[0]),this.$el.modal("hide")}},enhanceContent:function(){return this.ctn=e('<ul class="media-list refresh"></ul>'),this.$(".modal-body").addClass("xFile img").append(this.ctn),this.foot.append('<div class="uBtn modelBtn"/>')},context:function(){return{head:!0,title:"插入图片"}}})},tmpl:function(t,n,i){var r,s;if(confirm(iim("sure")))return r=cf.code,cf.community.pCode&&(r=cf.community.pCode+"___"+r),o=[app.atHash(3)+".html",r,"tmpl___editor"].join(":"),s=util.restUrl("file/"+o),e.get(s,null,function(t){var n;return t.entity?(a=e(".note-editor"),n=a.prev(),n.code(t.entity.content),n.trigger("change")):alert("没有模板文件")})},item:function(t,n,i){var r;return r=i.editable(),n.saveRange(r),new cf.view.form({mode:"modal",title:"站内页面",entity:"head",cols:"col-md-4:col-md-8",items:["refClass","ref"],btns:["save"],save:function(){var t;return t=this.$el.data("_link"),n.restoreRange(r),t&&n.insertNode(r,e(t)[0]),this.$el.removeData("_link"),this.$el.modal("hide")}})}}}),a.attr("rows",t.rows),n=a.summernote({height:300,lang:"zh-CN",focus:!0,iconPrefix:"glyphicon glyphicon-",toolbar:[["style",["style"]],["font",["bold","italic","underline","strikethrough","clear","fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["h",["height"]],["insert",["hr","picture","link","video","table"]],["custom",["pic","item","tmpl"]],["misc",["codeview","fullscreen","help"]]]}),t.form._snote[t.name]=n)}}}).call(e,n(1))},function(t,e,n){(function(e,i){n(34),cf.tp=n(51),cf._adminApp=[n(62),n(63)],cf._idn="_id",e.Model.prototype.idAttribute=cf._idn,t.exports=n(53).extend({afterAuth:!0,initLayout:n(32),tmpl:n(80),before:function(){return user.check()},context:function(){return{name:"配置管理系统"}},init:function(){var t,e,n,r,o;for(i(this.parent).append(this.tmpl(this.context())),this.ctn=i("#content"),this.cb=i("#crumb"),this.side=i("#side"),this.main=i("#main"),r=cf._adminApp,o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push((new e).init(this));return o},after:function(){return cf.mob?(i("#topbar").hide(),i("#side>div").removeClass("in")):void 0},layout:function(){var t;return t=i("nav"),t.length?(i("[href*='"+location.hash.split("/")[1]+"']",t).parent().addClass(this.active),t.on("click","li",util.setActive)):void 0}})}).call(e,n(4),n(1))},function(t,e,n){(function(e){var i;cf.meta=n(38),n(19),i=n(49).extend({menuTmpl:n(81),check:function(){return log("user check......"),this.isAdmin()||this.hasRole("manager")},afterLogin:function(){return this.isRoot()&&(this.mgm.entity.community=75),this.renderMenu(),app.navigate(location.hash||util.navUrl("home"),{trigger:!0})},afterLogout:function(){return this.id=null,this.mgm=null,this.roles=null,e("#topbar").empty(),app.navigate("",{trigger:!0}),app.login()}}),e.extend(i.prototype,n(33)),t.exports=i}).call(e,n(1))},function(t,e,n){(function(e,i){var r,o;r=n(21),o=n(11),cf.tp.dataNavItem=n(79),t.exports=n(28).extend({name:"data",auth:function(t,e){user.entityAuth(t,e)||app.navigate("!/#",{trigger:!0})},viewItem:function(t){var e,n,i,r;for(r=[],e=0,i=t.length;i>e;e++)n=t[e],r.push("_"!==n.charAt(0)?"^"+n:n);return r},mgm:function(t,n,i){var r,o;if(user.mgm&&user.mgm.entity)return this._dataNav||(this._dataNav=function(){var t,n;t=e.invert(user.mgm.entity),n=[];for(r in t)o=t[r],n.push("x"!==r&&r.length<3?{label:iin(o),path:util.navUrl("data/list",o)}:void 0);return n}()),this.initLayout("data","2-10",function(t){return function(){return{title:iim("mgm","entity"),tmpl:"dataNavItem",data:t._dataNav}}}(this)),this._data.fun(t,n,i)},fun:function(t,e,n){var a,s,l;switch(l=app._data,l&&l.before&&l.before(),e&&(a=cf.meta[e]._),t){case"list":return new o(i.extend({title:iin(e),style:this.style,cleanAll:!0,parent:l.parent,entity:e,btns:function(){return user.entityAuth(e,"add")?["topAdd"]:null},criteriaOpt:"function"==typeof l.criteriaOpt?l.criteriaOpt(e):void 0},a.listOpt));case"edit":return s={},s[cf._idn]=n,new r(i.extend({title:iim("edit",e),cleanAll:!0,entity:e,viewMode:!1,parent:l.parent,data:s,btns:["back","save"]},a.editFormOpt,a.formOpt));case"view":return s={},s[cf._idn]=n,new r(i.extend({className:"form-horizontal",title:iim("view",e),cleanAll:!0,entity:e,viewMode:!0,parent:l.parent,data:s,btns:["back"]},a.viewOpt));case"add":return new r(i.extend({title:iim("add",e),cleanAll:!0,entity:e,toFetch:!1,btns:["back","save"],parent:l.parent},a.addFormOpt,a.formOpt))}}})}).call(e,n(2),n(1))},function(t,e,n){(function(e){var i,r,o;o=n(5),r=n(11),i=n(58),cf.meta.subscriber={_:{tbItem:{lastUpdated:{w:200,type:"date"},status:{w:200,type:"text"},woid:{type:"text"},spend:{w:100,label:"消费",val:function(){return 0},type:"text"}}}},t.exports=n(28).extend({name:"userRole",mgm:function(t,e,n){return null==t&&(t="user"),this.initLayout("userRole","2-10",function(){var t;return{title:iim("mgm","user"),tmpl:"dataNavItem",data:function(){var e,n,i,r;for(i=["user","role","org","userGroup"],r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push({label:iin(t),path:util.navUrl("userRole",t)});return r}()}}),this._userRole.fun(t,e,n)},fun:function(t,n,a){switch(t){case"user":return new r({entity:t,style:"panel-info",btns:["popAdd"],afterShow:function(t,e){var n;return n=this.findData(t).id,new r({style:"panel-success",uid:n,parent:e,entity:"membership",criteriaOpt:function(){return{q:{uid:n}}}})}});case"org":return new r({entity:t,style:"panel-info",btns:["popAdd"],afterShow:function(t,e){return new r({style:"panel-success",orgId:util.getTargetId(t),parent:e,entity:"orgRelation",criteriaOpt:function(){return{oid:"eq_l_"+this.orgId}}})}});case"role":return new r({entity:t,style:"panel-info",btns:["popAdd"],comparator:"type",afterShow:function(t,e){var n,i;return n=this.findData(t),i=n.id,new r({style:"panel-success",roleId:i,roleTitle:n.get("title"),parent:e,btns:["popAdd"],entity:"membership",criteriaOpt:function(){return{q:{rid:i}}}})}});case"userGroup":return log("userGroup");case"res":return new o.extend({parent:"#main",entity:"role",res:a,data:{id:n},tmpl:resTmpl,cleanAll:!0,items:"title,label,type,res,description",events:{"click .saveRes":function(t){return this.model.set("res",JSON.stringify(this.data.res)),this.model.save()},"click .list-group-item":function(t){return this.rName=e(t.currentTarget).attr("class").split(" ")[1],n=location.hash.split("/"),4===n.length?n.push(this.rName):n[4]=this.rName,app.navigate(n.join("/"),{replace:!0}),this.rData=this.data.res[this.rName]},"click .nav":"editResTree","click .account":"editResTree","click .mgm":function(t){return new i({p:this,parent:"#resMain",cleanAll:!0,obj:this.rData,addable:!1,editor:{_key:{type:"label",cls:"_k"},_val:{type:"number",cls:"_v",valid:{min:1,max:1e4}}}})},"click .permission":function(t){return new i({p:this,parent:"#resMain",cleanAll:!0,obj:this.rData,addable:!1,editor:{_key:{type:"label",cls:"_k"},_val:{type:"checkbox",cls:"_v",data:[{label:"Choose",val:!0}]}}})}},editResTree:function(t){},callback:function(){return this.res?this.$(".list-group ."+this.res).trigger("click"):void 0}})}}})}).call(e,n(1))},function(t,e,n){(function(t){var e,i;n(66),e=n(60),i=n(61),cf.dm="wikibeijing.com",n(65),n(40),t.extend(window,{_lang:"en",_i:{}}),cf.opt={entity:{categories:["post","brand","commodity"],headRefEntity:["sight","show","food","handicraft","post","content"],headRefChannel:["top","index"]},image:{index:{maxWidth:500,text:"宽高比1:2或者1:1，宽度最小210px"},top:{thumb:"_thumb:180",text:"宽高比5:2，宽度最小1200px"},list:{maxWidth:250,text:"宽高比1:2，宽度最小210px"},slide:{maxWidth:1e3,text:"宽高比8:3，宽度最小800px"}}},window.user=new i,new e}).call(e,n(1))},function(t,e,n){(function(t){var e,i,r,o,a;n(43),n(42),n(39),n(45),n(37),n(47),n(46),n(44),n(18),e=n(22),o=n(27),i=function(e){return t.extend({tbItem:{title:{type:"view"},lastUpdated:{type:"date"},_opt:{type:"btns",w:120}},action:function(){return["edit","del"]}},e)},a={type:"textarea",rows:6},r=cf.meta,t.extend(r.common,{description:a,"info::openingHours":a,"info::price":a,"info::address":a,"info::distance":a,"info::gettingThere":a,"info::bestTimeToSee":a,"info::englishMap":a,"info::travelTips":a,"info::officialWebsite":a,"info::watchVideo":a,"info::lastUpdated":a,"info::showTime":a,"info::priceSeats":a,cat:{type:"select",title:iic("category"),entity:"cat",keyVal:"code,title",criteria:function(){return{q:{type:"sight"}}}},slidePic:{type:"holder",xtype:o,attrs:{multi:!0,func:"slide"}},listPic:{type:"holder",xtype:o,attrs:{func:"list"}}}),t.extend(cf.meta.common.ref.attrs,{clickShow:!0,setAttrs:"title,subTitle,refFile",name:"ref"}),r.top={_:{item:["refClass","ref","title","subTitle","refFile"],action:function(){return["edit","del"]}}},r.theater=r.extra=r.subSight=r.restaurant={refPic:{type:"holder",xtype:o,attrs:{multi:!0}},content:{type:"textarea",rows:6},_:{item:["title","fee","row","content","refPic"],tbItem:{row:{w:50},title:{},_opt:{type:"btns",w:120}}}},r.handicraft={_:i({item:["title","subTitle","row","content","slidePic","listPic"]})},r.food={restaurant:{xtype:e,attrs:{entity:"restaurant",toFetch:!1,_func:null,_prop:"sub",_dv:[],callback:function(){}}},_:i({item:["title","subTitle","row","content","restaurant","slidePic","listPic"]})},r.show={theater:{xtype:e,attrs:{entity:"theater",toFetch:!1,_func:null,_prop:"sub",_dv:[],callback:function(){}}},_:i({item:["title","subTitle","row","content","info::opening","info::price","info::address","info::distance","info::gettingThere","info::website","info::watchVideo","info::words","info::lastUpdated","info::showTime","info::priceSeats","theater","slidePic","listPic","_dateCreated_true","_lastUpdated_true"]})},r.sight={sub:{xtype:e,attrs:{entity:"subSight",toFetch:!1,_func:null,_prop:"sub",_dv:[],callback:function(){}}},extra:{xtype:e,attrs:{entity:"extra",toFetch:!1,_func:null,_prop:"extra",_dv:[],callback:function(){}}},_:i({item:["title","subTitle","row","cat","content","info::openingHours","info::price","info::address","info::distance","info::gettingThere","info::englishMap","info::travelTips","info::website","info::watchVideo","info::officialWebsite","info::lastUpdated","sub","extra","slidePic","listPic","_dateCreated_true","_lastUpdated_true"]})},r.map={_:i({item:["refClass","ref","title","description","slidePic"]})},r.guide=r.city={_:i({item:["title","description","slidePic"]})},r.car={_:i({item:["title","description","slidePic"]})}}).call(e,n(1))},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){var i=n(3);t.exports=function(t){var e,n=[],r=t||{};return function(t,r,o,a,s,l){n.push("<div"+i.cls(["alert","alert-"+l+" "+(t?"alert-dismissable":"")],[null,!0])+">"),t&&n.push('<button type="button" data-dismiss="alert" aria-hidden="true" class="close">×</button>'),o&&n.push(null==(e=r.icon(o))?"":e),s&&n.push("<strong>"+i.escape(null==(e=s)?"":e)+"</strong>"),n.push((null==(e=a)?"":e)+"</div>")}.call(this,"closed"in r?r.closed:"undefined"!=typeof closed?closed:void 0,"f"in r?r.f:"undefined"!=typeof f?f:void 0,"icon"in r?r.icon:"undefined"!=typeof icon?icon:void 0,"msg"in r?r.msg:"undefined"!=typeof msg?msg:void 0,"title"in r?r.title:"undefined"!=typeof title?title:void 0,"type"in r?r.type:"undefined"!=typeof type?type:void 0),n.join("")}},function(t,e,n){var i=n(3);t.exports=function(t){var e,n=[],r=t||{};return function(t,r,o,a,s){n.push('<div class="btn-group">'+(null==(e=t)?"":e)+'<a data-toggle="dropdown"'+i.cls(["dropdown-toggle",a],[null,!0])+">"+(null==(e=o)?"":e)+'<span class="caret"></span></a>'),r&&(n.push('<ul class="dropdown-menu">'),function(){var t=r;if("number"==typeof t.length)for(var o=0,a=t.length;a>o;o++){var s=t[o];n.push("<li>"+i.escape(null==(e=s)?"":e)+"</li>")}else{var a=0;for(var o in t){a++;var s=t[o];n.push("<li>"+i.escape(null==(e=s)?"":e)+"</li>")}}}.call(this),n.push("</ul>")),n.push("</div>")}.call(this,"btn"in r?r.btn:"undefined"!=typeof btn?btn:void 0,"btns"in r?r.btns:"undefined"!=typeof btns?btns:void 0,"label"in r?r.label:"undefined"!=typeof label?label:void 0,"style"in r?r.style:"undefined"!=typeof style?style:void 0,"undefined"in r?r.undefined:void 0),n.join("")}},function(t,e,n){var i=n(3);t.exports=function(t){var e,n=[],r=t||{};return function(t,r,o){n.push('<div class="form-group">'),r&&n.push("<label"+i.cls(["control-label",o],[null,!0])+">"+i.escape(null==(e=r)?"":e)+"</label>"),n.push("<div"+i.cls([t],[!0])+"></div></div>")}.call(this,"inputWidth"in r?r.inputWidth:"undefined"!=typeof inputWidth?inputWidth:void 0,"label"in r?r.label:"undefined"!=typeof label?label:void 0,"labelWidth"in r?r.labelWidth:"undefined"!=typeof labelWidth?labelWidth:void 0),n.join("")}},function(t,e,n){var i=n(3);t.exports=function(t){var e,n=[],r=t||{};return function(t,r,o,a){n.push('<button type="button" data-toggle="collapse"'+i.attr("data-target",a,!0,!1)+i.cls(["navbar-toggle","collapsed",t],[null,null,!0])+">"),o&&n.push(null==(e=r.icon(o))?"":e),n.push('<span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>')}.call(this,"cls"in r?r.cls:"undefined"!=typeof cls?cls:void 0,"f"in r?r.f:"undefined"!=typeof f?f:void 0,"icon"in r?r.icon:"undefined"!=typeof icon?icon:void 0,"target"in r?r.target:"undefined"!=typeof target?target:void 0),n.join("")}},function(t,e,n){var i=n(3);t.exports=function(t){var e,n=[],r=t||{};return function(t,r,o,a,s){n.push('<div class="modal-dialog"><div'+i.cls(["modal-content",r],[null,!0])+">"),a&&n.push('<div class="modal-header"><button type="button" data-dismiss="modal" aria-hidden="true" class="close">×</button><h4 class="modal-title">'+i.escape(null==(e=s)?"":e)+"</h4></div>"),n.push('<div class="modal-body">'+(null==(e=t)?"":e)+"</div>"),o&&n.push('<div class="modal-footer"></div>'),n.push("</div></div>")}.call(this,"_content"in r?r._content:"undefined"!=typeof _content?_content:void 0,"ctxClass"in r?r.ctxClass:"undefined"!=typeof ctxClass?ctxClass:void 0,"foot"in r?r.foot:"undefined"!=typeof foot?foot:void 0,"head"in r?r.head:"undefined"!=typeof head?head:void 0,"title"in r?r.title:"undefined"!=typeof title?title:void 0),n.join("")}},function(t,e,n){var i=n(3);t.exports=function(t){var e,n=[],r=t||{};return function(t,r,o,a){n.push("<ul"+i.cls(["pagination",t],[null,!0])+">"),function(){var t=o;if("number"==typeof t.length)for(var r=0,a=t.length;a>r;r++){var s=t[r];n.push("<li><a>"+i.escape(null==(e=s.num)?"":e)+"</a></li>")}else{var a=0;for(var r in t){a++;var s=t[r];n.push("<li><a>"+i.escape(null==(e=s.num)?"":e)+"</a></li>")}}}.call(this),n.push('</ul><div class="totalNum"><select class="form-control input-sm"><option>10</option><option>15</option><option>20</option><option>40</option></select>/<span>'+i.escape(null==(e=r||10)?"":e)+"</span></div>")}.call(this,"cls"in r?r.cls:"undefined"!=typeof cls?cls:void 0,"count"in r?r.count:"undefined"!=typeof count?count:void 0,"res"in r?r.res:"undefined"!=typeof res?res:void 0,"undefined"in r?r.undefined:void 0),n.join("")}},function(t,e,n){var i=n(3);t.exports=function(t){var e,n=[],r=t||{};return function(t,r,o,a,s,l,u){n.push("<div"+i.cls(["panel",o||"panel-default"],[null,!0])+'><div class="panel-heading">'),l&&(n.push('<div class="panel-title"><strong>'+(null==(e=l)?"":e)+"</strong>"),u&&n.push('<div class="toolbar"></div>'),n.push("</div>")),n.push("</div><"+(a||"div")+i.cls([s||"panel-body"],[!0])+">"+(null==(e=t)?"":e)+"</"+(a||"div")+">"),r&&n.push('<div class="panel-footer clearfix"></div>'),n.push("</div>")}.call(this,"_content"in r?r._content:"undefined"!=typeof _content?_content:void 0,"foot"in r?r.foot:"undefined"!=typeof foot?foot:void 0,"style"in r?r.style:"undefined"!=typeof style?style:void 0,"tag"in r?r.tag:"undefined"!=typeof tag?tag:void 0,"tagClass"in r?r.tagClass:"undefined"!=typeof tagClass?tagClass:void 0,"title"in r?r.title:"undefined"!=typeof title?title:void 0,"toolbar"in r?r.toolbar:"undefined"!=typeof toolbar?toolbar:void 0),n.join("")}},function(t,e,n){var i=n(3);t.exports=function(t){var e,n=[],r=t||{};return function(t,r,o){n.push('<div class="form-group has-feedback"><input id="q"'+i.attr("name",o,!0,!1)+' type="text"'+i.attr("placeholder",r+"...",!0,!1)+' class="form-control input-sm"/>'+(null==(e=t.icon("search","span",null,"form-control-feedback"))?"":e)+"</div>")}.call(this,"f"in r?r.f:"undefined"!=typeof f?f:void 0,"label"in r?r.label:"undefined"!=typeof label?label:void 0,"name"in r?r.name:"undefined"!=typeof name?name:void 0),n.join("")}},function(t,e,n){var i=n(3);t.exports=function(t){var e,n=[],r=t||{};return function(r){n.push('<ul class="nav nav-tabs">'),function(){var r=t;if("number"==typeof r.length)for(var o=0,a=r.length;a>o;o++){var s=r[o];n.push("<li"+i.cls([s.selected?"active":""],[!0])+'><a data-toggle="tab"'+i.attr("href","#"+s.code,!0,!1)+">"+i.escape(null==(e=s.title)?"":e)+"</a></li>")}else{var a=0;for(var o in r){a++;var s=r[o];n.push("<li"+i.cls([s.selected?"active":""],[!0])+'><a data-toggle="tab"'+i.attr("href","#"+s.code,!0,!1)+">"+i.escape(null==(e=s.title)?"":e)+"</a></li>")}}}.call(this),n.push('</ul><div class="tab-content">'),function(){var e=t;if("number"==typeof e.length)for(var r=0,o=e.length;o>r;r++){var a=e[r];n.push("<div"+i.attr("id",a.code,!0,!1)+i.cls(["tab-panel",a.selected?"active":""],[null,!0])+"></div>")}else{var o=0;for(var r in e){o++;var a=e[r];n.push("<div"+i.attr("id",a.code,!0,!1)+i.cls(["tab-panel",a.selected?"active":""],[null,!0])+"></div>")}}}.call(this),n.push("</div>")}.call(this,"undefined"in r?r.undefined:void 0),n.join("")}},function(t,e,n){var i=n(3);t.exports=function(t){var e,n=[],r=t||{};return function(t,r,o,a,s,l,u){n.push("<table"+i.attr("id",l||r+"tb",!0,!1)+i.cls([a],[!0])+">"),s&&(n.push("<thead><tr>"),function(){var a=t;if("number"==typeof a.length)for(var s=0,l=a.length;l>s;s++){var u=a[s],c=u.w||"auto";n.push("<th"+i.attr("style","width:"+c,!0,!1)+' class="labels">'+i.escape(null==(e=u.noLabel||"btns"==u.type?"":u.label||o.iie(r,s))?"":e)+"</th>")}else{var l=0;for(var s in a){l++;var u=a[s],c=u.w||"auto";n.push("<th"+i.attr("style","width:"+c,!0,!1)+' class="labels">'+i.escape(null==(e=u.noLabel||"btns"==u.type?"":u.label||o.iie(r,s))?"":e)+"</th>")}}}.call(this),n.push("</tr></thead>")),n.push('<tbody class="refresh"></tbody></table>')}.call(this,"cols"in r?r.cols:"undefined"!=typeof cols?cols:void 0,"entity"in r?r.entity:"undefined"!=typeof entity?entity:void 0,"i18"in r?r.i18:"undefined"!=typeof i18?i18:void 0,"tbStyle"in r?r.tbStyle:"undefined"!=typeof tbStyle?tbStyle:void 0,"thead"in r?r.thead:"undefined"!=typeof thead?thead:void 0,"tid"in r?r.tid:"undefined"!=typeof tid?tid:void 0,"undefined"in r?r.undefined:void 0),n.join("")}},function(t,e,n){var i=n(3);t.exports=function(t){var e,n=[],r=t||{};return function(t,r){n.push(i.escape(null==(e=r)?"":e)+(null==(e=t.icon("chevron-right"))?"":e))}.call(this,"f"in r?r.f:"undefined"!=typeof f?f:void 0,"label"in r?r.label:"undefined"!=typeof label?label:void 0),n.join("")}},function(t,e,n){var i=n(3);t.exports=function(t){var e,n=[],r=t||{};return function(t){n.push('<div class="headerWrapper"><div id="header" class="navbar navbar-inverse navbar-fixed-top"><div class="navbar-header"><h1 id="logo"><a href="#" class="navbar-brand">'+i.escape(null==(e=t)?"":e)+'</a></h1></div></div></div><div class="container-fluid"><div id="content" class="row"><div id="side" class="col-md-3"></div><div id="main" class="col-md-9"></div></div></div><div class="footerWrapper"><div id="footer"></div></div>')}.call(this,"name"in r?r.name:"undefined"!=typeof name?name:void 0),n.join("")}},function(t,e,n){var i=n(3);t.exports=function(t){var e,n=[],r=t||{};return function(t,r,o,a,s,l,u){n.push('<nav id="topbar"'+i.cls([a],[!0])+">"),s&&n.push('<a class="navmenu-brand closeMenu">'+i.escape(null==(e=s)?"":e)+i.escape(null==(e=t.icon("chevron-left.pull-right","i"))?"":e)+"</a>"),n.push("<ul"+i.cls([l],[!0])+">"),function(){var r=o;if("number"==typeof r.length)for(var a=0,s=r.length;s>a;a++){var l=r[a];n.push("<li><a"+i.attr("href",l.href||t.navUrl(l.k),!0,!1)+">"+i.escape(null==(e=l.l)?"":e)+"</a></li>")}else{var s=0;for(var a in r){s++;var l=r[a];n.push("<li><a"+i.attr("href",l.href||t.navUrl(l.k),!0,!1)+">"+i.escape(null==(e=l.l)?"":e)+"</a></li>")}}}.call(this),n.push('<li><a data-toggle="dropdown" href="#">'+(null==(e=t.icon("th"))?"":e)+i.escape(null==(e=r.ii("prop"))?"":e)+'</a><ul class="dropdown-menu"><li><a onclick="app.account()">'+(null==(e=t.icon("user"))?"":e)+i.escape(null==(e=r.ii("account"))?"":e)+'</a></li><li><a onclick="app.setting()">'+(null==(e=t.icon("cog"))?"":e)+i.escape(null==(e=r.ii("setting"))?"":e)+'</a></li><li class="divider"></li><li><a onclick="user.logout()">'+(null==(e=t.icon("log-out"))?"":e)+i.escape(null==(e=r.ii("logout"))?"":e)+"</a></li></ul></li></ul></nav>")}.call(this,"f"in r?r.f:"undefined"!=typeof f?f:void 0,"i18"in r?r.i18:"undefined"!=typeof i18?i18:void 0,"menus"in r?r.menus:"undefined"!=typeof menus?menus:void 0,"navStyle"in r?r.navStyle:"undefined"!=typeof navStyle?navStyle:void 0,"title"in r?r.title:"undefined"!=typeof title?title:void 0,"ulStyle"in r?r.ulStyle:"undefined"!=typeof ulStyle?ulStyle:void 0,"undefined"in r?r.undefined:void 0),n.join("")}},function(t,e,n){var i,r=function(){return i.indexOf(n.h())>=0},o=function s(){t.hot.check(!0,function(e,i){return e?void(t.hot.status()in{abort:1,fail:1}?(console.warn("[HMR] Cannot apply update. Need to do a full reload!"),console.warn("[HMR] "+e.stack||e.message),window.location.reload()):console.warn("[HMR] Update failed: "+e.stack||e.message)):i?(r()||s(),n(83)(i,i),void(r()&&console.log("[HMR] App is up to date."))):(console.warn("[HMR] Cannot find update. Need to do a full reload!"),console.warn("[HMR] (Probably because of restarting the webpack-dev-server)"),void window.location.reload())})},a=window.addEventListener?function(t,e){window.addEventListener(t,e,!1)}:function(t,e){window.attachEvent("on"+t,e)};a("message",function(e){"string"==typeof e.data&&0===e.data.indexOf("webpackHotUpdate")&&(i=e.data,r()||"idle"!==t.hot.status()||(console.log("[HMR] Checking for updates on the server..."),o()))}),console.log("[HMR] Waiting for update signal from WDS...")},function(t,e,n){t.exports=function(t,e){var n=t.filter(function(t){return e&&e.indexOf(t)<0});n.length>0&&(console.warn("[HMR] The following modules couldn't be hot updated: (They would need a full reload!)"),n.forEach(function(t){console.warn("[HMR]  - "+t)})),e&&0!==e.length?(console.log("[HMR] Updated modules:"),e.forEach(function(t){console.log("[HMR]  - "+t)})):console.log("[HMR] Nothing hot updated.")}},,,function(t,e,n){(function(t){!function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}var n=function(e,n){var i=this;this.element=t(e),this.container=n.container||"body",this.language=n.language||this.element.data("date-language")||"en",this.language=this.language in r?this.language:"en",this.isRTL=r[this.language].rtl||!1,this.formatType=n.formatType||this.element.data("format-type")||"standard",this.format=o.parseFormat(n.format||this.element.data("date-format")||r[this.language].format||o.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.fontAwesome=n.fontAwesome||this.element.data("font-awesome")||!1,this.bootcssVer=n.bootcssVer||(this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2),this.component=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar .fa-calendar .fa-clock-o").parent():!1,this.componentReset=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=n.linkField||this.element.data("link-field")||!1,this.linkFormat=o.parseFormat(n.linkFormat||this.element.data("link-format")||o.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=n.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=n.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=n.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=n.initialDate||new Date,this.zIndex=n.zIndex||this.element.data("z-index")||void 0,this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":3===this.bootcssVer?"glyphicon-arrow-left":"icon-arrow-left",rightArrow:this.fontAwesome?"fa-arrow-right":3===this.bootcssVer?"glyphicon-arrow-right":"icon-arrow-right"},this.icontype=this.fontAwesome?"fa":"glyphicon",this._attachEvents(),this.formatViewType="datetime","formatViewType"in n?this.formatViewType=n.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in n?this.minView=n.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=o.convertViewMode(this.minView),this.maxView=o.modes.length-1,"maxView"in n?this.maxView=n.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=o.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in n?this.wheelViewModeNavigation=n.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in n?this.wheelViewModeNavigationInverseDirection=n.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,
"wheelViewModeNavigationDelay"in n?this.wheelViewModeNavigationDelay=n.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in n?this.startViewMode=n.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=o.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in n?this.viewSelect=n.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=o.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in n?this.forceParse=n.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));for(var a=3===this.bootcssVer?o.templateV3:o.template;-1!==a.indexOf("{iconType}");)a=a.replace("{iconType}",this.icontype);for(;-1!==a.indexOf("{leftArrow}");)a=a.replace("{leftArrow}",this.icons.leftArrow);for(;-1!==a.indexOf("{rightArrow}");)a=a.replace("{rightArrow}",this.icons.rightArrow);if(this.picker=t(a).appendTo(this.isInline?this.element:this.container).on({click:t.proxy(this.click,this),mousedown:t.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(t.fn.mousewheel?this.picker.on({mousewheel:t.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.picker.addClass(this.isInline?"datetimepicker-inline":"datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL){this.picker.addClass("datetimepicker-rtl");var s=3===this.bootcssVer?".prev span, .next span":".prev i, .next i";this.picker.find(s).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}t(document).on("mousedown",function(e){0===t(e.target).closest(".datetimepicker").length&&i.hide()}),this.autoclose=!1,"autoclose"in n?this.autoclose=n.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in n?this.keyboardNavigation=n.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=n.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=n.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(n.weekStart||this.element.data("date-weekstart")||r[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-(1/0),this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(n.startDate||this.element.data("date-startdate")),this.setEndDate(n.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(n.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setMinutesDisabled(n.minutesDisabled||this.element.data("date-minute-disabled")),this.setHoursDisabled(n.hoursDisabled||this.element.data("date-hour-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};n.prototype={constructor:n,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:t.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]];for(var e,n,i=0;i<this._events.length;i++)e=this._events[i][0],n=this._events[i][1],e.on(n)},_detachEvents:function(){for(var t,e,n=0;n<this._events.length;n++)t=this._events[n][0],e=this._events[n][1],t.off(e);this._events=[]},show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),t(window).on("resize",t.proxy(this.place,this)),e&&(e.stopPropagation(),e.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(e){this.isVisible&&(this.isInline||(this.picker.hide(),t(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||t(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){t>=this.startDate&&t<=this.endDate?(this.date=t,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:t,startDate:this.startDate,endDate:this.endDate})},setFormat:function(t){this.format=o.parseFormat(t,this.formatType);var e;this.isInput?e=this.element:this.component&&(e=this.element.find("input")),e&&e.val()&&this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e):(this.component&&this.element.find("input").val(e),this.element.data("date",e)),this.linkField&&t("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(t){return void 0==t&&(t=this.format),o.formatDate(this.date,t,this.language,this.formatType)},setStartDate:function(t){this.startDate=t||-(1/0),this.startDate!==-(1/0)&&(this.startDate=o.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(t){this.endDate=t||1/0,this.endDate!==1/0&&(this.endDate=o.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this.daysOfWeekDisabled=e||[],t.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=t.map(this.daysOfWeekDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},setMinutesDisabled:function(e){this.minutesDisabled=e||[],t.isArray(this.minutesDisabled)||(this.minutesDisabled=this.minutesDisabled.split(/,\s*/)),this.minutesDisabled=t.map(this.minutesDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},setHoursDisabled:function(e){this.hoursDisabled=e||[],t.isArray(this.hoursDisabled)||(this.hoursDisabled=this.hoursDisabled.split(/,\s*/)),this.hoursDisabled=t.map(this.hoursDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){if(!this.zIndex){var e=0;t("div").each(function(){var n=parseInt(t(this).css("zIndex"),10);n>e&&(e=n)}),this.zIndex=e+10}var n,i,r,o;o=this.container instanceof t?this.container.offset():t(this.container).offset(),this.component?(n=this.component.offset(),r=n.left,("bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)&&(r+=this.component.outerWidth()-this.picker.outerWidth())):(n=this.element.offset(),r=n.left),r+220>document.body.clientWidth&&(r=document.body.clientWidth-220),i="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?n.top-this.picker.outerHeight():n.top+this.height,i-=o.top,r-=o.left,"body"!=this.container&&(i+=document.body.scrollTop),this.picker.css({top:i,left:r,zIndex:this.zIndex})}},update:function(){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):(t=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate,("string"==typeof t||t instanceof String)&&(t=t.replace(/^\s+|\s+$/g,""))),t||(t=new Date,e=!1),this.date=o.parseDate(t,this.format,this.language,this.formatType),e&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){for(var t=this.weekStart,e="<tr>";t<this.weekStart+7;)e+='<th class="dow">'+r[this.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datetimepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+r[this.language].monthsShort[e++]+"</span>";this.picker.find(".datetimepicker-months td").html(t)},fill:function(){if(null!=this.date&&null!=this.viewDate){var n=new Date(this.viewDate),i=n.getUTCFullYear(),a=n.getUTCMonth(),s=n.getUTCDate(),l=n.getUTCHours(),u=n.getUTCMinutes(),c=this.startDate!==-(1/0)?this.startDate.getUTCFullYear():-(1/0),d=this.startDate!==-(1/0)?this.startDate.getUTCMonth()+1:-(1/0),h=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,f=this.endDate!==1/0?this.endDate.getUTCMonth()+1:1/0,p=new e(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),m=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(r[this.language].months[a]+" "+i),"time"==this.formatViewType){var v=this.getFormattedDate();this.picker.find(".datetimepicker-hours thead th:eq(1)").text(v),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(v)}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(s+" "+r[this.language].months[a]+" "+i),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(s+" "+r[this.language].months[a]+" "+i);this.picker.find("tfoot th.today").text(r[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var g=e(i,a-1,28,0,0,0,0),y=o.getDaysInMonth(g.getUTCFullYear(),g.getUTCMonth());g.setUTCDate(y),g.setUTCDate(y-(g.getUTCDay()-this.weekStart+7)%7);var b=new Date(g);b.setUTCDate(b.getUTCDate()+42),b=b.valueOf();for(var w,x=[];g.valueOf()<b;)g.getUTCDay()==this.weekStart&&x.push("<tr>"),w="",g.getUTCFullYear()<i||g.getUTCFullYear()==i&&g.getUTCMonth()<a?w+=" old":(g.getUTCFullYear()>i||g.getUTCFullYear()==i&&g.getUTCMonth()>a)&&(w+=" new"),this.todayHighlight&&g.getUTCFullYear()==m.getFullYear()&&g.getUTCMonth()==m.getMonth()&&g.getUTCDate()==m.getDate()&&(w+=" today"),g.valueOf()==p&&(w+=" active"),(g.valueOf()+864e5<=this.startDate||g.valueOf()>this.endDate||-1!==t.inArray(g.getUTCDay(),this.daysOfWeekDisabled))&&(w+=" disabled"),x.push('<td class="day'+w+'">'+g.getUTCDate()+"</td>"),g.getUTCDay()==this.weekEnd&&x.push("</tr>"),g.setUTCDate(g.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(x.join("")),x=[];for(var k="",C="",T="",S=this.hoursDisabled||[],D=0;24>D;D++)if(-1===S.indexOf(D)){var M=e(i,a,s,D);w="",M.valueOf()+36e5<=this.startDate||M.valueOf()>this.endDate?w+=" disabled":l==D&&(w+=" active"),this.showMeridian&&2==r[this.language].meridiem.length?(C=12>D?r[this.language].meridiem[0]:r[this.language].meridiem[1],C!=T&&(""!=T&&x.push("</fieldset>"),x.push('<fieldset class="hour"><legend>'+C.toUpperCase()+"</legend>")),T=C,k=D%12?D%12:12,x.push('<span class="hour'+w+" hour_"+(12>D?"am":"pm")+'">'+k+"</span>"),23==D&&x.push("</fieldset>")):(k=D+":00",x.push('<span class="hour'+w+'">'+k+"</span>"))}this.picker.find(".datetimepicker-hours td").html(x.join("")),x=[],k="",C="",T="";for(var A=this.minutesDisabled||[],D=0;60>D;D+=this.minuteStep)if(-1===A.indexOf(D)){var M=e(i,a,s,l,D,0);w="",M.valueOf()<this.startDate||M.valueOf()>this.endDate?w+=" disabled":Math.floor(u/this.minuteStep)==Math.floor(D/this.minuteStep)&&(w+=" active"),this.showMeridian&&2==r[this.language].meridiem.length?(C=12>l?r[this.language].meridiem[0]:r[this.language].meridiem[1],C!=T&&(""!=T&&x.push("</fieldset>"),x.push('<fieldset class="minute"><legend>'+C.toUpperCase()+"</legend>")),T=C,k=l%12?l%12:12,x.push('<span class="minute'+w+'">'+k+":"+(10>D?"0"+D:D)+"</span>"),59==D&&x.push("</fieldset>")):(k=D+":00",x.push('<span class="minute'+w+'">'+l+":"+(10>D?"0"+D:D)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(x.join(""));var L=this.date.getUTCFullYear(),F=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(i).end().find("span").removeClass("active");L==i&&F.eq(this.date.getUTCMonth()+2).addClass("active"),(c>i||i>h)&&F.addClass("disabled"),i==c&&F.slice(0,d+1).addClass("disabled"),i==h&&F.slice(f).addClass("disabled"),x="",i=10*parseInt(i/10,10);var N=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(i+"-"+(i+9)).end().find("td");i-=1;for(var D=-1;11>D;D++)x+='<span class="year'+(-1==D||10==D?" old":"")+(L==i?" active":"")+(c>i||i>h?" disabled":"")+'">'+i+"</span>",i+=1;N.html(x),this.place()}},updateNavArrows:function(){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth(),i=t.getUTCDate(),r=t.getUTCHours();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()&&i<=this.startDate.getUTCDate()&&r<=this.startDate.getUTCHours()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()&&i>=this.endDate.getUTCDate()&&r>=this.endDate.getUTCHours()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:this.picker.find(".prev").css(this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()&&i<=this.startDate.getUTCDate()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()&&i>=this.endDate.getUTCDate()?{visibility:"hidden"}:{visibility:"visible"});break;case 2:this.picker.find(".prev").css(this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 3:case 4:this.picker.find(".prev").css(this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}},mousewheel:function(e){if(e.preventDefault(),e.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var n=e.originalEvent,i=n.wheelDelta,r=i>0?1:0===i?0:-1;this.wheelViewModeNavigationInverseDirection&&(r=-r),this.showMode(r),setTimeout(t.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(n){n.stopPropagation(),n.preventDefault();var i=t(n.target).closest("span, td, th, legend");if(i.is("."+this.icontype)&&(i=t(i).parent().closest("span, td, th, legend")),1==i.length){if(i.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var r=o.modes[this.viewMode].navStep*("prev"==i[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,r);break;case 1:this.viewDate=this.moveDate(this.viewDate,r);break;case 2:this.viewDate=this.moveMonth(this.viewDate,r);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,r)}this.fill(),this.element.trigger({type:i[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"today":var a=new Date;a=e(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),0),a<this.startDate?a=this.startDate:a>this.endDate&&(a=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(a),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!i.is(".disabled")){var s=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),u=this.viewDate.getUTCDate(),c=this.viewDate.getUTCHours(),d=this.viewDate.getUTCMinutes(),h=this.viewDate.getUTCSeconds();if(i.is(".month")?(this.viewDate.setUTCDate(1),l=i.parent().find("span").index(i),u=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(l),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(e(s,l,u,c,d,h,0))):i.is(".year")?(this.viewDate.setUTCDate(1),s=parseInt(i.text(),10)||0,this.viewDate.setUTCFullYear(s),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(e(s,l,u,c,d,h,0))):i.is(".hour")?(c=parseInt(i.text(),10)||0,(i.hasClass("hour_am")||i.hasClass("hour_pm"))&&(12==c&&i.hasClass("hour_am")?c=0:12!=c&&i.hasClass("hour_pm")&&(c+=12)),this.viewDate.setUTCHours(c),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(e(s,l,u,c,d,h,0))):i.is(".minute")&&(d=parseInt(i.text().substr(i.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(d),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(e(s,l,u,c,d,h,0))),0!=this.viewMode){var f=this.viewMode;this.showMode(-1),this.fill(),f==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(i.is(".day")&&!i.is(".disabled")){var u=parseInt(i.text(),10)||1,s=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCHours(),d=this.viewDate.getUTCMinutes(),h=this.viewDate.getUTCSeconds();i.is(".old")?0===l?(l=11,s-=1):l-=1:i.is(".new")&&(11==l?(l=0,s+=1):l+=1),this.viewDate.setUTCFullYear(s),this.viewDate.setUTCMonth(l,u),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(e(s,l,u,c,d,h,0))}var f=this.viewMode;this.showMode(-1),this.fill(),f==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(t,e){e&&"date"!=e||(this.date=t),e&&"view"!=e||(this.viewDate=t),this.fill(),this.setValue();var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&(n.change(),this.autoclose&&(!e||"date"==e)),this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(t,e){if(!e)return t;var n=new Date(t.valueOf());return n.setUTCMinutes(n.getUTCMinutes()+e*this.minuteStep),n},moveHour:function(t,e){if(!e)return t;var n=new Date(t.valueOf());return n.setUTCHours(n.getUTCHours()+e),n},moveDate:function(t,e){if(!e)return t;var n=new Date(t.valueOf());return n.setUTCDate(n.getUTCDate()+e),n},moveMonth:function(t,e){if(!e)return t;var n,i,r=new Date(t.valueOf()),o=r.getUTCDate(),a=r.getUTCMonth(),s=Math.abs(e);if(e=e>0?1:-1,1==s)i=-1==e?function(){return r.getUTCMonth()==a}:function(){return r.getUTCMonth()!=n},n=a+e,r.setUTCMonth(n),(0>n||n>11)&&(n=(n+12)%12);else{for(var l=0;s>l;l++)r=this.moveMonth(r,e);n=r.getUTCMonth(),r.setUTCDate(o),i=function(){return n!=r.getUTCMonth()}}for(;i();)r.setUTCDate(--o),r.setUTCMonth(n);return r},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.startDate&&t<=this.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27==t.keyCode&&this.show());var e,n,i,r=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;e=37==t.keyCode?-1:1,viewMode=this.viewMode,t.ctrlKey?viewMode+=2:t.shiftKey&&(viewMode+=1),4==viewMode?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):3==viewMode?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):2==viewMode?(n=this.moveDate(this.date,e),i=this.moveDate(this.viewDate,e)):1==viewMode?(n=this.moveHour(this.date,e),i=this.moveHour(this.viewDate,e)):0==viewMode&&(n=this.moveMinute(this.date,e),i=this.moveMinute(this.viewDate,e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),r=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;e=38==t.keyCode?-1:1,viewMode=this.viewMode,t.ctrlKey?viewMode+=2:t.shiftKey&&(viewMode+=1),4==viewMode?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):3==viewMode?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):2==viewMode?(n=this.moveDate(this.date,7*e),i=this.moveDate(this.viewDate,7*e)):1==viewMode?this.showMeridian?(n=this.moveHour(this.date,6*e),i=this.moveHour(this.viewDate,6*e)):(n=this.moveHour(this.date,4*e),i=this.moveHour(this.viewDate,4*e)):0==viewMode&&(n=this.moveMinute(this.date,4*e),i=this.moveMinute(this.viewDate,4*e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),r=!0);break;case 13:if(0!=this.viewMode){var o=this.viewMode;this.showMode(-1),this.fill(),o==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();t.preventDefault();break;case 9:this.hide()}if(r){var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(t){if(t){var e=Math.max(0,Math.min(o.modes.length-1,this.viewMode+t));e>=this.minView&&e<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:e}),this.viewMode=e)}this.picker.find(">div").hide().filter(".datetimepicker-"+o.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(t){this._setDate(null,"date")},convertViewModeText:function(t){switch(t){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var i=t.fn.datetimepicker;t.fn.datetimepicker=function(e){var i=Array.apply(null,arguments);i.shift();var r;return this.each(function(){var o=t(this),a=o.data("datetimepicker"),s="object"==typeof e&&e;return a||o.data("datetimepicker",a=new n(this,t.extend({},t.fn.datetimepicker.defaults,s))),"string"==typeof e&&"function"==typeof a[e]&&(r=a[e].apply(a,i),void 0!==r)?!1:void 0}),void 0!==r?r:this},t.fn.datetimepicker.defaults={},t.fn.datetimepicker.Constructor=n;var r=t.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}},o={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,o.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},getDefaultFormat:function(t,e){if("standard"==t)return"input"==e?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==t)return"input"==e?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(t){if("standard"==t)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==t)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(t,e){var n=t.replace(this.validParts(e),"\x00").split("\x00"),i=t.match(this.validParts(e));if(!n||!n.length||!i||0==i.length)throw new Error("Invalid date format.");return{separators:n,parts:i}},parseDate:function(i,o,a,s){if(i instanceof Date){var l=new Date(i.valueOf()-6e4*i.getTimezoneOffset());return l.setMilliseconds(0),l}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(i)&&(o=this.parseFormat("yyyy-mm-dd",s)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(i)&&(o=this.parseFormat("yyyy-mm-dd hh:ii",s)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(i)&&(o=this.parseFormat("yyyy-mm-dd hh:ii:ss",s)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(i)){var u,c,d=/([-+]\d+)([dmwy])/,h=i.match(/([-+]\d+)([dmwy])/g);i=new Date;for(var f=0;f<h.length;f++)switch(u=d.exec(h[f]),c=parseInt(u[1]),u[2]){case"d":i.setUTCDate(i.getUTCDate()+c);break;case"m":i=n.prototype.moveMonth.call(n.prototype,i,c);break;case"w":i.setUTCDate(i.getUTCDate()+7*c);break;case"y":i=n.prototype.moveYear.call(n.prototype,i,c)}return e(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),0)}var p,m,u,h=i&&i.toString().match(this.nonpunctuation)||[],i=new Date(0,0,0,0,0,0,0),v={},g=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],y={hh:function(t,e){return t.setUTCHours(e)},h:function(t,e){return t.setUTCHours(e)},HH:function(t,e){return t.setUTCHours(12==e?0:e)},H:function(t,e){return t.setUTCHours(12==e?0:e)},ii:function(t,e){return t.setUTCMinutes(e)},i:function(t,e){return t.setUTCMinutes(e)},ss:function(t,e){return t.setUTCSeconds(e)},s:function(t,e){return t.setUTCSeconds(e)},yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;){if(isNaN(t.getUTCMonth()))return t;t.setUTCDate(t.getUTCDate()-1)}return t},d:function(t,e){return t.setUTCDate(e)},p:function(t,e){return t.setUTCHours(1==e?t.getUTCHours()+12:t.getUTCHours())}};if(y.M=y.MM=y.mm=y.m,y.dd=y.d,y.P=y.p,i=e(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds()),h.length==o.parts.length){for(var f=0,b=o.parts.length;b>f;f++){if(p=parseInt(h[f],10),u=o.parts[f],isNaN(p))switch(u){case"MM":m=t(r[a].months).filter(function(){var t=this.slice(0,h[f].length),e=h[f].slice(0,t.length);return t==e}),p=t.inArray(m[0],r[a].months)+1;break;case"M":m=t(r[a].monthsShort).filter(function(){var t=this.slice(0,h[f].length),e=h[f].slice(0,t.length);return t.toLowerCase()==e.toLowerCase()}),p=t.inArray(m[0],r[a].monthsShort)+1;break;case"p":case"P":p=t.inArray(h[f].toLowerCase(),r[a].meridiem)}v[u]=p}for(var w,f=0;f<g.length;f++)w=g[f],w in v&&!isNaN(v[w])&&y[w](i,v[w])}return i},formatDate:function(e,n,i,a){if(null==e)return"";var s;if("standard"==a)s={yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear(),m:e.getUTCMonth()+1,M:r[i].monthsShort[e.getUTCMonth()],MM:r[i].months[e.getUTCMonth()],d:e.getUTCDate(),D:r[i].daysShort[e.getUTCDay()],DD:r[i].days[e.getUTCDay()],p:2==r[i].meridiem.length?r[i].meridiem[e.getUTCHours()<12?0:1]:"",h:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()},2==r[i].meridiem.length?s.H=s.h%12==0?12:s.h%12:s.H=s.h,s.HH=(s.H<10?"0":"")+s.H,s.P=s.p.toUpperCase(),s.hh=(s.h<10?"0":"")+s.h,s.ii=(s.i<10?"0":"")+s.i,s.ss=(s.s<10?"0":"")+s.s,s.dd=(s.d<10?"0":"")+s.d,s.mm=(s.m<10?"0":"")+s.m;else{if("php"!=a)throw new Error("Invalid format type.");s={y:e.getUTCFullYear().toString().substring(2),Y:e.getUTCFullYear(),F:r[i].months[e.getUTCMonth()],M:r[i].monthsShort[e.getUTCMonth()],n:e.getUTCMonth()+1,t:o.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()),j:e.getUTCDate(),l:r[i].days[e.getUTCDay()],D:r[i].daysShort[e.getUTCDay()],w:e.getUTCDay(),N:0==e.getUTCDay()?7:e.getUTCDay(),S:e.getUTCDate()%10<=r[i].suffix.length?r[i].suffix[e.getUTCDate()%10-1]:"",a:2==r[i].meridiem.length?r[i].meridiem[e.getUTCHours()<12?0:1]:"",g:e.getUTCHours()%12==0?12:e.getUTCHours()%12,G:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()},s.m=(s.n<10?"0":"")+s.n,s.d=(s.j<10?"0":"")+s.j,s.A=s.a.toString().toUpperCase(),s.h=(s.g<10?"0":"")+s.g,s.H=(s.G<10?"0":"")+s.G,s.i=(s.i<10?"0":"")+s.i,s.s=(s.s<10?"0":"")+s.s}for(var e=[],l=t.extend([],n.separators),u=0,c=n.parts.length;c>u;u++)l.length&&e.push(l.shift()),e.push(s[n.parts[u]]);return l.length&&e.push(l.shift()),e.join("")},convertViewMode:function(t){switch(t){case 4:case"decade":t=4;break;case 3:case"year":t=3;break;case 2:case"month":t=2;break;case 1:case"day":t=1;break;case 0:case"hour":t=0}return t},headTemplate:'<thead><tr><th class="prev"><i class="{leftArrow}"/></th><th colspan="5" class="switch"></th><th class="next"><i class="{rightArrow}"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};o.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+o.headTemplate+"<tbody></tbody>"+o.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+"</table></div></div>",o.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+o.headTemplateV3+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+o.headTemplateV3+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+o.headTemplateV3+"<tbody></tbody>"+o.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+o.headTemplateV3+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+o.headTemplateV3+o.contTemplate+o.footTemplate+"</table></div></div>",t.fn.datetimepicker.DPGlobal=o,t.fn.datetimepicker.noConflict=function(){return t.fn.datetimepicker=i,this},t(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(e){var n=t(this);n.data("datetimepicker")||(e.preventDefault(),n.datetimepicker("show"))}),t(function(){t('[data-provide="datetimepicker-inline"]').datetimepicker()})}(t)}).call(e,n(1))},function(t,e,n){(function(t){!function(t){t.fn.datetimepicker.dates["zh-CN"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今天",suffix:[],meridiem:["上午","下午"]}}(t)}).call(e,n(1))},function(t,e,n){var i,r,o;!function(a){r=[n(1)],i=a,o="function"==typeof i?i.apply(e,r):i,!(void 0!==o&&(t.exports=o))}(function(t){Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,n=Object(this),i=n.length>>>0,r=0;if(2===arguments.length)e=arguments[1];else{for(;i>r&&!(r in n);)r++;if(r>=i)throw new TypeError("Reduce of empty array with no initial value");e=n[r++]}for(;i>r;r++)r in n&&(e=t(e,n[r],r,n));return e}),"function"!=typeof Array.prototype.filter&&(Array.prototype.filter=function(t){for(var e=Object(this),n=e.length>>>0,i=[],r=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)if(o in e){var a=e[o];t.call(r,a,o,e)&&i.push(a)}return i});var e,i=!0&&n(14),r=function(e){var n="Comic Sans MS"===e?"Courier New":"Comic Sans MS",i=t("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),r=i.css("fontFamily",n).width(),o=i.css("fontFamily",e+","+n).width();

return i.remove(),r!==o},o={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Trident")>-1,isFF:navigator.userAgent.indexOf("Firefox")>-1,jqueryVersion:parseFloat(t.fn.jquery),isSupportAmd:i,hasCodeMirror:!1,isFontInstalled:r,isW3CRangeSupport:!!document.createRange},a=function(){var e=function(t){return function(e){return t===e}},n=function(t,e){return t===e},i=function(t){return function(e,n){return e[t]===n[t]}},r=function(){return!0},o=function(){return!1},a=function(t){return function(){return!t.apply(t,arguments)}},s=function(t,e){return function(n){return t(n)&&e(n)}},l=function(t){return t},u=0,c=function(t){var e=++u+"";return t?t+e:e},d=function(e){var n=t(document);return{top:e.top+n.scrollTop(),left:e.left+n.scrollLeft(),width:e.right-e.left,height:e.bottom-e.top}},h=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e},f=function(t,e){return e=e||"",e+t.split(".").map(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}).join("")};return{eq:e,eq2:n,peq2:i,ok:r,fail:o,self:l,not:a,and:s,uniqueId:c,rect2bnd:d,invertObject:h,namespaceToCamel:f}}(),s=function(){var e=function(t){return t[0]},n=function(t){return t[t.length-1]},i=function(t){return t.slice(0,t.length-1)},r=function(t){return t.slice(1)},o=function(t,e){for(var n=0,i=t.length;i>n;n++){var r=t[n];if(e(r))return r}},s=function(t,e){for(var n=0,i=t.length;i>n;n++)if(!e(t[n]))return!1;return!0},l=function(e,n){return-1!==t.inArray(n,e)},u=function(t,e){return e=e||a.self,t.reduce(function(t,n){return t+e(n)},0)},c=function(t){for(var e=[],n=-1,i=t.length;++n<i;)e[n]=t[n];return e},d=function(t,i){if(!t.length)return[];var o=r(t);return o.reduce(function(t,e){var r=n(t);return i(n(r),e)?r[r.length]=e:t[t.length]=[e],t},[[e(t)]])},h=function(t){for(var e=[],n=0,i=t.length;i>n;n++)t[n]&&e.push(t[n]);return e},f=function(t){for(var e=[],n=0,i=t.length;i>n;n++)l(e,t[n])||e.push(t[n]);return e},p=function(t,e){var n=t.indexOf(e);return-1===n?null:t[n+1]},m=function(t,e){var n=t.indexOf(e);return-1===n?null:t[n-1]};return{head:e,last:n,initial:i,tail:r,prev:m,next:p,find:o,contains:l,all:s,sum:u,from:c,clusterBy:d,compact:h,unique:f}}(),l=String.fromCharCode(160),u="\ufeff",c=function(){var e=function(e){return e&&t(e).hasClass("note-editable")},n=function(e){return e&&t(e).hasClass("note-control-sizing")},i=function(e){var n;if(e.hasClass("note-air-editor")){var i=s.last(e.attr("id").split("-"));return n=function(e){return function(){return t(e+i)}},{editor:function(){return e},holder:function(){return e.data("holder")},editable:function(){return e},popover:n("#note-popover-"),handle:n("#note-handle-"),dialog:n("#note-dialog-")}}return n=function(t){return function(){return e.find(t)}},{editor:function(){return e},holder:function(){return e.data("holder")},dropzone:n(".note-dropzone"),toolbar:n(".note-toolbar"),editable:n(".note-editable"),codable:n(".note-codable"),statusbar:n(".note-statusbar"),popover:n(".note-popover"),handle:n(".note-handle"),dialog:n(".note-dialog")}},r=function(e){var n=t(e).closest(".note-editor, .note-air-editor, .note-air-layout");if(!n.length)return null;var r;return r=n.is(".note-editor, .note-air-editor")?n:t("#note-editor-"+s.last(n.attr("id").split("-"))),i(r)},d=function(t){return t=t.toUpperCase(),function(e){return e&&e.nodeName.toUpperCase()===t}},h=function(t){return t&&3===t.nodeType},f=function(t){return t&&/^BR|^IMG|^HR/.test(t.nodeName.toUpperCase())},p=function(t){return e(t)?!1:t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase())},m=d("LI"),v=function(t){return p(t)&&!m(t)},g=d("TABLE"),y=function(t){return!(k(t)||b(t)||p(t)||g(t)||x(t))},b=function(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())},w=function(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())},x=d("BLOCKQUOTE"),k=function(t){return w(t)||x(t)||e(t)},C=d("A"),T=function(t){return y(t)&&!!E(t,p)},S=function(t){return y(t)&&!E(t,p)},D=d("BODY"),M=function(t,e){return t.nextSibling===e||t.previousSibling===e},A=function(t,e){e=e||a.ok;var n=[];return t.previousSibling&&e(t.previousSibling)&&n.push(t.previousSibling),n.push(t),t.nextSibling&&e(t.nextSibling)&&n.push(t.nextSibling),n},L=o.isMSIE?"&nbsp;":"<br>",F=function(t){return h(t)?t.nodeValue.length:t.childNodes.length},N=function(t){var e=F(t);return 0===e?!0:c.isText(t)||1!==e||t.innerHTML!==L?!1:!0},_=function(t){f(t)||F(t)||(t.innerHTML=L)},E=function(t,n){for(;t;){if(n(t))return t;if(e(t))break;t=t.parentNode}return null},I=function(t,n){for(t=t.parentNode;t&&1===F(t);){if(n(t))return t;if(e(t))break;t=t.parentNode}return null},O=function(t,n){n=n||a.fail;var i=[];return E(t,function(t){return e(t)||i.push(t),n(t)}),i},P=function(t,e){var n=O(t);return s.last(n.filter(e))},H=function(e,n){for(var i=O(e),r=n;r;r=r.parentNode)if(t.inArray(r,i)>-1)return r;return null},R=function(t,e){e=e||a.fail;for(var n=[];t&&!e(t);)n.push(t),t=t.previousSibling;return n},U=function(t,e){e=e||a.fail;for(var n=[];t&&!e(t);)n.push(t),t=t.nextSibling;return n},$=function(t,e){var n=[];return e=e||a.ok,function i(r){t!==r&&e(r)&&n.push(r);for(var o=0,a=r.childNodes.length;a>o;o++)i(r.childNodes[o])}(t),n},j=function(e,n){var i=e.parentNode,r=t("<"+n+">")[0];return i.insertBefore(r,e),r.appendChild(e),r},B=function(t,e){var n=e.nextSibling,i=e.parentNode;return n?i.insertBefore(t,n):i.appendChild(t),t},V=function(e,n){return t.each(n,function(t,n){e.appendChild(n)}),e},W=function(t){return 0===t.offset},z=function(t){return t.offset===F(t.node)},q=function(t){return W(t)||z(t)},Y=function(t,e){for(;t&&t!==e;){if(0!==G(t))return!1;t=t.parentNode}return!0},K=function(t,e){for(;t&&t!==e;){if(G(t)!==F(t.parentNode)-1)return!1;t=t.parentNode}return!0},G=function(t){for(var e=0;t=t.previousSibling;)e+=1;return e},J=function(t){return!!(t&&t.childNodes&&t.childNodes.length)},X=function(t,n){var i,r;if(0===t.offset){if(e(t.node))return null;i=t.node.parentNode,r=G(t.node)}else J(t.node)?(i=t.node.childNodes[t.offset-1],r=F(i)):(i=t.node,r=n?0:t.offset-1);return{node:i,offset:r}},Z=function(t,n){var i,r;if(F(t.node)===t.offset){if(e(t.node))return null;i=t.node.parentNode,r=G(t.node)+1}else J(t.node)?(i=t.node.childNodes[t.offset],r=0):(i=t.node,r=n?F(t.node):t.offset+1);return{node:i,offset:r}},Q=function(t,e){return t.node===e.node&&t.offset===e.offset},tt=function(t){if(h(t.node)||!J(t.node)||N(t.node))return!0;var e=t.node.childNodes[t.offset-1],n=t.node.childNodes[t.offset];return e&&!f(e)||n&&!f(n)?!1:!0},et=function(t,e){for(;t;){if(e(t))return t;t=X(t)}return null},nt=function(t,e){for(;t;){if(e(t))return t;t=Z(t)}return null},it=function(t){if(!h(t.node))return!1;var e=t.node.nodeValue.charAt(t.offset-1);return e&&" "!==e&&e!==l},rt=function(t,e,n,i){for(var r=t;r&&(n(r),!Q(r,e));){var o=i&&t.node!==r.node&&e.node!==r.node;r=Z(r,o)}},ot=function(e,n){var i=O(n,a.eq(e));return t.map(i,G).reverse()},at=function(t,e){for(var n=t,i=0,r=e.length;r>i;i++)n=n.childNodes.length<=e[i]?n.childNodes[n.childNodes.length-1]:n.childNodes[e[i]];return n},st=function(t,e){var n=e&&e.isSkipPaddingBlankHTML,i=e&&e.isNotSplitEdgePoint;if(q(t)&&(h(t.node)||i)){if(W(t))return t.node;if(z(t))return t.node.nextSibling}if(h(t.node))return t.node.splitText(t.offset);var r=t.node.childNodes[t.offset],o=B(t.node.cloneNode(!1),t.node);return V(o,U(r)),n||(_(t.node),_(o)),o},lt=function(t,e,n){var i=O(e.node,a.eq(t));return i.length?1===i.length?st(e,n):i.reduce(function(t,i){return t===e.node&&(t=st(e,n)),st({node:i,offset:t?c.position(t):F(i)},n)}):null},ut=function(t,e){var n,i,r=e?p:k,o=O(t.node,r),a=s.last(o)||t.node;r(a)?(n=o[o.length-2],i=a):(n=a,i=n.parentNode);var l=n&&lt(n,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});return l||i!==t.node||(l=t.node.childNodes[t.offset]),{rightNode:l,container:i}},ct=function(t){return document.createElement(t)},dt=function(t){return document.createTextNode(t)},ht=function(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var n=t.parentNode;if(!e){var i,r,o=[];for(i=0,r=t.childNodes.length;r>i;i++)o.push(t.childNodes[i]);for(i=0,r=o.length;r>i;i++)n.insertBefore(o[i],t)}n.removeChild(t)}},ft=function(t,n){for(;t&&!e(t)&&n(t);){var i=t.parentNode;ht(t),t=i}},pt=function(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase())return t;var n=ct(e);return t.style.cssText&&(n.style.cssText=t.style.cssText),V(n,s.from(t.childNodes)),B(n,t),ht(t),n},mt=d("TEXTAREA"),vt=function(t,e){var n=mt(t[0])?t.val():t.html();return e?n.replace(/[\n\r]/g,""):n},gt=function(e,n){var i=vt(e);if(n){var r=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;i=i.replace(r,function(t,e,n){n=n.toUpperCase();var i=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!e,r=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return t+(i||r?"\n":"")}),i=t.trim(i)}return i};return{NBSP_CHAR:l,ZERO_WIDTH_NBSP_CHAR:u,blank:L,emptyPara:"<p>"+L+"</p>",makePredByNodeName:d,isEditable:e,isControlSizing:n,buildLayoutInfo:i,makeLayoutInfo:r,isText:h,isVoid:f,isPara:p,isPurePara:v,isInline:y,isBlock:a.not(y),isBodyInline:S,isBody:D,isParaInline:T,isList:b,isTable:g,isCell:w,isBlockquote:x,isBodyContainer:k,isAnchor:C,isDiv:d("DIV"),isLi:m,isBR:d("BR"),isSpan:d("SPAN"),isB:d("B"),isU:d("U"),isS:d("S"),isI:d("I"),isImg:d("IMG"),isTextarea:mt,isEmpty:N,isEmptyAnchor:a.and(C,N),isClosestSibling:M,withClosestSiblings:A,nodeLength:F,isLeftEdgePoint:W,isRightEdgePoint:z,isEdgePoint:q,isLeftEdgeOf:Y,isRightEdgeOf:K,prevPoint:X,nextPoint:Z,isSamePoint:Q,isVisiblePoint:tt,prevPointUntil:et,nextPointUntil:nt,isCharPoint:it,walkPoint:rt,ancestor:E,singleChildAncestor:I,listAncestor:O,lastAncestor:P,listNext:U,listPrev:R,listDescendant:$,commonAncestor:H,wrap:j,insertAfter:B,appendChildNodes:V,position:G,hasChildren:J,makeOffsetPath:ot,fromOffsetPath:at,splitTree:lt,splitPoint:ut,create:ct,createText:dt,remove:ht,removeWhile:ft,replace:pt,html:gt,value:vt}}(),d=function(){var e=function(t,e){var n,i,r=t.parentElement(),o=document.body.createTextRange(),a=s.from(r.childNodes);for(n=0;n<a.length;n++)if(!c.isText(a[n])){if(o.moveToElementText(a[n]),o.compareEndPoints("StartToStart",t)>=0)break;i=a[n]}if(0!==n&&c.isText(a[n-1])){var l=document.body.createTextRange(),u=null;l.moveToElementText(i||r),l.collapse(!i),u=i?i.nextSibling:r.firstChild;var d=t.duplicate();d.setEndPoint("StartToStart",l);for(var h=d.text.replace(/[\r\n]/g,"").length;h>u.nodeValue.length&&u.nextSibling;)h-=u.nodeValue.length,u=u.nextSibling;{u.nodeValue}e&&u.nextSibling&&c.isText(u.nextSibling)&&h===u.nodeValue.length&&(h-=u.nodeValue.length,u=u.nextSibling),r=u,n=h}return{cont:r,offset:n}},n=function(t){var e=function(t,n){var i,r;if(c.isText(t)){var o=c.listPrev(t,a.not(c.isText)),l=s.last(o).previousSibling;i=l||t.parentNode,n+=s.sum(s.tail(o),c.nodeLength),r=!l}else{if(i=t.childNodes[n]||t,c.isText(i))return e(i,0);n=0,r=!1}return{node:i,collapseToStart:r,offset:n}},n=document.body.createTextRange(),i=e(t.node,t.offset);return n.moveToElementText(i.node),n.collapse(i.collapseToStart),n.moveStart("character",i.offset),n},i=function(e,r,l,u){this.sc=e,this.so=r,this.ec=l,this.eo=u;var d=function(){if(o.isW3CRangeSupport){var t=document.createRange();return t.setStart(e,r),t.setEnd(l,u),t}var i=n({node:e,offset:r});return i.setEndPoint("EndToEnd",n({node:l,offset:u})),i};this.getPoints=function(){return{sc:e,so:r,ec:l,eo:u}},this.getStartPoint=function(){return{node:e,offset:r}},this.getEndPoint=function(){return{node:l,offset:u}},this.select=function(){var t=d();if(o.isW3CRangeSupport){var e=document.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(t)}else t.select();return this},this.normalize=function(){var t=function(t){return c.isVisiblePoint(t)||(t=c.isLeftEdgePoint(t)?c.nextPointUntil(t,c.isVisiblePoint):c.prevPointUntil(t,c.isVisiblePoint)),t},e=t(this.getStartPoint()),n=t(this.getEndPoint());return new i(e.node,e.offset,n.node,n.offset)},this.nodes=function(t,e){t=t||a.ok;var n=e&&e.includeAncestor,i=e&&e.fullyContains,r=this.getStartPoint(),o=this.getEndPoint(),l=[],u=[];return c.walkPoint(r,o,function(e){if(!c.isEditable(e.node)){var r;i?(c.isLeftEdgePoint(e)&&u.push(e.node),c.isRightEdgePoint(e)&&s.contains(u,e.node)&&(r=e.node)):r=n?c.ancestor(e.node,t):e.node,r&&t(r)&&l.push(r)}},!0),s.unique(l)},this.commonAncestor=function(){return c.commonAncestor(e,l)},this.expand=function(t){var n=c.ancestor(e,t),o=c.ancestor(l,t);if(!n&&!o)return new i(e,r,l,u);var a=this.getPoints();return n&&(a.sc=n,a.so=0),o&&(a.ec=o,a.eo=c.nodeLength(o)),new i(a.sc,a.so,a.ec,a.eo)},this.collapse=function(t){return t?new i(e,r,e,r):new i(l,u,l,u)},this.splitText=function(){var t=e===l,n=this.getPoints();return c.isText(l)&&!c.isEdgePoint(this.getEndPoint())&&l.splitText(u),c.isText(e)&&!c.isEdgePoint(this.getStartPoint())&&(n.sc=e.splitText(r),n.so=0,t&&(n.ec=n.sc,n.eo=u-r)),new i(n.sc,n.so,n.ec,n.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var e=this.splitText(),n=e.nodes(null,{fullyContains:!0}),r=c.prevPointUntil(e.getStartPoint(),function(t){return!s.contains(n,t.node)}),o=[];return t.each(n,function(t,e){var n=e.parentNode;r.node!==n&&1===c.nodeLength(n)&&o.push(n),c.remove(e,!1)}),t.each(o,function(t,e){c.remove(e,!1)}),new i(r.node,r.offset,r.node,r.offset).normalize()};var h=function(t){return function(){var n=c.ancestor(e,t);return!!n&&n===c.ancestor(l,t)}};this.isOnEditable=h(c.isEditable),this.isOnList=h(c.isList),this.isOnAnchor=h(c.isAnchor),this.isOnCell=h(c.isCell),this.isLeftEdgeOf=function(t){if(!c.isLeftEdgePoint(this.getStartPoint()))return!1;var e=c.ancestor(this.sc,t);return e&&c.isLeftEdgeOf(this.sc,e)},this.isCollapsed=function(){return e===l&&r===u},this.wrapBodyInlineWithPara=function(){if(c.isBodyContainer(e)&&c.isEmpty(e))return e.innerHTML=c.emptyPara,new i(e.firstChild,0,e.firstChild,0);if(c.isParaInline(e)||c.isPara(e))return this.normalize();var t;if(c.isInline(e)){var n=c.listAncestor(e,a.not(c.isInline));t=s.last(n),c.isInline(t)||(t=n[n.length-2]||e.childNodes[r])}else t=e.childNodes[r>0?r-1:0];var o=c.listPrev(t,c.isParaInline).reverse();if(o=o.concat(c.listNext(t.nextSibling,c.isParaInline)),o.length){var l=c.wrap(s.head(o),"p");c.appendChildNodes(l,s.tail(o))}return this.normalize()},this.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents(),n=c.splitPoint(e.getStartPoint(),c.isInline(t));return n.rightNode?n.rightNode.parentNode.insertBefore(t,n.rightNode):n.container.appendChild(t),t},this.pasteHTML=function(e){var n=this,i=t("<div></div>").html(e)[0],r=s.from(i.childNodes);return this.wrapBodyInlineWithPara().deleteContents(),t.map(r.reverse(),function(t){return n.insertNode(t)}).reverse()},this.toString=function(){var t=d();return o.isW3CRangeSupport?t.toString():t.text},this.getWordRange=function(t){var e=this.getEndPoint();if(!c.isCharPoint(e))return this;var n=c.prevPointUntil(e,function(t){return!c.isCharPoint(t)});return t&&(e=c.nextPointUntil(e,function(t){return!c.isCharPoint(t)})),new i(n.node,n.offset,e.node,e.offset)},this.bookmark=function(t){return{s:{path:c.makeOffsetPath(t,e),offset:r},e:{path:c.makeOffsetPath(t,l),offset:u}}},this.paraBookmark=function(t){return{s:{path:s.tail(c.makeOffsetPath(s.head(t),e)),offset:r},e:{path:s.tail(c.makeOffsetPath(s.last(t),l)),offset:u}}},this.getClientRects=function(){var t=d();return t.getClientRects()}};return{create:function(t,n,r,a){if(arguments.length)2===arguments.length&&(r=t,a=n);else if(o.isW3CRangeSupport){var s=document.getSelection();if(0===s.rangeCount)return null;if(c.isBody(s.anchorNode))return null;var l=s.getRangeAt(0);t=l.startContainer,n=l.startOffset,r=l.endContainer,a=l.endOffset}else{var u=document.selection.createRange(),d=u.duplicate();d.collapse(!1);var h=u;h.collapse(!0);var f=e(h,!0),p=e(d,!1);c.isText(f.node)&&c.isLeftEdgePoint(f)&&c.isTextNode(p.node)&&c.isRightEdgePoint(p)&&p.node.nextSibling===f.node&&(f=p),t=f.cont,n=f.offset,r=p.cont,a=p.offset}return new i(t,n,r,a)},createFromNode:function(t){var e=t,n=0,i=t,r=c.nodeLength(i);return c.isVoid(e)&&(n=c.listPrev(e).length-1,e=e.parentNode),c.isBR(i)?(r=c.listPrev(i).length-1,i=i.parentNode):c.isVoid(i)&&(r=c.listPrev(i).length,i=i.parentNode),this.create(e,n,i,r)},createFromBookmark:function(t,e){var n=c.fromOffsetPath(t,e.s.path),r=e.s.offset,o=c.fromOffsetPath(t,e.e.path),a=e.e.offset;return new i(n,r,o,a)},createFromParaBookmark:function(t,e){var n=t.s.offset,r=t.e.offset,o=c.fromOffsetPath(s.head(e),t.s.path),a=c.fromOffsetPath(s.last(e),t.e.path);return new i(o,n,a,r)}}}(),h={version:"0.6.6",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,shortcuts:!0,placeholder:!1,prettifyHtml:!0,iconPrefix:"fa fa-",codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(t){return-1!==t.indexOf("@")&&-1===t.indexOf(":")?t="mailto:"+t:-1===t.indexOf("://")&&(t="http://"+t),t},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}}},f=function(){var e=function(e){return t.Deferred(function(n){t.extend(new FileReader,{onload:function(t){var e=t.target.result;n.resolve(e)},onerror:function(){n.reject(this)}}).readAsDataURL(e)}).promise()},n=function(e,n){return t.Deferred(function(i){var r=t("<img>");r.one("load",function(){r.off("error abort"),i.resolve(r)}).one("error abort",function(){r.off("load").detach(),i.reject(r)}).css({display:"none"}).appendTo(document.body).attr({src:e,"data-filename":n})}).promise()};return{readFileAsDataURL:e,createImage:n}}(),p=function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(t){return s.contains([8,9,13,32],t)},nameFromCode:a.invertObject(t),code:t}}(),m=function(t){var e=[],n=-1,i=t[0],r=function(){var e=d.create(),n={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:t.html(),bookmark:e?e.bookmark(i):n}},o=function(e){null!==e.contents&&t.html(e.contents),null!==e.bookmark&&d.createFromBookmark(i,e.bookmark).select()};this.undo=function(){n>0&&(n--,o(e[n]))},this.redo=function(){e.length-1>n&&(n++,o(e[n]))},this.recordUndo=function(){n++,e.length>n&&(e=e.slice(0,n)),e.push(r())},this.recordUndo()},v=function(){var e=function(e,n){if(o.jqueryVersion<1.9){var i={};return t.each(n,function(t,n){i[n]=e.css(n)}),i}return e.css.call(e,n)};this.stylePara=function(e,n){t.each(e.nodes(c.isPara,{includeAncestor:!0}),function(e,i){t(i).css(n)})},this.styleNodes=function(e,n){e=e.splitText();var i=n&&n.nodeName||"SPAN",r=!(!n||!n.expandClosestSibling),o=!(!n||!n.onlyPartialContains);if(e.isCollapsed())return e.insertNode(c.create(i));var l=c.makePredByNodeName(i),u=t.map(e.nodes(c.isText,{fullyContains:!0}),function(t){return c.singleChildAncestor(t,l)||c.wrap(t,i)});if(r){if(o){var d=e.nodes();l=a.and(l,function(t){return s.contains(d,t)})}return t.map(u,function(e){var n=c.withClosestSiblings(e,l),i=s.head(n),r=s.tail(n);return t.each(r,function(t,e){c.appendChildNodes(i,e.childNodes),c.remove(e)}),s.head(n)})}return u},this.current=function(n,i){var r=t(c.isText(n.sc)?n.sc.parentNode:n.sc),o=["font-family","font-size","text-align","list-style-type","line-height"],a=e(r,o)||{};if(a["font-size"]=parseInt(a["font-size"],10),a["font-bold"]=document.queryCommandState("bold")?"bold":"normal",a["font-italic"]=document.queryCommandState("italic")?"italic":"normal",a["font-underline"]=document.queryCommandState("underline")?"underline":"normal",a["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",a["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal",a["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal",n.isOnList()){var s=["circle","disc","disc-leading-zero","square"],l=t.inArray(a["list-style-type"],s)>-1;a["list-style"]=l?"unordered":"ordered"}else a["list-style"]="none";var u=c.ancestor(n.sc,c.isPara);if(u&&u.style["line-height"])a["line-height"]=u.style.lineHeight;else{var d=parseInt(a["line-height"],10)/parseInt(a["font-size"],10);a["line-height"]=d.toFixed(1)}return a.image=c.isImg(i)&&i,a.anchor=n.isOnAnchor()&&c.ancestor(n.sc,c.isAnchor),a.ancestors=c.listAncestor(n.sc,c.isEditable),a.range=n,a}},g=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var e=this,n=d.create().wrapBodyInlineWithPara(),i=n.nodes(c.isPara,{includeAncestor:!0}),r=s.clusterBy(i,a.peq2("parentNode"));t.each(r,function(n,i){var r=s.head(i);c.isLi(r)?e.wrapList(i,r.parentNode.nodeName):t.each(i,function(e,n){t(n).css("marginLeft",function(t,e){return(parseInt(e,10)||0)+25})})}),n.select()},this.outdent=function(){var e=this,n=d.create().wrapBodyInlineWithPara(),i=n.nodes(c.isPara,{includeAncestor:!0}),r=s.clusterBy(i,a.peq2("parentNode"));t.each(r,function(n,i){var r=s.head(i);c.isLi(r)?e.releaseList([i]):t.each(i,function(e,n){t(n).css("marginLeft",function(t,e){return e=parseInt(e,10)||0,e>25?e-25:""})})}),n.select()},this.toggleList=function(e){var n=this,i=d.create().wrapBodyInlineWithPara(),r=i.nodes(c.isPara,{includeAncestor:!0}),o=i.paraBookmark(r),l=s.clusterBy(r,a.peq2("parentNode"));if(s.find(r,c.isPurePara)){var u=[];t.each(l,function(t,i){u=u.concat(n.wrapList(i,e))}),r=u}else{var h=i.nodes(c.isList,{includeAncestor:!0}).filter(function(n){return!t.nodeName(n,e)});h.length?t.each(h,function(t,n){c.replace(n,e)}):r=this.releaseList(l,!0)}d.createFromParaBookmark(o,r).select()},this.wrapList=function(e,n){var i=s.head(e),r=s.last(e),o=c.isList(i.previousSibling)&&i.previousSibling,a=c.isList(r.nextSibling)&&r.nextSibling,l=o||c.insertAfter(c.create(n||"UL"),r);return e=t.map(e,function(t){return c.isPurePara(t)?c.replace(t,"LI"):t}),c.appendChildNodes(l,e),a&&(c.appendChildNodes(l,s.from(a.childNodes)),c.remove(a)),e},this.releaseList=function(e,n){var i=[];return t.each(e,function(e,r){var o=s.head(r),a=s.last(r),l=n?c.lastAncestor(o,c.isList):o.parentNode,u=l.childNodes.length>1?c.splitTree(l,{node:a.parentNode,offset:c.position(a)+1},{isSkipPaddingBlankHTML:!0}):null,d=c.splitTree(l,{node:o.parentNode,offset:c.position(o)},{isSkipPaddingBlankHTML:!0});r=n?c.listDescendant(d,c.isLi):s.from(d.childNodes).filter(c.isLi),(n||!c.isList(l.parentNode))&&(r=t.map(r,function(t){return c.replace(t,"P")})),t.each(s.from(r).reverse(),function(t,e){c.insertAfter(e,l)});var h=s.compact([l,d,u]);t.each(h,function(e,n){var i=[n].concat(c.listDescendant(n,c.isList));t.each(i.reverse(),function(t,e){c.nodeLength(e)||c.remove(e,!0)})}),i=i.concat(r)}),i}},y=function(){var e=new g;this.insertTab=function(t,e,n){var i=c.createText(new Array(n+1).join(c.NBSP_CHAR));e=e.deleteContents(),e.insertNode(i,!0),e=d.create(i,n),e.select()},this.insertParagraph=function(){var n=d.create();n=n.deleteContents(),n=n.wrapBodyInlineWithPara();var i,r=c.ancestor(n.sc,c.isPara);if(r){if(c.isEmpty(r)&&c.isLi(r))return void e.toggleList(r.parentNode.nodeName);i=c.splitTree(r,n.getStartPoint());var o=c.listDescendant(r,c.isEmptyAnchor);o=o.concat(c.listDescendant(i,c.isEmptyAnchor)),t.each(o,function(t,e){c.remove(e)})}else{var a=n.sc.childNodes[n.so];i=t(c.emptyPara)[0],a?n.sc.insertBefore(i,a):n.sc.appendChild(i)}d.create(i,0).normalize().select()}},b=function(){this.tab=function(t,e){var n=c.ancestor(t.commonAncestor(),c.isCell),i=c.ancestor(n,c.isTable),r=c.listDescendant(i,c.isCell),o=s[e?"prev":"next"](r,n);o&&d.create(o,0).select()},this.createTable=function(e,n){for(var i,r=[],o=0;e>o;o++)r.push("<td>"+c.blank+"</td>");i=r.join("");for(var a,s=[],l=0;n>l;l++)s.push("<tr>"+i+"</tr>");return a=s.join(""),t('<table class="table table-bordered">'+a+"</table>")[0]}},w=function(e){var n=new v,i=new b,r=new y,a=new g;this.createRange=function(t){return t.focus(),d.create()},this.saveRange=function(t,e){t.focus(),t.data("range",d.create()),e&&d.create().collapse().select()},this.saveNode=function(t){for(var e=[],n=0,i=t[0].childNodes.length;i>n;n++)e.push(t[0].childNodes[n]);t.data("childNodes",e)},this.restoreRange=function(t){var e=t.data("range");e&&(e.select(),t.focus())},this.restoreNode=function(t){t.html("");for(var e=t.data("childNodes"),n=0,i=e.length;i>n;n++)t[0].appendChild(e[n])},this.currentStyle=function(t){var e=d.create();return e?e.isOnEditable()&&n.current(e,t):!1};var l=function(t){var n=c.makeLayoutInfo(t).holder();e.bindCustomEvent(n,t.data("callbacks"),"before.command")(t.html(),t)},u=function(t){var n=c.makeLayoutInfo(t).holder();e.bindCustomEvent(n,t.data("callbacks"),"change")(t.html(),t)};this.undo=function(t){l(t),t.data("NoteHistory").undo(),u(t)},this.redo=function(t){l(t),t.data("NoteHistory").redo(),u(t)};for(var h=this.beforeCommand=function(t){l(t)},p=this.afterCommand=function(t,e){t.data("NoteHistory").recordUndo(),e||u(t)},m=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule","fontName"],w=0,x=m.length;x>w;w++)this[m[w]]=function(t){return function(e,n){h(e),document.execCommand(t,!1,n),p(e,!0)}}(m[w]);this.tab=function(t,e){var n=d.create();n.isCollapsed()&&n.isOnCell()?i.tab(n):(h(t),r.insertTab(t,n,e.tabsize),p(t))},this.untab=function(){var t=d.create();t.isCollapsed()&&t.isOnCell()&&i.tab(t,!0)},this.insertParagraph=function(t){h(t),r.insertParagraph(t),p(t)},this.insertOrderedList=function(t){h(t),a.insertOrderedList(t),p(t)},this.insertUnorderedList=function(t){h(t),a.insertUnorderedList(t),p(t)},this.indent=function(t){h(t),a.indent(t),p(t)},this.outdent=function(t){h(t),a.outdent(t),p(t)},this.insertImage=function(t,e,n){f.createImage(e,n).then(function(e){h(t),e.css({display:"",width:Math.min(t.width(),e.width())}),d.create().insertNode(e[0]),d.createFromNode(e[0]).collapse().select(),p(t)}).fail(function(){var e=t.data("callbacks");e.onImageUploadError&&e.onImageUploadError()})},this.insertNode=function(t,e){h(t);var n=this.createRange(t);n.insertNode(e),d.createFromNode(e).collapse().select(),p(t)},this.insertText=function(t,e){h(t);var n=this.createRange(t),i=n.insertNode(c.createText(e));d.create(i,c.nodeLength(i)).select(),p(t)},this.pasteHTML=function(t,e){h(t);var n=this.createRange(t),i=n.pasteHTML(e);d.createFromNode(s.last(i)).collapse().select(),p(t)},this.formatBlock=function(t,e){h(t),e=o.isMSIE?"<"+e+">":e,document.execCommand("FormatBlock",!1,e),p(t)},this.formatPara=function(t){h(t),this.formatBlock(t,"P"),p(t)};for(var w=1;6>=w;w++)this["formatH"+w]=function(t){return function(e){this.formatBlock(e,"H"+t)}}(w);this.fontSize=function(e,i){h(e);var r=this.createRange(e),o=n.styleNodes(r);t.each(o,function(e,n){t(n).css({"font-size":i+"px"})}),p(e)},this.lineHeight=function(t,e){h(t),n.stylePara(d.create(),{lineHeight:e
}),p(t)},this.unlink=function(t){var e=d.create();if(e.isOnAnchor()){var n=c.ancestor(e.sc,c.isAnchor);e=d.createFromNode(n),e.select(),h(t),document.execCommand("unlink"),p(t)}},this.createLink=function(e,i,r){var o=i.url,a=i.text,l=i.newWindow,u=i.range,c=u.toString()!==a;h(e),r.onCreateLink&&(o=r.onCreateLink(o));var f;if(c){var m=u.insertNode(t("<A>"+a+"</A>")[0]);f=[m]}else f=n.styleNodes(u,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});t.each(f,function(e,n){t(n).attr("href",o),l?t(n).attr("target","_blank"):t(n).removeAttr("target")});var v=d.createFromNode(s.head(f)).collapse(!0),g=v.getStartPoint(),y=d.createFromNode(s.last(f)).collapse(),b=y.getEndPoint();d.create(g.node,g.offset,b.node,b.offset).select(),p(e)},this.getLinkInfo=function(e){e.focus();var n=d.create().expand(c.isAnchor),i=t(s.head(n.nodes(c.isAnchor)));return{range:n,text:n.toString(),isNewWindow:i.length?"_blank"===i.attr("target"):!1,url:i.length?i.attr("href"):""}},this.color=function(t,e){var n=JSON.parse(e),i=n.foreColor,r=n.backColor;h(t),i&&document.execCommand("foreColor",!1,i),r&&document.execCommand("backColor",!1,r),p(t)},this.insertTable=function(t,e){var n=e.split("x");h(t);var r=d.create();r=r.deleteContents(),r.insertNode(i.createTable(n[0],n[1])),p(t)},this.floatMe=function(t,e,n){h(t),n.css("float",e),p(t)},this.imageShape=function(t,e,n){h(t),n.removeClass("img-rounded img-circle img-thumbnail"),e&&n.addClass(e),p(t)},this.resize=function(t,e,n){h(t),n.css({width:100*e+"%",height:""}),p(t)},this.resizeTo=function(t,e,n){var i;if(n){var r=t.y/t.x,o=e.data("ratio");i={width:o>r?t.x:t.y/o,height:o>r?t.x*o:t.y}}else i={width:t.x,height:t.y};e.css(i)},this.removeMedia=function(n,i,r){h(n),r.detach(),e.bindCustomEvent(t(),n.data("callbacks"),"media.delete").call(r,this.$editable),p(n)},this.focus=function(t){t.focus(),o.isFF&&d.createFromNode(t[0].firstChild||t[0]).collapse().select()}},x=function(){this.update=function(e,n){var i=function(e,n){e.find(".dropdown-menu li a").each(function(){var e=t(this).data("value")+""==n+"";this.className=e?"checked":""})},r=function(t,n){var i=e.find(t);i.toggleClass("active",n())};if(n.image){var a=t(n.image);r('button[data-event="imageShape"][data-value="img-rounded"]',function(){return a.hasClass("img-rounded")}),r('button[data-event="imageShape"][data-value="img-circle"]',function(){return a.hasClass("img-circle")}),r('button[data-event="imageShape"][data-value="img-thumbnail"]',function(){return a.hasClass("img-thumbnail")}),r('button[data-event="imageShape"]:not([data-value])',function(){return!a.is(".img-rounded, .img-circle, .img-thumbnail")});var s=a.css("float");r('button[data-event="floatMe"][data-value="left"]',function(){return"left"===s}),r('button[data-event="floatMe"][data-value="right"]',function(){return"right"===s}),r('button[data-event="floatMe"][data-value="none"]',function(){return"left"!==s&&"right"!==s});var l=a.attr("style");return r('button[data-event="resize"][data-value="1"]',function(){return!!/(^|\s)(max-)?width\s*:\s*100%/.test(l)}),r('button[data-event="resize"][data-value="0.5"]',function(){return!!/(^|\s)(max-)?width\s*:\s*50%/.test(l)}),void r('button[data-event="resize"][data-value="0.25"]',function(){return!!/(^|\s)(max-)?width\s*:\s*25%/.test(l)})}var u=e.find(".note-fontname");if(u.length){var c=n["font-family"];if(c){for(var d=c.split(","),h=0,f=d.length;f>h&&(c=d[h].replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,""),!o.isFontInstalled(c));h++);u.find(".note-current-fontname").text(c),i(u,c)}}var p=e.find(".note-fontsize");p.find(".note-current-fontsize").text(n["font-size"]),i(p,parseFloat(n["font-size"]));var m=e.find(".note-height");i(m,parseFloat(n["line-height"])),r('button[data-event="bold"]',function(){return"bold"===n["font-bold"]}),r('button[data-event="italic"]',function(){return"italic"===n["font-italic"]}),r('button[data-event="underline"]',function(){return"underline"===n["font-underline"]}),r('button[data-event="strikethrough"]',function(){return"strikethrough"===n["font-strikethrough"]}),r('button[data-event="superscript"]',function(){return"superscript"===n["font-superscript"]}),r('button[data-event="subscript"]',function(){return"subscript"===n["font-subscript"]}),r('button[data-event="justifyLeft"]',function(){return"left"===n["text-align"]||"start"===n["text-align"]}),r('button[data-event="justifyCenter"]',function(){return"center"===n["text-align"]}),r('button[data-event="justifyRight"]',function(){return"right"===n["text-align"]}),r('button[data-event="justifyFull"]',function(){return"justify"===n["text-align"]}),r('button[data-event="insertUnorderedList"]',function(){return"unordered"===n["list-style"]}),r('button[data-event="insertOrderedList"]',function(){return"ordered"===n["list-style"]})},this.updateRecentColor=function(e,n,i){var r=t(e).closest(".note-color"),o=r.find(".note-recent-color"),a=JSON.parse(o.attr("data-value"));a[n]=i,o.attr("data-value",JSON.stringify(a));var s="backColor"===n?"background-color":"color";o.find("i").css(s,i)}},k=function(){var t=new x;this.update=function(e,n){t.update(e,n)},this.updateRecentColor=function(e,n,i){t.updateRecentColor(e,n,i)},this.activate=function(t){t.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(t){t.find("button").not('button[data-event="codeview"]').addClass("disabled")},this.updateFullscreen=function(t,e){var n=t.find('button[data-event="fullscreen"]');n.toggleClass("active",e)},this.updateCodeview=function(t,e){var n=t.find('button[data-event="codeview"]');n.toggleClass("active",e),e?this.deactivate(t):this.activate(t)},this.get=function(t,e){var n=c.makeLayoutInfo(t).toolbar();return n.find("[data-name="+e+"]")},this.setButtonState=function(t,e,n){n=n===!1?!1:!0;var i=this.get(t,e);i.toggleClass("active",n)}},C=24,T=function(){var e=t(document);this.attach=function(t,e){e.disableResizeEditor||t.statusbar().on("mousedown",n)};var n=function(t){t.preventDefault(),t.stopPropagation();var n=c.makeLayoutInfo(t.target).editable(),i=n.offset().top-e.scrollTop(),r=c.makeLayoutInfo(t.currentTarget||t.target),o=r.editor().data("options");e.on("mousemove",function(t){var e=t.clientY-(i+C);e=o.minHeight>0?Math.max(e,o.minHeight):e,e=o.maxHeight>0?Math.min(e,o.maxHeight):e,n.height(e)}).one("mouseup",function(){e.off("mousemove")})}},S=function(){var e=new x,n=function(e,n){var i=t(e),r=n?i.offset():i.position(),o=i.outerHeight(!0);return{left:r.left,top:r.top+o}},i=function(t,e){t.css({display:"block",left:e.left,top:e.top})},r=20;this.update=function(o,l,u){e.update(o,l);var c=o.find(".note-link-popover");if(l.anchor){var d=c.find("a"),h=t(l.anchor).attr("href"),f=t(l.anchor).attr("target");d.attr("href",h).html(h),f?d.attr("target","_blank"):d.removeAttr("target"),i(c,n(l.anchor,u))}else c.hide();var p=o.find(".note-image-popover");l.image?i(p,n(l.image,u)):p.hide();var m=o.find(".note-air-popover");if(u&&!l.range.isCollapsed()){var v=s.last(l.range.getClientRects());if(v){var g=a.rect2bnd(v);i(m,{left:Math.max(g.left+g.width/2-r,0),top:g.top+g.height})}}else m.hide()},this.updateRecentColor=function(t,e,n){t.updateRecentColor(t,e,n)},this.hide=function(t){t.children().hide()}},D=function(e){var n=t(document),i=function(i){if(c.isControlSizing(i.target)){i.preventDefault(),i.stopPropagation();var r=c.makeLayoutInfo(i.target),o=r.handle(),a=r.popover(),s=r.editable(),l=r.editor(),u=o.find(".note-control-selection").data("target"),d=t(u),h=d.offset(),f=n.scrollTop(),p=l.data("options").airMode;n.on("mousemove",function(t){e.invoke("editor.resizeTo",{x:t.clientX-h.left,y:t.clientY-(h.top-f)},d,!t.shiftKey),e.invoke("handle.update",o,{image:u},p),e.invoke("popover.update",a,{image:u},p)}).one("mouseup",function(){n.off("mousemove"),e.invoke("editor.afterCommand",s)}),d.data("ratio")||d.data("ratio",d.height()/d.width())}};this.attach=function(t){t.handle().on("mousedown",i)},this.update=function(e,n,i){var r=e.find(".note-control-selection");if(n.image){var o=t(n.image),a=i?o.offset():o.position(),s={w:o.outerWidth(!0),h:o.outerHeight(!0)};r.css({display:"block",left:a.left,top:a.top,width:s.w,height:s.h}).data("target",n.image);var l=s.w+"x"+s.h;r.find(".note-control-selection-info").text(l)}else r.hide()},this.hide=function(t){t.children().hide()}},M=function(e){var n=t(window),i=t("html, body");this.toggle=function(t){var r=t.editor(),o=t.toolbar(),a=t.editable(),s=t.codable(),l=function(t){a.css("height",t.h),s.css("height",t.h),s.data("cmeditor")&&s.data("cmeditor").setsize(null,t.h)};r.toggleClass("fullscreen");var u=r.hasClass("fullscreen");u?(a.data("orgheight",a.css("height")),n.on("resize",function(){l({h:n.height()-o.outerHeight()})}).trigger("resize"),i.css("overflow","hidden")):(n.off("resize"),l({h:a.data("orgheight")}),i.css("overflow","visible")),e.invoke("toolbar.updateFullscreen",o,u)}};o.hasCodeMirror&&(o.isSupportAmd?n.e(2,function(t){var n=[t(85)];(function(t){e=t}).apply(null,n)}):e=window.CodeMirror);var A=function(t){this.sync=function(e){var n=t.invoke("codeview.isActivated",e);n&&o.hasCodeMirror&&e.codable().data("cmEditor").save()},this.isActivated=function(t){var e=t.editor();return e.hasClass("codeview")},this.toggle=function(t){this.isActivated(t)?this.deactivate(t):this.activate(t)},this.activate=function(n){var i=n.editor(),r=n.toolbar(),a=n.editable(),s=n.codable(),l=n.popover(),u=n.handle(),d=i.data("options");if(s.val(c.html(a,d.prettifyHtml)),s.height(a.height()),t.invoke("toolbar.updateCodeview",r,!0),t.invoke("popover.hide",l),t.invoke("handle.hide",u),i.addClass("codeview"),s.focus(),o.hasCodeMirror){var h=e.fromTextArea(s[0],d.codemirror);if(d.codemirror.tern){var f=new e.TernServer(d.codemirror.tern);h.ternServer=f,h.on("cursorActivity",function(t){f.updateArgHints(t)})}h.setSize(null,a.outerHeight()),s.data("cmEditor",h)}},this.deactivate=function(e){var n=e.holder(),i=e.editor(),r=e.toolbar(),a=e.editable(),s=e.codable(),l=i.data("options");if(o.hasCodeMirror){var u=s.data("cmEditor");s.val(u.getValue()),u.toTextArea()}var d=c.value(s,l.prettifyHtml)||c.emptyPara,h=a.html()!==d;a.html(d),a.height(l.height?s.height():"auto"),i.removeClass("codeview"),h&&t.bindCustomEvent(n,a.data("callbacks"),"change")(a.html(),a),a.focus(),t.invoke("toolbar.updateCodeview",r,!1)}},L=function(e){var n=t(document);this.attach=function(t,e){e.airMode||e.disableDragAndDrop?n.on("drop",function(t){t.preventDefault()}):this.attachDragAndDropEvent(t,e)},this.attachDragAndDropEvent=function(i,r){var o=t(),a=i.editor(),s=i.dropzone(),l=s.find(".note-dropzone-message");n.on("dragenter",function(t){var n=e.invoke("codeview.isActivated",i),u=a.width()>0&&a.height()>0;n||o.length||!u||(a.addClass("dragover"),s.width(a.width()),s.height(a.height()),l.text(r.langInfo.image.dragImageHere)),o=o.add(t.target)}).on("dragleave",function(t){o=o.not(t.target),o.length||a.removeClass("dragover")}).on("drop",function(){o=t(),a.removeClass("dragover")}),s.on("dragenter",function(){s.addClass("hover"),l.text(r.langInfo.image.dropImage)}).on("dragleave",function(){s.removeClass("hover"),l.text(r.langInfo.image.dragImageHere)}),s.on("drop",function(n){n.preventDefault();var i=n.originalEvent.dataTransfer,r=i.getData("text/html"),o=i.getData("text/plain"),a=c.makeLayoutInfo(n.currentTarget||n.target);i&&i.files&&i.files.length?(a.editable().focus(),e.insertImages(a,i.files)):r?t(r).each(function(){a.editable().focus(),e.invoke("editor.insertNode",a.editable(),this)}):o&&(a.editable().focus(),e.invoke("editor.insertText",a.editable(),o))}).on("dragover",!1)}},F=function(t){this.attach=function(t){t.editable().on("paste",e)};var e=function(e){var n=e.originalEvent.clipboardData,i=c.makeLayoutInfo(e.currentTarget||e.target),r=i.editable();if(!n||!n.items||!n.items.length){var o=r.data("callbacks");if(!o.onImageUpload)return;return t.invoke("editor.saveNode",r),t.invoke("editor.saveRange",r),r.html(""),void setTimeout(function(){var e=r.find("img");if(e.length&&-1!==e[0].src.indexOf("data:")){for(var n=e[0].src,o=atob(n.split(",")[1]),a=new Uint8Array(o.length),s=0;s<o.length;s++)a[s]=o.charCodeAt(s);var l=new Blob([a],{type:"image/png"});l.name="clipboard.png",t.invoke("editor.restoreNode",r),t.invoke("editor.restoreRange",r),t.insertImages(i,[l]),t.invoke("editor.afterCommand",r)}else{var u=r.html();t.invoke("editor.restoreNode",r),t.invoke("editor.restoreRange",r),t.invoke("editor.focus",r);try{t.invoke("editor.pasteHTML",r,u)}catch(c){t.invoke("editor.insertText",r,u)}}},0)}var a=s.head(n.items),l="file"===a.kind&&-1!==a.type.indexOf("image/");l&&t.insertImages(i,[a.getAsFile()]),t.invoke("editor.afterCommand",r)}},N=function(e){var n=function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},i=function(t,e){t.on("keypress",function(t){t.keyCode===p.code.ENTER&&e.trigger("click")})};this.showLinkDialog=function(e,r,o){return t.Deferred(function(t){var e=r.find(".note-link-dialog"),a=e.find(".note-link-text"),s=e.find(".note-link-url"),l=e.find(".note-link-btn"),u=e.find("input[type=checkbox]");e.one("shown.bs.modal",function(){a.val(o.text),a.on("input",function(){o.text=a.val()}),o.url||(o.url=o.text,n(l,o.text)),s.on("input",function(){n(l,s.val()),o.text||a.val(s.val())}).val(o.url).trigger("focus").trigger("select"),i(s,l),i(a,l),u.prop("checked",o.newWindow),l.one("click",function(n){n.preventDefault(),t.resolve({range:o.range,url:s.val(),text:a.val(),newWindow:u.is(":checked")}),e.modal("hide")})}).one("hidden.bs.modal",function(){a.off("input keypress"),s.off("input keypress"),l.off("click"),"pending"===t.state()&&t.reject()}).modal("show")}).promise()},this.show=function(t){var n=t.editor(),i=t.dialog(),r=t.editable(),o=t.popover(),a=e.invoke("editor.getLinkInfo",r),s=n.data("options");e.invoke("editor.saveRange",r),this.showLinkDialog(r,i,a).then(function(t){e.invoke("editor.restoreRange",r),e.invoke("editor.createLink",r,t,s),e.invoke("popover.hide",o)}).fail(function(){e.invoke("editor.restoreRange",r)})}},_=function(e){var n=function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},i=function(t,e){t.on("keypress",function(t){t.keyCode===p.code.ENTER&&e.trigger("click")})};this.show=function(t){var n=t.dialog(),i=t.editable();e.invoke("editor.saveRange",i),this.showImageDialog(i,n).then(function(n){e.invoke("editor.restoreRange",i),"string"==typeof n?e.invoke("editor.insertImage",i,n):e.insertImages(t,n)}).fail(function(){e.invoke("editor.restoreRange",i)})},this.showImageDialog=function(e,r){return t.Deferred(function(t){var e=r.find(".note-image-dialog"),o=r.find(".note-image-input"),a=r.find(".note-image-url"),s=r.find(".note-image-btn");e.one("shown.bs.modal",function(){o.replaceWith(o.clone().on("change",function(){t.resolve(this.files||this.value),e.modal("hide")}).val("")),s.click(function(n){n.preventDefault(),t.resolve(a.val()),e.modal("hide")}),a.on("keyup paste",function(t){var e;e="paste"===t.type?t.originalEvent.clipboardData.getData("text"):a.val(),n(s,e)}).val("").trigger("focus"),i(a,s)}).one("hidden.bs.modal",function(){o.off("change"),a.off("keyup paste keypress"),s.off("click"),"pending"===t.state()&&t.reject()}).modal("show")})}},E=function(e){this.showHelpDialog=function(e,n){return t.Deferred(function(t){var e=n.find(".note-help-dialog");e.one("hidden.bs.modal",function(){t.resolve()}).modal("show")}).promise()},this.show=function(t){var n=t.dialog(),i=t.editable();e.invoke("editor.saveRange",i,!0),this.showHelpDialog(i,n).then(function(){e.invoke("editor.restoreRange",i)})}},I=function(){var e=this.modules={editor:new w(this),toolbar:new k(this),statusbar:new T(this),popover:new S(this),handle:new D(this),fullscreen:new M(this),codeview:new A(this),dragAndDrop:new L(this),clipboard:new F(this),linkDialog:new N(this),imageDialog:new _(this),helpDialog:new E(this)};this.invoke=function(){var t=s.head(s.from(arguments)),e=s.tail(s.from(arguments)),n=t.split("."),i=n.length>1,r=i&&s.head(n),o=i?s.last(n):s.head(n),a=this.getModule(r),l=a[o];return l&&l.apply(a,e)},this.getModule=function(t){return this.modules[t]||this.modules.editor};var n=this.bindCustomEvent=function(t,e,n){return function(){var i=e[a.namespaceToCamel(n,"on")];return i&&i.apply(t[0],arguments),t.trigger("summernote."+n,arguments)}};this.insertImages=function(i,r){var o=i.editor(),a=i.editable(),s=i.holder(),l=a.data("callbacks"),u=o.data("options");l.onImageUpload?n(s,l,"image.upload")(r):t.each(r,function(t,i){var r=i.name;u.maximumImageFileSize&&u.maximumImageFileSize<i.size?n(s,l,"image.upload.error")(u.langInfo.image.maximumFileSizeError):f.readFileAsDataURL(i).then(function(t){e.editor.insertImage(a,t,r)}).fail(function(){n(s,l,"image.upload.error")(u.langInfo.image.maximumFileSizeError)})})};var i={showLinkDialog:function(t){e.linkDialog.show(t)},showImageDialog:function(t){e.imageDialog.show(t)},showHelpDialog:function(t){e.helpDialog.show(t)},fullscreen:function(t){e.fullscreen.toggle(t)},codeview:function(t){e.codeview.toggle(t)}},r=function(t){c.isImg(t.target)&&t.preventDefault()},l=function(t){setTimeout(function(){var n=c.makeLayoutInfo(t.currentTarget||t.target),i=e.editor.currentStyle(t.target);if(i){var r=n.editor().data("options").airMode;r||e.toolbar.update(n.toolbar(),i),e.popover.update(n.popover(),i,r),e.handle.update(n.handle(),i,r)}},0)},u=function(t){var n=c.makeLayoutInfo(t.currentTarget||t.target);e.popover.hide(n.popover()),e.handle.hide(n.handle())},d=function(e){var n=t(e.target).closest("[data-event]");n.length&&e.preventDefault()},h=function(n){var r=t(n.target).closest("[data-event]");if(r.length){var o,a=r.attr("data-event"),u=r.attr("data-value"),d=r.attr("data-hide"),h=c.makeLayoutInfo(n.target);if(-1!==t.inArray(a,["resize","floatMe","removeMedia","imageShape"])){var f=h.handle().find(".note-control-selection");o=t(f.data("target"))}if(d&&r.parents(".popover").hide(),t.isFunction(t.summernote.pluginEvents[a]))t.summernote.pluginEvents[a](n,e.editor,h,u);else if(e.editor[a]){var p=h.editable();p.focus(),e.editor[a](p,u,o),n.preventDefault()}else i[a]&&(i[a].call(this,h),n.preventDefault());if(-1!==t.inArray(a,["backColor","foreColor"])){var m=h.editor().data("options",m),v=m.airMode?e.popover:e.toolbar;v.updateRecentColor(s.head(r),a,u)}l(n)}},v=18,g=function(e,n){var i,r=t(e.target.parentNode),o=r.next(),a=r.find(".note-dimension-picker-mousecatcher"),s=r.find(".note-dimension-picker-highlighted"),l=r.find(".note-dimension-picker-unhighlighted");if(void 0===e.offsetX){var u=t(e.target).offset();i={x:e.pageX-u.left,y:e.pageY-u.top}}else i={x:e.offsetX,y:e.offsetY};var c={c:Math.ceil(i.x/v)||1,r:Math.ceil(i.y/v)||1};s.css({width:c.c+"em",height:c.r+"em"}),a.attr("data-value",c.c+"x"+c.r),3<c.c&&c.c<n.insertTableMaxSize.col&&l.css({width:c.c+1+"em"}),3<c.r&&c.r<n.insertTableMaxSize.row&&l.css({height:c.r+1+"em"}),o.html(c.c+" x "+c.r)};this.bindKeyMap=function(n,r){var o=n.editor(),a=n.editable();a.on("keydown",function(s){var l=[];s.metaKey&&l.push("CMD"),s.ctrlKey&&!s.altKey&&l.push("CTRL"),s.shiftKey&&l.push("SHIFT");var u=p.nameFromCode[s.keyCode];u&&l.push(u);var c=r[l.join("+")];if(c)if(t.summernote.pluginEvents[c]){var d=t.summernote.pluginEvents[c];t.isFunction(d)&&d(s,e.editor,n)}else e.editor[c]?(e.editor[c](a,o.data("options")),s.preventDefault()):i[c]&&(i[c].call(this,n),s.preventDefault());else p.isEdit(s.keyCode)&&e.editor.afterCommand(a)})},this.attach=function(t,n){n.shortcuts&&this.bindKeyMap(t,n.keyMap[o.isMac?"mac":"pc"]),t.editable().on("mousedown",r),t.editable().on("keyup mouseup",l),t.editable().on("scroll",u),e.clipboard.attach(t,n),e.handle.attach(t,n),t.popover().on("click",h),t.popover().on("mousedown",d),e.dragAndDrop.attach(t,n),n.airMode||(t.toolbar().on("click",h),t.toolbar().on("mousedown",d),e.statusbar.attach(t,n));var i=n.airMode?t.popover():t.toolbar(),a=i.find(".note-dimension-picker-mousecatcher");a.css({width:n.insertTableMaxSize.col+"em",height:n.insertTableMaxSize.row+"em"}).on("mousemove",function(t){g(t,n)}),t.editor().data("options",n),o.isMSIE||setTimeout(function(){document.execCommand("styleWithCSS",0,n.styleWithSpan)},0);var f=new m(t.editable());t.editable().data("NoteHistory",f),t.editable().data("callbacks",{onInit:n.onInit,onFocus:n.onFocus,onBlur:n.onBlur,onKeydown:n.onKeydown,onKeyup:n.onKeyup,onMousedown:n.onMousedown,onEnter:n.onEnter,onPaste:n.onPaste,onBeforeCommand:n.onBeforeCommand,onChange:n.onChange,onImageUpload:n.onImageUpload,onImageUploadError:n.onImageUploadError,onMediaDelete:n.onMediaDelete}),c.isTextarea(s.head(t.holder()))&&t.holder().closest("form").submit(function(){var e=t.holder().code();t.holder().val(e),n.onsubmit&&n.onsubmit(e)})},this.attachCustomEvent=function(e,i){var r=e.holder(),a=e.editable(),l=a.data("callbacks");a.focus(n(r,l,"focus")),a.blur(n(r,l,"blur")),a.keydown(function(t){t.keyCode===p.code.ENTER&&n(r,l,"enter").call(this,t),n(r,l,"keydown").call(this,t)}),a.keyup(n(r,l,"keyup")),a.on("mousedown",n(r,l,"mousedown")),a.on("mouseup",n(r,l,"mouseup")),a.on("scroll",n(r,l,"scroll")),a.on("paste",n(r,l,"paste"));var u=o.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";a.on(u,function(){n(r,l,"change")(a.html(),a)}),i.airMode||(e.toolbar().click(n(r,l,"toolbar.click")),e.popover().click(n(r,l,"popover.click"))),c.isTextarea(s.head(r))&&r.closest("form").submit(function(t){n(r,l,"submit").call(this,t,r.code())}),n(r,l,"init")(e);for(var d=0,h=t.summernote.plugins.length;h>d;d++)t.isFunction(t.summernote.plugins[d].init)&&t.summernote.plugins[d].init(e)},this.detach=function(t,e){t.holder().off(),t.editable().off(),t.popover().off(),t.handle().off(),t.dialog().off(),e.airMode||(t.dropzone().off(),t.toolbar().off(),t.statusbar().off())}},O=function(){var e=function(t,e){var n=e.event,i=e.value,r=e.title,o=e.className,a=e.dropdown,s=e.hide;return'<button type="button" class="btn btn-default btn-sm btn-small'+(o?" "+o:"")+(a?" dropdown-toggle":"")+'"'+(a?' data-toggle="dropdown"':"")+(r?' title="'+r+'"':"")+(n?' data-event="'+n+'"':"")+(i?" data-value='"+i+"'":"")+(s?" data-hide='"+s+"'":"")+' tabindex="-1">'+t+(a?' <span class="caret"></span>':"")+"</button>"+(a||"")},n=function(t,n){var i='<i class="'+t+'"></i>';return e(i,n)},i=function(e,n){var i=t('<div class="'+e+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content"></div></div>');return i.find(".popover-content").append(n),i},r=function(t,e,n,i){return'<div class="'+t+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(e?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+e+"</h4></div>":"")+'<div class="modal-body">'+n+"</div>"+(i?'<div class="modal-footer">'+i+"</div>":"")+"</div></div></div>"},s={picture:function(t,e){return n(e.iconPrefix+"picture-o",{event:"showImageDialog",title:t.image.image,hide:!0})},link:function(t,e){return n(e.iconPrefix+"link",{event:"showLinkDialog",title:t.link.link,hide:!0})},table:function(t,e){var i='<ul class="note-table dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>';return n(e.iconPrefix+"table",{title:t.table.table,dropdown:i})},style:function(t,e){var i=e.styleTags.reduce(function(e,n){var i=t.style["p"===n?"normal":n];return e+'<li><a data-event="formatBlock" href="#" data-value="'+n+'">'+("p"===n||"pre"===n?i:"<"+n+">"+i+"</"+n+">")+"</a></li>"},"");return n(e.iconPrefix+"magic",{title:t.style.style,dropdown:'<ul class="dropdown-menu">'+i+"</ul>"})},fontname:function(t,n){var i=[],r=n.fontNames.reduce(function(t,e){return o.isFontInstalled(e)||-1!==n.fontNamesIgnoreCheck.indexOf(e)?(i.push(e),t+'<li><a data-event="fontName" href="#" data-value="'+e+'" style="font-family:\''+e+'\'"><i class="'+n.iconPrefix+'check"></i> '+e+"</a></li>"):t},""),a=o.isFontInstalled(n.defaultFontName),s=a?n.defaultFontName:i[0],l='<span class="note-current-fontname">'+s+"</span>";return e(l,{title:t.font.name,dropdown:'<ul class="dropdown-menu">'+r+"</ul>"})},fontsize:function(t,n){var i=n.fontSizes.reduce(function(t,e){return t+'<li><a data-event="fontSize" href="#" data-value="'+e+'"><i class="fa fa-check"></i> '+e+"</a></li>"},""),r='<span class="note-current-fontsize">11</span>';return e(r,{title:t.font.size,dropdown:'<ul class="dropdown-menu">'+i+"</ul>"})},color:function(t,n){var i='<i class="'+n.iconPrefix+'font" style="color:black;background-color:yellow;"></i>',r=e(i,{className:"note-recent-color",title:t.color.recent,event:"color",value:'{"backColor":"yellow"}'}),o='<ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">'+t.color.background+'</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+t.color.transparent+'">'+t.color.setTransparent+'</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">'+t.color.foreground+'</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+t.color.reset+'">'+t.color.resetToDefault+'</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>',a=e("",{title:t.color.more,dropdown:o});return r+a},bold:function(t,e){return n(e.iconPrefix+"bold",{event:"bold",title:t.font.bold})},italic:function(t,e){return n(e.iconPrefix+"italic",{event:"italic",title:t.font.italic})},underline:function(t,e){return n(e.iconPrefix+"underline",{event:"underline",title:t.font.underline})},strikethrough:function(t){return n("fa fa-strikethrough",{event:"strikethrough",title:t.font.strikethrough})},superscript:function(t){return n("fa fa-superscript",{event:"superscript",title:t.font.superscript})},subscript:function(t){return n("fa fa-subscript",{event:"subscript",title:t.font.subscript})},clear:function(t,e){return n(e.iconPrefix+"eraser",{event:"removeFormat",title:t.font.clear})},ul:function(t,e){return n(e.iconPrefix+"list-ul",{event:"insertUnorderedList",title:t.lists.unordered})},ol:function(t,e){return n(e.iconPrefix+"list-ol",{event:"insertOrderedList",title:t.lists.ordered})},paragraph:function(t,e){var i=n(e.iconPrefix+"align-left",{title:t.paragraph.left,event:"justifyLeft"}),r=n(e.iconPrefix+"align-center",{title:t.paragraph.center,event:"justifyCenter"}),o=n(e.iconPrefix+"align-right",{title:t.paragraph.right,event:"justifyRight"}),a=n(e.iconPrefix+"align-justify",{title:t.paragraph.justify,event:"justifyFull"}),s=n(e.iconPrefix+"outdent",{title:t.paragraph.outdent,event:"outdent"}),l=n(e.iconPrefix+"indent",{title:t.paragraph.indent,event:"indent"}),u='<div class="dropdown-menu"><div class="note-align btn-group">'+i+r+o+a+'</div><div class="note-list btn-group">'+l+s+"</div></div>";return n(e.iconPrefix+"align-left",{title:t.paragraph.paragraph,dropdown:u})},height:function(t,e){var i=e.lineHeights.reduce(function(t,n){return t+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(n)+'"><i class="'+e.iconPrefix+'check"></i> '+n+"</a></li>"},"");return n(e.iconPrefix+"text-height",{title:t.font.height,dropdown:'<ul class="dropdown-menu">'+i+"</ul>"})},help:function(t,e){return n(e.iconPrefix+"question",{event:"showHelpDialog",title:t.options.help,hide:!0})},fullscreen:function(t,e){return n(e.iconPrefix+"arrows-alt",{event:"fullscreen",title:t.options.fullscreen})},codeview:function(t,e){return n(e.iconPrefix+"code",{event:"codeview",title:t.options.codeview})},undo:function(t,e){return n(e.iconPrefix+"undo",{event:"undo",title:t.history.undo})},redo:function(t,e){return n(e.iconPrefix+"repeat",{event:"redo",title:t.history.redo})},hr:function(t,e){return n(e.iconPrefix+"minus",{event:"insertHorizontalRule",title:t.hr.insert})}},l=function(r,o){var a=function(){var t=n(o.iconPrefix+"edit",{title:r.link.edit,event:"showLinkDialog",hide:!0}),e=n(o.iconPrefix+"unlink",{title:r.link.unlink,event:"unlink"}),a='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+t+e+"</div>";return i("note-link-popover",a)},l=function(){var t=e('<span class="note-fontsize-10">100%</span>',{title:r.image.resizeFull,event:"resize",value:"1"}),a=e('<span class="note-fontsize-10">50%</span>',{title:r.image.resizeHalf,event:"resize",value:"0.5"}),s=e('<span class="note-fontsize-10">25%</span>',{title:r.image.resizeQuarter,event:"resize",value:"0.25"}),l=n(o.iconPrefix+"align-left",{title:r.image.floatLeft,event:"floatMe",value:"left"}),u=n(o.iconPrefix+"align-right",{title:r.image.floatRight,event:"floatMe",value:"right"}),c=n(o.iconPrefix+"align-justify",{title:r.image.floatNone,event:"floatMe",value:"none"}),d=n(o.iconPrefix+"square",{title:r.image.shapeRounded,event:"imageShape",value:"img-rounded"}),h=n(o.iconPrefix+"circle-o",{title:r.image.shapeCircle,event:"imageShape",value:"img-circle"}),f=n(o.iconPrefix+"picture-o",{title:r.image.shapeThumbnail,event:"imageShape",value:"img-thumbnail"}),p=n(o.iconPrefix+"times",{title:r.image.shapeNone,event:"imageShape",value:""}),m=n(o.iconPrefix+"trash-o",{title:r.image.remove,event:"removeMedia",value:"none"}),v='<div class="btn-group">'+t+a+s+'</div><div class="btn-group">'+l+u+c+'</div><div class="btn-group">'+d+h+f+p+'</div><div class="btn-group">'+m+"</div>";return i("note-image-popover",v)},u=function(){for(var e=t("<div />"),n=0,a=o.airPopover.length;a>n;n++){for(var l=o.airPopover[n],u=t('<div class="note-'+l[0]+' btn-group">'),c=0,d=l[1].length;d>c;c++){var h=t(s[l[1][c]](r,o));h.attr("data-name",l[1][c]),u.append(h)}e.append(u)}return i("note-air-popover",e.children())},c=t('<div class="note-popover" />');return c.append(a()),c.append(l()),o.airMode&&c.append(u()),c},u=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'},d=function(t,e){var n="note-shortcut-col col-xs-6 note-shortcut-",i=[];for(var r in e)e.hasOwnProperty(r)&&i.push('<div class="'+n+'key">'+e[r].kbd+'</div><div class="'+n+'name">'+e[r].text+"</div>");return'<div class="note-shortcut-row row"><div class="'+n+'title col-xs-offset-6">'+t+'</div></div><div class="note-shortcut-row row">'+i.join('</div><div class="note-shortcut-row row">')+"</div>"},h=function(t){var e=[{kbd:"⌘ + B",text:t.font.bold},{kbd:"⌘ + I",text:t.font.italic},{kbd:"⌘ + U",text:t.font.underline},{kbd:"⌘ + \\",text:t.font.clear}];return d(t.shortcut.textFormatting,e)},f=function(t){var e=[{kbd:"⌘ + Z",text:t.history.undo},{kbd:"⌘ + ⇧ + Z",text:t.history.redo},{kbd:"⌘ + ]",text:t.paragraph.indent},{kbd:"⌘ + [",text:t.paragraph.outdent},{kbd:"⌘ + ENTER",text:t.hr.insert}];return d(t.shortcut.action,e)},p=function(t){var e=[{kbd:"⌘ + ⇧ + L",text:t.paragraph.left},{kbd:"⌘ + ⇧ + E",text:t.paragraph.center},{kbd:"⌘ + ⇧ + R",text:t.paragraph.right},{kbd:"⌘ + ⇧ + J",text:t.paragraph.justify},{kbd:"⌘ + ⇧ + NUM7",text:t.lists.ordered},{kbd:"⌘ + ⇧ + NUM8",text:t.lists.unordered}];return d(t.shortcut.paragraphFormatting,e)},m=function(t){var e=[{kbd:"⌘ + NUM0",text:t.style.normal},{kbd:"⌘ + NUM1",text:t.style.h1},{kbd:"⌘ + NUM2",text:t.style.h2},{kbd:"⌘ + NUM3",text:t.style.h3},{kbd:"⌘ + NUM4",text:t.style.h4},{kbd:"⌘ + NUM5",text:t.style.h5},{kbd:"⌘ + NUM6",text:t.style.h6}];return d(t.shortcut.documentStyle,e)},v=function(t,e){var n=e.extraKeys,i=[];for(var r in n)n.hasOwnProperty(r)&&i.push({kbd:r,text:n[r]});return d(t.shortcut.extraKeys,i)},g=function(t,e){var n='class="note-shortcut note-shortcut-col col-sm-6 col-xs-12"',i=["<div "+n+">"+f(t,e)+"</div><div "+n+">"+h(t,e)+"</div>","<div "+n+">"+m(t,e)+"</div><div "+n+">"+p(t,e)+"</div>"];

return e.extraKeys&&i.push("<div "+n+">"+v(t,e)+"</div>"),'<div class="note-shortcut-row row">'+i.join('</div><div class="note-shortcut-row row">')+"</div>"},y=function(t){return t.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift")},b={image:function(t,e){var n="";if(e.maximumImageFileSize){var i=Math.floor(Math.log(e.maximumImageFileSize)/Math.log(1024)),o=1*(e.maximumImageFileSize/Math.pow(1024,i)).toFixed(2)+" "+" KMGTP"[i]+"B";n="<small>"+t.image.maximumFileSize+" : "+o+"</small>"}var a='<div class="form-group row-fluid note-group-select-from-files"><label>'+t.image.selectFromFiles+'</label><input class="note-image-input" type="file" name="files" accept="image/*" multiple="multiple" />'+n+'</div><div class="form-group row-fluid"><label>'+t.image.url+'</label><input class="note-image-url form-control span12" type="text" /></div>',s='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+t.image.insert+"</button>";return r("note-image-dialog",t.image.insert,a,s)},link:function(t,e){var n='<div class="form-group row-fluid"><label>'+t.link.textToDisplay+'</label><input class="note-link-text form-control span12" type="text" /></div><div class="form-group row-fluid"><label>'+t.link.url+'</label><input class="note-link-url form-control span12" type="text" /></div>'+(e.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+t.link.openInNewWindow+"</label></div>"),i='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+t.link.insert+"</button>";return r("note-link-dialog",t.link.insert,n,i)},help:function(t,e){var n='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+t.shortcut.close+'</a><div class="title">'+t.shortcut.shortcuts+"</div>"+(o.isMac?g(t,e):y(g(t,e)))+'<p class="text-center"><a href="//summernote.org/" target="_blank">Summernote 0.6.6</a> · <a href="//github.com/summernote/summernote" target="_blank">Project</a> · <a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a></p>';return r("note-help-dialog","",n,"")}},w=function(e,n){var i="";return t.each(b,function(t,r){i+=r(e,n)}),'<div class="note-dialog">'+i+"</div>"},x=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'},k=function(t){return o.isMac&&(t=t.replace("CMD","⌘").replace("SHIFT","⇧")),t.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")},C=function(e,n,i){var r=a.invertObject(n),o=e.find("button");o.each(function(e,n){var i=t(n),o=r[i.data("event")];o&&i.attr("title",function(t,e){return e+" ("+k(o)+")"})}).tooltip({container:"body",trigger:"hover",placement:i||"top"}).on("click",function(){t(this).tooltip("hide")})},T=function(e,n){var i=n.colors;e.find(".note-color-palette").each(function(){for(var e=t(this),n=e.attr("data-target-event"),r=[],o=0,a=i.length;a>o;o++){for(var s=i[o],l=[],u=0,c=s.length;c>u;u++){var d=s[u];l.push(['<button type="button" class="note-color-btn" style="background-color:',d,';" data-event="',n,'" data-value="',d,'" title="',d,'" data-toggle="button" tabindex="-1"></button>'].join(""))}r.push('<div class="note-color-row">'+l.join("")+"</div>")}e.html(r.join(""))})};this.createLayoutByAirMode=function(e,n){var i=n.langInfo,r=n.keyMap[o.isMac?"mac":"pc"],s=a.uniqueId();e.addClass("note-air-editor note-editable"),e.attr({id:"note-editor-"+s,contentEditable:!0});var c=document.body,d=t(l(i,n));d.addClass("note-air-layout"),d.attr("id","note-popover-"+s),d.appendTo(c),C(d,r),T(d,n);var h=t(u());h.addClass("note-air-layout"),h.attr("id","note-handle-"+s),h.appendTo(c);var f=t(w(i,n));f.addClass("note-air-layout"),f.attr("id","note-dialog-"+s),f.find("button.close, a.modal-close").click(function(){t(this).closest(".modal").modal("hide")}),f.appendTo(c)},this.createLayoutByFrame=function(e,n){var i=n.langInfo,r=t('<div class="note-editor"></div>');n.width&&r.width(n.width),n.height>0&&t('<div class="note-statusbar">'+(n.disableResizeEditor?"":x())+"</div>").prependTo(r);var a=!e.is(":disabled"),d=t('<div class="note-editable" contentEditable="'+a+'"></div>').prependTo(r);n.height&&d.height(n.height),n.direction&&d.attr("dir",n.direction);var h=e.attr("placeholder")||n.placeholder;h&&d.attr("data-placeholder",h),d.html(c.html(e)),t('<textarea class="note-codable"></textarea>').prependTo(r);for(var f=t('<div class="note-toolbar btn-toolbar" />'),p=0,m=n.toolbar.length;m>p;p++){for(var v=n.toolbar[p][0],g=n.toolbar[p][1],y=t('<div class="note-'+v+' btn-group" />'),b=0,k=g.length;k>b;b++){var S=s[g[b]];if(t.isFunction(S)){var D=t(S(i,n));D.attr("data-name",g[b]),y.append(D)}}f.append(y)}f.prependTo(r);var M=n.keyMap[o.isMac?"mac":"pc"];T(f,n),C(f,M,"bottom");var A=t(l(i,n)).prependTo(r);T(A,n),C(A,M),t(u()).prependTo(r);var L=t(w(i,n)).prependTo(r);L.find("button.close, a.modal-close").click(function(){t(this).closest(".modal").modal("hide")}),t('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(r),r.insertAfter(e),e.hide()},this.hasNoteEditor=function(t){return this.noteEditorFromHolder(t).length>0},this.noteEditorFromHolder=function(e){return e.hasClass("note-air-editor")?e:e.next().hasClass("note-editor")?e.next():t()},this.createLayout=function(t,e){e.airMode?this.createLayoutByAirMode(t,e):this.createLayoutByFrame(t,e)},this.layoutInfoFromHolder=function(t){var e=this.noteEditorFromHolder(t);if(e.length)return e.data("holder",t),c.buildLayoutInfo(e)},this.removeLayout=function(t,e,n){n.airMode?(t.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),e.popover().remove(),e.handle().remove(),e.dialog().remove()):(t.html(e.editable().html()),e.editor().remove(),t.show())},this.getTemplate=function(){return{button:e,iconButton:n,dialog:r}},this.addButtonInfo=function(t,e){s[t]=e},this.addDialogInfo=function(t,e){b[t]=e}};t.summernote=t.summernote||{},t.extend(t.summernote,h);var P=new O,H=new I;t.extend(t.summernote,{renderer:P,eventHandler:H,core:{agent:o,dom:c,range:d},pluginEvents:{},plugins:[]}),t.summernote.addPlugin=function(e){t.summernote.plugins.push(e),e.buttons&&t.each(e.buttons,function(t,e){P.addButtonInfo(t,e)}),e.dialogs&&t.each(e.dialogs,function(t,e){P.addDialogInfo(t,e)}),e.events&&t.each(e.events,function(e,n){t.summernote.pluginEvents[e]=n}),e.langs&&t.each(e.langs,function(e,n){t.summernote.lang[e]&&t.extend(t.summernote.lang[e],n)}),e.options&&t.extend(t.summernote.options,e.options)},t.fn.extend({summernote:function(){var e=t.type(s.head(arguments)),n="string"===e,i="object"===e,r=i?s.head(arguments):{};r=t.extend({},t.summernote.options,r),r.langInfo=t.extend(!0,{},t.summernote.lang["en-US"],t.summernote.lang[r.lang]),this.each(function(e,n){var i=t(n);if(!P.hasNoteEditor(i)){P.createLayout(i,r);var o=P.layoutInfoFromHolder(i);H.attach(o,r),H.attachCustomEvent(o,r)}}),!n&&this.length&&r.oninit&&r.oninit();var o=this.first();if(o.length){var a=P.layoutInfoFromHolder(o);if(n){var l=s.head(s.from(arguments)),u=s.tail(s.from(arguments)),c=[l,a.editable()].concat(u);return H.invoke.apply(H,c)}r.focus&&a.editable().focus()}return this},code:function(e){if(void 0===e){var n=this.first();if(!n.length)return;var i=P.layoutInfoFromHolder(n),r=i&&i.editable();if(r&&r.length){var o=H.invoke("codeview.isActivated",i);return H.invoke("codeview.sync",i),o?i.codable().val():i.editable().html()}return c.value(n)}return this.each(function(n,i){var r=P.layoutInfoFromHolder(t(i)),o=r&&r.editable();o&&o.html(e)}),this},destroy:function(){return this.each(function(e,n){var i=t(n);if(P.hasNoteEditor(i)){var r=P.layoutInfoFromHolder(i),o=r.editor().data("options");H.detach(r,o),P.removeLayout(i,r,o)}}),this}})})},function(t,e,n){(function(t){!function(t){t.extend(t.summernote.lang,{"zh-CN":{font:{bold:"粗体",italic:"斜体",underline:"下划线",clear:"清除格式",height:"行高",name:"字体",strikethrough:"删除线",size:"字号"},image:{image:"图片",insert:"插入图片",resizeFull:"调整至 100%",resizeHalf:"调整至 50%",resizeQuarter:"调整至 25%",floatLeft:"左浮动",floatRight:"右浮动",floatNone:"不浮动",dragImageHere:"将图片拖至此处",selectFromFiles:"从本地上传",url:"图片地址"},link:{link:"链接",insert:"插入链接",unlink:"去除链接",edit:"编辑链接",textToDisplay:"显示文本",url:"链接地址",openInNewWindow:"在新窗口打开"},table:{table:"表格"},hr:{insert:"水平线"},style:{style:"样式",normal:"普通",blockquote:"引用",pre:"代码",h1:"标题 1",h2:"标题 2",h3:"标题 3",h4:"标题 4",h5:"标题 5",h6:"标题 6"},lists:{unordered:"无序列表",ordered:"有序列表"},options:{help:"帮助",fullscreen:"全屏",codeview:"源代码"},paragraph:{paragraph:"段落",outdent:"减少缩进",indent:"增加缩进",left:"左对齐",center:"居中对齐",right:"右对齐",justify:"两端对齐"},color:{recent:"最近使用",more:"更多",background:"背景",foreground:"前景",transparent:"透明",setTransparent:"透明",reset:"重置",resetToDefault:"默认"},shortcut:{shortcuts:"快捷键",close:"关闭",textFormatting:"文本格式",action:"动作",paragraphFormatting:"段落格式",documentStyle:"文档样式"},history:{undo:"撤销",redo:"重做"}}})}(t)}).call(e,n(1))},function(t,e,n){var i,r,o;!function(a){r=[n(1)],i=a,o="function"==typeof i?i.apply(e,r):i,!(void 0!==o&&(t.exports=o))}(function(t){var e=t.summernote.renderer.getTemplate(),n=t.summernote.core.range,i=t.summernote.core.dom,r=function(e){var n,i=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,r=e.match(i),o=/\/\/instagram.com\/p\/(.[a-zA-Z0-9]*)/,a=e.match(o),s=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/,l=e.match(s),u=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,c=e.match(u),d=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,h=e.match(d),f=/\/\/v\.youku\.com\/v_show\/id_(\w+)\.html/,p=e.match(f),m=/^.+.(mp4|m4v)$/,v=e.match(m),g=/^.+.(ogg|ogv)$/,y=e.match(g),b=/^.+.(webm)$/,w=e.match(b);if(r&&11===r[1].length){var x=r[1];n=t("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+x).attr("width","640").attr("height","360")}else if(a&&a[0].length)n=t("<iframe>").attr("frameborder",0).attr("src",a[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(l&&l[0].length)n=t("<iframe>").attr("frameborder",0).attr("src",l[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(c&&c[3].length)n=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+c[3]).attr("width","640").attr("height","360");else if(h&&h[2].length)n=t("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+h[2]).attr("width","640").attr("height","360");else if(p&&p[1].length)n=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+p[1]);else{if(!(v||y||w))return!1;n=t("<video controls>").attr("src",e).attr("width","640").attr("height","360")}return n[0]},o=function(t){t.focus();var e=n.create();if(e.isOnAnchor()){var r=i.ancestor(e.sc,i.isAnchor);e=n.createFromNode(r)}return e.toString()},a=function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},s=function(e,n,i){return t.Deferred(function(t){var e=n.find(".note-video-dialog"),r=e.find(".note-video-url"),o=e.find(".note-video-btn");e.one("shown.bs.modal",function(){r.val(i).on("input",function(){a(o,r.val())}).trigger("focus"),o.click(function(n){n.preventDefault(),t.resolve(r.val()),e.modal("hide")})}).one("hidden.bs.modal",function(){r.off("input"),o.off("click"),"pending"===t.state()&&t.reject()}).modal("show")})};t.summernote.addPlugin({name:"video",buttons:{video:function(t){return e.iconButton("fa fa-youtube-play",{event:"showVideoDialog",title:t.video.video,hide:!0})}},dialogs:{video:function(t){var n='<div class="form-group row-fluid"><label>'+t.video.url+' <small class="text-muted">'+t.video.providers+'</small></label><input class="note-video-url form-control span12" type="text" /></div>',i='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+t.video.insert+"</button>";return e.dialog("note-video-dialog",t.video.insert,n,i)}},events:{showVideoDialog:function(t,e,n){var i=n.dialog(),a=n.editable(),l=o(a);e.saveRange(a),s(a,i,l).then(function(t){e.restoreRange(a);var n=r(t);n&&e.insertNode(a,n)}).fail(function(){e.restoreRange(a)})}},langs:{"en-US":{video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"}},"ar-AR":{video:{video:"فيديو",videoLink:"رابط الفيديو",insert:"إدراج الفيديو",url:"رابط الفيديو",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion ou Youku)"}},"ca-ES":{video:{video:"Video",videoLink:"Enllaç del video",insert:"Inserir video",url:"URL del video?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, o Youku)"}},"cs-CZ":{video:{video:"Video",videoLink:"Odkaz videa",insert:"Vložit video",url:"URL videa?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion nebo Youku)"}},"da-DK":{video:{video:"Video",videoLink:"Video Link",insert:"Indsæt Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion eller Youku)"}},"de-DE":{video:{video:"Video",videoLink:"Video Link",insert:"Video einfügen",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, oder Youku)"}},"es-ES":{video:{video:"Video",videoLink:"Link del video",insert:"Insertar video",url:"¿URL del video?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, o Youku)"}},"es-EU":{video:{video:"Bideoa",videoLink:"Bideorako esteka",insert:"Bideo berri bat txertatu",url:"Bideoaren URL helbidea",providers:"(YouTube, Vimeo, Vine, Instagram, edo DailyMotion)"}},"fa-IR":{video:{video:"ویدیو",videoLink:"لینک ویدیو",insert:"افزودن ویدیو",url:"آدرس ویدیو ؟",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, یا Youku)"}},"fi-FI":{video:{video:"Video",videoLink:"Linkki videoon",insert:"Lisää video",url:"Videon URL-osoite?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion tai Youku)"}},"fr-FR":{video:{video:"Vidéo",videoLink:"Lien vidéo",insert:"Insérer une vidéo",url:"URL de la vidéo",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion ou Youku)"}},"he-IL":{video:{video:"סרטון",videoLink:"קישור לסרטון",insert:"הוסף סרטון",url:"קישור לסרטון",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion או Youku)"}},"hu-HU":{video:{video:"Videó",videoLink:"Videó hivatkozás",insert:"Videó beszúrása",url:"Videó URL címe",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, vagy Youku)"}},"id-ID":{video:{video:"Video",videoLink:"Link video",insert:"Sisipkan video",url:"Tautan video",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, atau Youku)"}},"it-IT":{video:{video:"Video",videoLink:"Collegamento ad un Video",insert:"Inserisci Video",url:"URL del Video",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion o Youku)"}},"ja-JP":{video:{video:"動画",videoLink:"動画リンク",insert:"動画挿入",url:"動画のURL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, Youku)"}},"ko-KR":{video:{video:"동영상",videoLink:"동영상 링크",insert:"동영상 추가",url:"동영상 URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, Youku 사용 가능)"}},"nb-NO":{video:{video:"Video",videoLink:"Videolenke",insert:"Sett inn video",url:"Video-URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion eller Youku)"}},"nl-NL":{video:{video:"Video",videoLink:"Video link",insert:"Video invoegen",url:"URL van de video",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion of Youku)"}},"pl-PL":{video:{video:"Wideo",videoLink:"Adres wideo",insert:"Wstaw wideo",url:"Adres wideo",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, lub Youku)"}},"pt-BR":{video:{video:"Vídeo",videoLink:"Link para vídeo",insert:"Inserir vídeo",url:"URL do vídeo?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, ou Youku)"}},"ro-RO":{video:{video:"Video",videoLink:"Link video",insert:"Inserează video",url:"URL video?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, sau Youku)"}},"ru-RU":{video:{video:"Видео",videoLink:"Ссылка на видео",insert:"Вставить видео",url:"URL видео",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion или Youku)"}},"sk-SK":{video:{video:"Video",videoLink:"Odkaz videa",insert:"Vložiť video",url:"URL videa?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion nebo Youku)"}},"sl-SI":{video:{video:"Video",videoLink:"Video povezava",insert:"Vstavi video",url:"Povezava do videa",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion ali Youku)"}},"sr-RS":{video:{video:"Видео",videoLink:"Веза ка видеу",insert:"Уметни видео",url:"URL видео",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion или Youku)"}},"sr-RS-Latin":{video:{video:"Video",videoLink:"Veza ka videu",insert:"Umetni video",url:"URL video",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion ili Youku)"}},"sv-SE":{video:{video:"Filmklipp",videoLink:"Länk till filmklipp",insert:"Infoga filmklipp",url:"Länk till filmklipp",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion eller Youku)"}},"th-TH":{video:{video:"วีดีโอ",videoLink:"ลิงก์ของวีดีโอ",insert:"แทรกวีดีโอ",url:"ที่อยู่ URL ของวีดีโอ?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion หรือ Youku)"}},"tr-TR":{video:{video:"Video",videoLink:"Video bağlantısı",insert:"Video ekle",url:"Video bağlantısı?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion veya Youku)"}},"uk-UA":{video:{video:"Відео",videoLink:"Посилання на відео",insert:"Вставити відео",url:"URL відео",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion чи Youku)"}},"vi-VN":{video:{video:"Video",videoLink:"Đường Dẫn đến Video",insert:"Chèn Video",url:"URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion và Youku)"}},"zh-CN":{video:{video:"视频",videoLink:"视频链接",insert:"插入视频",url:"视频地址",providers:"(优酷, Instagram, DailyMotion, Youtube等)"}},"zh-TW":{video:{video:"影片",videoLink:"影片連結",insert:"插入影片",url:"影片網址",providers:"(優酷, Instagram, DailyMotion, Youtube等)"}}}})})},function(t,e,n){}]);